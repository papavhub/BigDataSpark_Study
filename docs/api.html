

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>27. PySpark API &mdash; Learning Apache Spark with Python  documentation</title>
  

  
  
    <link rel="shortcut icon" href="_static/icon.ico"/>
  
  
  

  
  <script type="text/javascript" src="_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
        <script src="_static/jquery.js"></script>
        <script src="_static/underscore.js"></script>
        <script src="_static/doctools.js"></script>
        <script src="_static/language_data.js"></script>
    
    <script type="text/javascript" src="_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="_static/fix_rtd.css" type="text/css" />
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="28. Main Reference" href="reference.html" />
    <link rel="prev" title="26. Databricks Tips" href="bricks.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="index.html" class="icon icon-home"> Learning Apache Spark with Python
          

          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="preface.html">1. Preface</a></li>
<li class="toctree-l1"><a class="reference internal" href="why.html">2. Why Spark with Python ?</a></li>
<li class="toctree-l1"><a class="reference internal" href="setup.html">3. Configure Running Platform</a></li>
<li class="toctree-l1"><a class="reference internal" href="introduction.html">4. An Introduction to Apache Spark</a></li>
<li class="toctree-l1"><a class="reference internal" href="rdd.html">5. Programming with RDDs</a></li>
<li class="toctree-l1"><a class="reference internal" href="stats.html">6. Statistics and Linear Algebra Preliminaries</a></li>
<li class="toctree-l1"><a class="reference internal" href="exploration.html">7. Data Exploration</a></li>
<li class="toctree-l1"><a class="reference internal" href="manipulation.html">8. Data Manipulation: Features</a></li>
<li class="toctree-l1"><a class="reference internal" href="regression.html">9. Regression</a></li>
<li class="toctree-l1"><a class="reference internal" href="reg.html">10. Regularization</a></li>
<li class="toctree-l1"><a class="reference internal" href="classification.html">11. Classification</a></li>
<li class="toctree-l1"><a class="reference internal" href="clustering.html">12. Clustering</a></li>
<li class="toctree-l1"><a class="reference internal" href="rfm.html">13. RFM Analysis</a></li>
<li class="toctree-l1"><a class="reference internal" href="textmining.html">14. Text Mining</a></li>
<li class="toctree-l1"><a class="reference internal" href="socialnetwork.html">15. Social Network Analysis</a></li>
<li class="toctree-l1"><a class="reference internal" href="als.html">16. ALS: Stock Portfolio Recommendations</a></li>
<li class="toctree-l1"><a class="reference internal" href="mc.html">17. Monte Carlo Simulation</a></li>
<li class="toctree-l1"><a class="reference internal" href="mcmc.html">18. Markov Chain Monte Carlo</a></li>
<li class="toctree-l1"><a class="reference internal" href="fnn.html">19. Neural Network</a></li>
<li class="toctree-l1"><a class="reference internal" href="auto.html">20. Automation for Cloudera Distribution Hadoop</a></li>
<li class="toctree-l1"><a class="reference internal" href="pack.html">21. Wrap PySpark Package</a></li>
<li class="toctree-l1"><a class="reference internal" href="audit.html">22. PySpark Data Audit Library</a></li>
<li class="toctree-l1"><a class="reference internal" href="ze2nb.html">23. Zeppelin to jupyter notebook</a></li>
<li class="toctree-l1"><a class="reference internal" href="cheat.html">24. My Cheat Sheet</a></li>
<li class="toctree-l1"><a class="reference internal" href="jdbc.html">25. JDBC Connection</a></li>
<li class="toctree-l1"><a class="reference internal" href="bricks.html">26. Databricks Tips</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">27. PySpark API</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#module-pyspark.ml.stat">27.1. Stat API</a></li>
<li class="toctree-l2"><a class="reference internal" href="#module-pyspark.ml.regression">27.2. Regression API</a></li>
<li class="toctree-l2"><a class="reference internal" href="#module-pyspark.ml.classification">27.3. Classification API</a></li>
<li class="toctree-l2"><a class="reference internal" href="#module-pyspark.ml.clustering">27.4. Clustering API</a></li>
<li class="toctree-l2"><a class="reference internal" href="#module-pyspark.ml.recommendation">27.5. Recommendation API</a></li>
<li class="toctree-l2"><a class="reference internal" href="#module-pyspark.ml.pipeline">27.6. Pipeline API</a></li>
<li class="toctree-l2"><a class="reference internal" href="#module-pyspark.ml.tuning">27.7. Tuning API</a></li>
<li class="toctree-l2"><a class="reference internal" href="#module-pyspark.ml.evaluation">27.8. Evaluation API</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="reference.html">28. Main Reference</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">Learning Apache Spark with Python</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="index.html">Docs</a> &raquo;</li>
        
      <li><span class="section-number">27. </span>PySpark API</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="pyspark-api">
<span id="api"></span><h1><span class="section-number">27. </span>PySpark API<a class="headerlink" href="#pyspark-api" title="Permalink to this headline">¶</a></h1>
<p>Those APIs are automatically generated from <code class="docutils literal notranslate"><span class="pre">PySpark</span></code> package, so all the CopyRights belong to Spark.</p>
<div class="section" id="module-pyspark.ml.stat">
<span id="stat-api"></span><h2><span class="section-number">27.1. </span>Stat API<a class="headerlink" href="#module-pyspark.ml.stat" title="Permalink to this headline">¶</a></h2>
<dl class="py class">
<dt id="pyspark.ml.stat.ChiSquareTest">
<em class="property">class </em><code class="sig-prename descclassname">pyspark.ml.stat.</code><code class="sig-name descname">ChiSquareTest</code><a class="reference external" href="https://github.com/runawayhorse001/LearningApacheSpark/blob/master/pyspark/ml/stat.py#L27-L75"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyspark.ml.stat.ChiSquareTest" title="Permalink to this definition">¶</a></dt>
<dd><div class="admonition note">
<p class="admonition-title">Note</p>
<p>Experimental</p>
</div>
<p>Conduct Pearson’s independence test for every feature against the label. For each feature,
the (feature, label) pairs are converted into a contingency matrix for which the Chi-squared
statistic is computed. All label and feature values must be categorical.</p>
<p>The null hypothesis is that the occurrence of the outcomes is statistically independent.</p>
<div class="versionadded">
<p><span class="versionmodified added">New in version 2.2.0.</span></p>
</div>
<dl class="py method">
<dt id="pyspark.ml.stat.ChiSquareTest.test">
<em class="property">static </em><code class="sig-name descname">test</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">dataset</span></em>, <em class="sig-param"><span class="n">featuresCol</span></em>, <em class="sig-param"><span class="n">labelCol</span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/runawayhorse001/LearningApacheSpark/blob/master/pyspark/ml/stat.py#L40-L75"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyspark.ml.stat.ChiSquareTest.test" title="Permalink to this definition">¶</a></dt>
<dd><p>Perform a Pearson’s independence test using dataset.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>dataset</strong> – DataFrame of categorical labels and categorical features.
Real-valued features will be treated as categorical for each distinct value.</p></li>
<li><p><strong>featuresCol</strong> – Name of features column in dataset, of type <img class="math" src="_images/math/4e975cffcca779e031e8cef9914cbe49ca2ef7b8.png" alt="Vector"/> (<img class="math" src="_images/math/f212cbcca70ba3efa953ab895a78cb0a4b91bf89.png" alt="VectorUDT"/>).</p></li>
<li><p><strong>labelCol</strong> – Name of label column in dataset, of any numerical type.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>DataFrame containing the test result for every feature against the label.
This DataFrame will contain a single Row with the following fields:
- <img class="math" src="_images/math/202cd8f39b51198cddbf37194747ca08b5e4ee0b.png" alt="pValues: Vector"/>
- <img class="math" src="_images/math/b57379873ad0a331db8ba5752cafbe2f1ba8a6b5.png" alt="degreesOfFreedom: Array[Int]"/>
- <img class="math" src="_images/math/98ad99542f6bf3889ead08314f77faab203614e2.png" alt="statistics: Vector"/>
Each of these fields has one value per feature.</p>
</dd>
</dl>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">pyspark.ml.linalg</span> <span class="kn">import</span> <span class="n">Vectors</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">pyspark.ml.stat</span> <span class="kn">import</span> <span class="n">ChiSquareTest</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">dataset</span> <span class="o">=</span> <span class="p">[[</span><span class="mi">0</span><span class="p">,</span> <span class="n">Vectors</span><span class="o">.</span><span class="n">dense</span><span class="p">([</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">])],</span>
<span class="gp">... </span>           <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="n">Vectors</span><span class="o">.</span><span class="n">dense</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">])],</span>
<span class="gp">... </span>           <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="n">Vectors</span><span class="o">.</span><span class="n">dense</span><span class="p">([</span><span class="mi">2</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">])],</span>
<span class="gp">... </span>           <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="n">Vectors</span><span class="o">.</span><span class="n">dense</span><span class="p">([</span><span class="mi">3</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">])]]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">dataset</span> <span class="o">=</span> <span class="n">spark</span><span class="o">.</span><span class="n">createDataFrame</span><span class="p">(</span><span class="n">dataset</span><span class="p">,</span> <span class="p">[</span><span class="s2">&quot;label&quot;</span><span class="p">,</span> <span class="s2">&quot;features&quot;</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">chiSqResult</span> <span class="o">=</span> <span class="n">ChiSquareTest</span><span class="o">.</span><span class="n">test</span><span class="p">(</span><span class="n">dataset</span><span class="p">,</span> <span class="s1">&#39;features&#39;</span><span class="p">,</span> <span class="s1">&#39;label&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">chiSqResult</span><span class="o">.</span><span class="n">select</span><span class="p">(</span><span class="s2">&quot;degreesOfFreedom&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">collect</span><span class="p">()[</span><span class="mi">0</span><span class="p">]</span>
<span class="go">Row(degreesOfFreedom=[3, 1, 0])</span>
</pre></div>
</div>
<div class="versionadded">
<p><span class="versionmodified added">New in version 2.2.0.</span></p>
</div>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt id="pyspark.ml.stat.Correlation">
<em class="property">class </em><code class="sig-prename descclassname">pyspark.ml.stat.</code><code class="sig-name descname">Correlation</code><a class="reference external" href="https://github.com/runawayhorse001/LearningApacheSpark/blob/master/pyspark/ml/stat.py#L78-L136"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyspark.ml.stat.Correlation" title="Permalink to this definition">¶</a></dt>
<dd><div class="admonition note">
<p class="admonition-title">Note</p>
<p>Experimental</p>
</div>
<p>Compute the correlation matrix for the input dataset of Vectors using the specified method.
Methods currently supported: <img class="math" src="_images/math/2b52051dae81a697fd08b1fbf7f3aa121a63368a.png" alt="pearson"/> (default), <img class="math" src="_images/math/caf374418c4e2c2f78edd7ab0ef2234ea203bc45.png" alt="spearman"/>.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>For Spearman, a rank correlation, we need to create an RDD[Double] for each column
and sort it in order to retrieve the ranks and then join the columns back into an RDD[Vector],
which is fairly costly. Cache the input Dataset before calling corr with <img class="math" src="_images/math/123500f6fe16e86aaeb107ba7bb5db9f794c92b2.png" alt="method = 'spearman'"/>
to avoid recomputing the common lineage.</p>
</div>
<div class="versionadded">
<p><span class="versionmodified added">New in version 2.2.0.</span></p>
</div>
<dl class="py method">
<dt id="pyspark.ml.stat.Correlation.corr">
<em class="property">static </em><code class="sig-name descname">corr</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">dataset</span></em>, <em class="sig-param"><span class="n">column</span></em>, <em class="sig-param"><span class="n">method</span><span class="o">=</span><span class="default_value">'pearson'</span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/runawayhorse001/LearningApacheSpark/blob/master/pyspark/ml/stat.py#L93-L136"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyspark.ml.stat.Correlation.corr" title="Permalink to this definition">¶</a></dt>
<dd><p>Compute the correlation matrix with specified method using dataset.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>dataset</strong> – A Dataset or a DataFrame.</p></li>
<li><p><strong>column</strong> – The name of the column of vectors for which the correlation coefficient needs
to be computed. This must be a column of the dataset, and it must contain
Vector objects.</p></li>
<li><p><strong>method</strong> – String specifying the method to use for computing correlation.
Supported: <img class="math" src="_images/math/2b52051dae81a697fd08b1fbf7f3aa121a63368a.png" alt="pearson"/> (default), <img class="math" src="_images/math/caf374418c4e2c2f78edd7ab0ef2234ea203bc45.png" alt="spearman"/>.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>A DataFrame that contains the correlation matrix of the column of vectors. This
DataFrame contains a single row and a single column of name
‘$METHODNAME($COLUMN)’.</p>
</dd>
</dl>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">pyspark.ml.linalg</span> <span class="kn">import</span> <span class="n">Vectors</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">pyspark.ml.stat</span> <span class="kn">import</span> <span class="n">Correlation</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">dataset</span> <span class="o">=</span> <span class="p">[[</span><span class="n">Vectors</span><span class="o">.</span><span class="n">dense</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="o">-</span><span class="mi">2</span><span class="p">])],</span>
<span class="gp">... </span>           <span class="p">[</span><span class="n">Vectors</span><span class="o">.</span><span class="n">dense</span><span class="p">([</span><span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">3</span><span class="p">])],</span>
<span class="gp">... </span>           <span class="p">[</span><span class="n">Vectors</span><span class="o">.</span><span class="n">dense</span><span class="p">([</span><span class="mi">6</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">8</span><span class="p">])],</span>
<span class="gp">... </span>           <span class="p">[</span><span class="n">Vectors</span><span class="o">.</span><span class="n">dense</span><span class="p">([</span><span class="mi">9</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">])]]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">dataset</span> <span class="o">=</span> <span class="n">spark</span><span class="o">.</span><span class="n">createDataFrame</span><span class="p">(</span><span class="n">dataset</span><span class="p">,</span> <span class="p">[</span><span class="s1">&#39;features&#39;</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">pearsonCorr</span> <span class="o">=</span> <span class="n">Correlation</span><span class="o">.</span><span class="n">corr</span><span class="p">(</span><span class="n">dataset</span><span class="p">,</span> <span class="s1">&#39;features&#39;</span><span class="p">,</span> <span class="s1">&#39;pearson&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">collect</span><span class="p">()[</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">pearsonCorr</span><span class="p">)</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">&#39;nan&#39;</span><span class="p">,</span> <span class="s1">&#39;NaN&#39;</span><span class="p">))</span>
<span class="go">DenseMatrix([[ 1.        ,  0.0556...,         NaN,  0.4004...],</span>
<span class="go">             [ 0.0556...,  1.        ,         NaN,  0.9135...],</span>
<span class="go">             [        NaN,         NaN,  1.        ,         NaN],</span>
<span class="go">             [ 0.4004...,  0.9135...,         NaN,  1.        ]])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">spearmanCorr</span> <span class="o">=</span> <span class="n">Correlation</span><span class="o">.</span><span class="n">corr</span><span class="p">(</span><span class="n">dataset</span><span class="p">,</span> <span class="s1">&#39;features&#39;</span><span class="p">,</span> <span class="n">method</span><span class="o">=</span><span class="s1">&#39;spearman&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">collect</span><span class="p">()[</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">spearmanCorr</span><span class="p">)</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">&#39;nan&#39;</span><span class="p">,</span> <span class="s1">&#39;NaN&#39;</span><span class="p">))</span>
<span class="go">DenseMatrix([[ 1.        ,  0.1054...,         NaN,  0.4       ],</span>
<span class="go">             [ 0.1054...,  1.        ,         NaN,  0.9486... ],</span>
<span class="go">             [        NaN,         NaN,  1.        ,         NaN],</span>
<span class="go">             [ 0.4       ,  0.9486... ,         NaN,  1.        ]])</span>
</pre></div>
</div>
<div class="versionadded">
<p><span class="versionmodified added">New in version 2.2.0.</span></p>
</div>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt id="pyspark.ml.stat.KolmogorovSmirnovTest">
<em class="property">class </em><code class="sig-prename descclassname">pyspark.ml.stat.</code><code class="sig-name descname">KolmogorovSmirnovTest</code><a class="reference external" href="https://github.com/runawayhorse001/LearningApacheSpark/blob/master/pyspark/ml/stat.py#L139-L197"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyspark.ml.stat.KolmogorovSmirnovTest" title="Permalink to this definition">¶</a></dt>
<dd><div class="admonition note">
<p class="admonition-title">Note</p>
<p>Experimental</p>
</div>
<p>Conduct the two-sided Kolmogorov Smirnov (KS) test for data sampled from a continuous
distribution.</p>
<p>By comparing the largest difference between the empirical cumulative
distribution of the sample data and the theoretical distribution we can provide a test for the
the null hypothesis that the sample data comes from that theoretical distribution.</p>
<div class="versionadded">
<p><span class="versionmodified added">New in version 2.4.0.</span></p>
</div>
<dl class="py method">
<dt id="pyspark.ml.stat.KolmogorovSmirnovTest.test">
<em class="property">static </em><code class="sig-name descname">test</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">dataset</span></em>, <em class="sig-param"><span class="n">sampleCol</span></em>, <em class="sig-param"><span class="n">distName</span></em>, <em class="sig-param"><span class="o">*</span><span class="n">params</span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/runawayhorse001/LearningApacheSpark/blob/master/pyspark/ml/stat.py#L153-L197"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyspark.ml.stat.KolmogorovSmirnovTest.test" title="Permalink to this definition">¶</a></dt>
<dd><p>Conduct a one-sample, two-sided Kolmogorov-Smirnov test for probability distribution
equality. Currently supports the normal distribution, taking as parameters the mean and
standard deviation.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>dataset</strong> – a Dataset or a DataFrame containing the sample of data to test.</p></li>
<li><p><strong>sampleCol</strong> – Name of sample column in dataset, of any numerical type.</p></li>
<li><p><strong>distName</strong> – a <img class="math" src="_images/math/c6a0330f2db97f39758a6771390e036ee620c8e0.png" alt="string"/> name for a theoretical distribution, currently only support “norm”.</p></li>
<li><p><strong>params</strong> – a list of <img class="math" src="_images/math/a09c09e326da7767983d6e76eef85b6decc74e8a.png" alt="Double"/> values specifying the parameters to be used for the theoretical
distribution. For “norm” distribution, the parameters includes mean and variance.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>A DataFrame that contains the Kolmogorov-Smirnov test result for the input sampled data.
This DataFrame will contain a single Row with the following fields:
- <img class="math" src="_images/math/75cf8cc5b444e15b7b02f441d86db29e835b5dd0.png" alt="pValue: Double"/>
- <img class="math" src="_images/math/d8bb1dd9fb4ed443039c33026a205d040de0d747.png" alt="statistic: Double"/></p>
</dd>
</dl>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">pyspark.ml.stat</span> <span class="kn">import</span> <span class="n">KolmogorovSmirnovTest</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">dataset</span> <span class="o">=</span> <span class="p">[[</span><span class="o">-</span><span class="mf">1.0</span><span class="p">],</span> <span class="p">[</span><span class="mf">0.0</span><span class="p">],</span> <span class="p">[</span><span class="mf">1.0</span><span class="p">]]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">dataset</span> <span class="o">=</span> <span class="n">spark</span><span class="o">.</span><span class="n">createDataFrame</span><span class="p">(</span><span class="n">dataset</span><span class="p">,</span> <span class="p">[</span><span class="s1">&#39;sample&#39;</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ksResult</span> <span class="o">=</span> <span class="n">KolmogorovSmirnovTest</span><span class="o">.</span><span class="n">test</span><span class="p">(</span><span class="n">dataset</span><span class="p">,</span> <span class="s1">&#39;sample&#39;</span><span class="p">,</span> <span class="s1">&#39;norm&#39;</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">)</span><span class="o">.</span><span class="n">first</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">round</span><span class="p">(</span><span class="n">ksResult</span><span class="o">.</span><span class="n">pValue</span><span class="p">,</span> <span class="mi">3</span><span class="p">)</span>
<span class="go">1.0</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">round</span><span class="p">(</span><span class="n">ksResult</span><span class="o">.</span><span class="n">statistic</span><span class="p">,</span> <span class="mi">3</span><span class="p">)</span>
<span class="go">0.175</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">dataset</span> <span class="o">=</span> <span class="p">[[</span><span class="mf">2.0</span><span class="p">],</span> <span class="p">[</span><span class="mf">3.0</span><span class="p">],</span> <span class="p">[</span><span class="mf">4.0</span><span class="p">]]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">dataset</span> <span class="o">=</span> <span class="n">spark</span><span class="o">.</span><span class="n">createDataFrame</span><span class="p">(</span><span class="n">dataset</span><span class="p">,</span> <span class="p">[</span><span class="s1">&#39;sample&#39;</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ksResult</span> <span class="o">=</span> <span class="n">KolmogorovSmirnovTest</span><span class="o">.</span><span class="n">test</span><span class="p">(</span><span class="n">dataset</span><span class="p">,</span> <span class="s1">&#39;sample&#39;</span><span class="p">,</span> <span class="s1">&#39;norm&#39;</span><span class="p">,</span> <span class="mf">3.0</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">)</span><span class="o">.</span><span class="n">first</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">round</span><span class="p">(</span><span class="n">ksResult</span><span class="o">.</span><span class="n">pValue</span><span class="p">,</span> <span class="mi">3</span><span class="p">)</span>
<span class="go">1.0</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">round</span><span class="p">(</span><span class="n">ksResult</span><span class="o">.</span><span class="n">statistic</span><span class="p">,</span> <span class="mi">3</span><span class="p">)</span>
<span class="go">0.175</span>
</pre></div>
</div>
<div class="versionadded">
<p><span class="versionmodified added">New in version 2.4.0.</span></p>
</div>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt id="pyspark.ml.stat.Summarizer">
<em class="property">class </em><code class="sig-prename descclassname">pyspark.ml.stat.</code><code class="sig-name descname">Summarizer</code><a class="reference external" href="https://github.com/runawayhorse001/LearningApacheSpark/blob/master/pyspark/ml/stat.py#L200-L353"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyspark.ml.stat.Summarizer" title="Permalink to this definition">¶</a></dt>
<dd><div class="admonition note">
<p class="admonition-title">Note</p>
<p>Experimental</p>
</div>
<p>Tools for vectorized statistics on MLlib Vectors.
The methods in this package provide various statistics for Vectors contained inside DataFrames.
This class lets users pick the statistics they would like to extract for a given column.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">pyspark.ml.stat</span> <span class="kn">import</span> <span class="n">Summarizer</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">pyspark.sql</span> <span class="kn">import</span> <span class="n">Row</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">pyspark.ml.linalg</span> <span class="kn">import</span> <span class="n">Vectors</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">summarizer</span> <span class="o">=</span> <span class="n">Summarizer</span><span class="o">.</span><span class="n">metrics</span><span class="p">(</span><span class="s2">&quot;mean&quot;</span><span class="p">,</span> <span class="s2">&quot;count&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">df</span> <span class="o">=</span> <span class="n">sc</span><span class="o">.</span><span class="n">parallelize</span><span class="p">([</span><span class="n">Row</span><span class="p">(</span><span class="n">weight</span><span class="o">=</span><span class="mf">1.0</span><span class="p">,</span> <span class="n">features</span><span class="o">=</span><span class="n">Vectors</span><span class="o">.</span><span class="n">dense</span><span class="p">(</span><span class="mf">1.0</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">)),</span>
<span class="gp">... </span>                     <span class="n">Row</span><span class="p">(</span><span class="n">weight</span><span class="o">=</span><span class="mf">0.0</span><span class="p">,</span> <span class="n">features</span><span class="o">=</span><span class="n">Vectors</span><span class="o">.</span><span class="n">dense</span><span class="p">(</span><span class="mf">1.0</span><span class="p">,</span> <span class="mf">2.0</span><span class="p">,</span> <span class="mf">3.0</span><span class="p">))])</span><span class="o">.</span><span class="n">toDF</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">df</span><span class="o">.</span><span class="n">select</span><span class="p">(</span><span class="n">summarizer</span><span class="o">.</span><span class="n">summary</span><span class="p">(</span><span class="n">df</span><span class="o">.</span><span class="n">features</span><span class="p">,</span> <span class="n">df</span><span class="o">.</span><span class="n">weight</span><span class="p">))</span><span class="o">.</span><span class="n">show</span><span class="p">(</span><span class="n">truncate</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
<span class="go">+-----------------------------------+</span>
<span class="go">|aggregate_metrics(features, weight)|</span>
<span class="go">+-----------------------------------+</span>
<span class="go">|[[1.0,1.0,1.0], 1]                 |</span>
<span class="go">+-----------------------------------+</span>

<span class="gp">&gt;&gt;&gt; </span><span class="n">df</span><span class="o">.</span><span class="n">select</span><span class="p">(</span><span class="n">summarizer</span><span class="o">.</span><span class="n">summary</span><span class="p">(</span><span class="n">df</span><span class="o">.</span><span class="n">features</span><span class="p">))</span><span class="o">.</span><span class="n">show</span><span class="p">(</span><span class="n">truncate</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
<span class="go">+--------------------------------+</span>
<span class="go">|aggregate_metrics(features, 1.0)|</span>
<span class="go">+--------------------------------+</span>
<span class="go">|[[1.0,1.5,2.0], 2]              |</span>
<span class="go">+--------------------------------+</span>

<span class="gp">&gt;&gt;&gt; </span><span class="n">df</span><span class="o">.</span><span class="n">select</span><span class="p">(</span><span class="n">Summarizer</span><span class="o">.</span><span class="n">mean</span><span class="p">(</span><span class="n">df</span><span class="o">.</span><span class="n">features</span><span class="p">,</span> <span class="n">df</span><span class="o">.</span><span class="n">weight</span><span class="p">))</span><span class="o">.</span><span class="n">show</span><span class="p">(</span><span class="n">truncate</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
<span class="go">+--------------+</span>
<span class="go">|mean(features)|</span>
<span class="go">+--------------+</span>
<span class="go">|[1.0,1.0,1.0] |</span>
<span class="go">+--------------+</span>

<span class="gp">&gt;&gt;&gt; </span><span class="n">df</span><span class="o">.</span><span class="n">select</span><span class="p">(</span><span class="n">Summarizer</span><span class="o">.</span><span class="n">mean</span><span class="p">(</span><span class="n">df</span><span class="o">.</span><span class="n">features</span><span class="p">))</span><span class="o">.</span><span class="n">show</span><span class="p">(</span><span class="n">truncate</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
<span class="go">+--------------+</span>
<span class="go">|mean(features)|</span>
<span class="go">+--------------+</span>
<span class="go">|[1.0,1.5,2.0] |</span>
<span class="go">+--------------+</span>
</pre></div>
</div>
<div class="versionadded">
<p><span class="versionmodified added">New in version 2.4.0.</span></p>
</div>
<dl class="py method">
<dt id="pyspark.ml.stat.Summarizer.count">
<em class="property">static </em><code class="sig-name descname">count</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">col</span></em>, <em class="sig-param"><span class="n">weightCol</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/runawayhorse001/LearningApacheSpark/blob/master/pyspark/ml/stat.py#L262-L268"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyspark.ml.stat.Summarizer.count" title="Permalink to this definition">¶</a></dt>
<dd><p>return a column of count summary</p>
<div class="versionadded">
<p><span class="versionmodified added">New in version 2.4.0.</span></p>
</div>
</dd></dl>

<dl class="py method">
<dt id="pyspark.ml.stat.Summarizer.max">
<em class="property">static </em><code class="sig-name descname">max</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">col</span></em>, <em class="sig-param"><span class="n">weightCol</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/runawayhorse001/LearningApacheSpark/blob/master/pyspark/ml/stat.py#L278-L284"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyspark.ml.stat.Summarizer.max" title="Permalink to this definition">¶</a></dt>
<dd><p>return a column of max summary</p>
<div class="versionadded">
<p><span class="versionmodified added">New in version 2.4.0.</span></p>
</div>
</dd></dl>

<dl class="py method">
<dt id="pyspark.ml.stat.Summarizer.mean">
<em class="property">static </em><code class="sig-name descname">mean</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">col</span></em>, <em class="sig-param"><span class="n">weightCol</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/runawayhorse001/LearningApacheSpark/blob/master/pyspark/ml/stat.py#L246-L252"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyspark.ml.stat.Summarizer.mean" title="Permalink to this definition">¶</a></dt>
<dd><p>return a column of mean summary</p>
<div class="versionadded">
<p><span class="versionmodified added">New in version 2.4.0.</span></p>
</div>
</dd></dl>

<dl class="py method">
<dt id="pyspark.ml.stat.Summarizer.metrics">
<em class="property">static </em><code class="sig-name descname">metrics</code><span class="sig-paren">(</span><em class="sig-param"><span class="o">*</span><span class="n">metrics</span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/runawayhorse001/LearningApacheSpark/blob/master/pyspark/ml/stat.py#L324-L353"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyspark.ml.stat.Summarizer.metrics" title="Permalink to this definition">¶</a></dt>
<dd><p>Given a list of metrics, provides a builder that it turns computes metrics from a column.</p>
<p>See the documentation of [[Summarizer]] for an example.</p>
<dl class="simple">
<dt>The following metrics are accepted (case sensitive):</dt><dd><ul class="simple">
<li><p>mean: a vector that contains the coefficient-wise mean.</p></li>
<li><p>variance: a vector tha contains the coefficient-wise variance.</p></li>
<li><p>count: the count of all vectors seen.</p></li>
<li><p>numNonzeros: a vector with the number of non-zeros for each coefficients</p></li>
<li><p>max: the maximum for each coefficient.</p></li>
<li><p>min: the minimum for each coefficient.</p></li>
<li><p>normL2: the Euclidian norm for each coefficient.</p></li>
<li><p>normL1: the L1 norm of each coefficient (sum of the absolute values).</p></li>
</ul>
</dd>
</dl>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>metrics</strong> – metrics that can be provided.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>an object of <a class="reference internal" href="#pyspark.ml.stat.SummaryBuilder" title="pyspark.ml.stat.SummaryBuilder"><code class="xref py py-class docutils literal notranslate"><span class="pre">pyspark.ml.stat.SummaryBuilder</span></code></a></p>
</dd>
</dl>
<p>Note: Currently, the performance of this interface is about 2x~3x slower then using the RDD
interface.</p>
<div class="versionadded">
<p><span class="versionmodified added">New in version 2.4.0.</span></p>
</div>
</dd></dl>

<dl class="py method">
<dt id="pyspark.ml.stat.Summarizer.min">
<em class="property">static </em><code class="sig-name descname">min</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">col</span></em>, <em class="sig-param"><span class="n">weightCol</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/runawayhorse001/LearningApacheSpark/blob/master/pyspark/ml/stat.py#L286-L292"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyspark.ml.stat.Summarizer.min" title="Permalink to this definition">¶</a></dt>
<dd><p>return a column of min summary</p>
<div class="versionadded">
<p><span class="versionmodified added">New in version 2.4.0.</span></p>
</div>
</dd></dl>

<dl class="py method">
<dt id="pyspark.ml.stat.Summarizer.normL1">
<em class="property">static </em><code class="sig-name descname">normL1</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">col</span></em>, <em class="sig-param"><span class="n">weightCol</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/runawayhorse001/LearningApacheSpark/blob/master/pyspark/ml/stat.py#L294-L300"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyspark.ml.stat.Summarizer.normL1" title="Permalink to this definition">¶</a></dt>
<dd><p>return a column of normL1 summary</p>
<div class="versionadded">
<p><span class="versionmodified added">New in version 2.4.0.</span></p>
</div>
</dd></dl>

<dl class="py method">
<dt id="pyspark.ml.stat.Summarizer.normL2">
<em class="property">static </em><code class="sig-name descname">normL2</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">col</span></em>, <em class="sig-param"><span class="n">weightCol</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/runawayhorse001/LearningApacheSpark/blob/master/pyspark/ml/stat.py#L302-L308"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyspark.ml.stat.Summarizer.normL2" title="Permalink to this definition">¶</a></dt>
<dd><p>return a column of normL2 summary</p>
<div class="versionadded">
<p><span class="versionmodified added">New in version 2.4.0.</span></p>
</div>
</dd></dl>

<dl class="py method">
<dt id="pyspark.ml.stat.Summarizer.numNonZeros">
<em class="property">static </em><code class="sig-name descname">numNonZeros</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">col</span></em>, <em class="sig-param"><span class="n">weightCol</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/runawayhorse001/LearningApacheSpark/blob/master/pyspark/ml/stat.py#L270-L276"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyspark.ml.stat.Summarizer.numNonZeros" title="Permalink to this definition">¶</a></dt>
<dd><p>return a column of numNonZero summary</p>
<div class="versionadded">
<p><span class="versionmodified added">New in version 2.4.0.</span></p>
</div>
</dd></dl>

<dl class="py method">
<dt id="pyspark.ml.stat.Summarizer.variance">
<em class="property">static </em><code class="sig-name descname">variance</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">col</span></em>, <em class="sig-param"><span class="n">weightCol</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/runawayhorse001/LearningApacheSpark/blob/master/pyspark/ml/stat.py#L254-L260"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyspark.ml.stat.Summarizer.variance" title="Permalink to this definition">¶</a></dt>
<dd><p>return a column of variance summary</p>
<div class="versionadded">
<p><span class="versionmodified added">New in version 2.4.0.</span></p>
</div>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt id="pyspark.ml.stat.SummaryBuilder">
<em class="property">class </em><code class="sig-prename descclassname">pyspark.ml.stat.</code><code class="sig-name descname">SummaryBuilder</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">jSummaryBuilder</span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/runawayhorse001/LearningApacheSpark/blob/master/pyspark/ml/stat.py#L356-L386"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyspark.ml.stat.SummaryBuilder" title="Permalink to this definition">¶</a></dt>
<dd><div class="admonition note">
<p class="admonition-title">Note</p>
<p>Experimental</p>
</div>
<p>A builder object that provides summary statistics about a given column.</p>
<p>Users should not directly create such builders, but instead use one of the methods in
<a class="reference internal" href="#pyspark.ml.stat.Summarizer" title="pyspark.ml.stat.Summarizer"><code class="xref py py-class docutils literal notranslate"><span class="pre">pyspark.ml.stat.Summarizer</span></code></a></p>
<div class="versionadded">
<p><span class="versionmodified added">New in version 2.4.0.</span></p>
</div>
<dl class="py method">
<dt id="pyspark.ml.stat.SummaryBuilder.summary">
<code class="sig-name descname">summary</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">featuresCol</span></em>, <em class="sig-param"><span class="n">weightCol</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/runawayhorse001/LearningApacheSpark/blob/master/pyspark/ml/stat.py#L371-L386"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyspark.ml.stat.SummaryBuilder.summary" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns an aggregate object that contains the summary of the column with the requested
metrics.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>featuresCol</strong> – a column that contains features Vector object.</p></li>
<li><p><strong>weightCol</strong> – a column that contains weight value. Default weight is 1.0.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>an aggregate column that contains the statistics. The exact content of this
structure is determined during the creation of the builder.</p>
</dd>
</dl>
<div class="versionadded">
<p><span class="versionmodified added">New in version 2.4.0.</span></p>
</div>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="module-pyspark.ml.regression">
<span id="regression-api"></span><h2><span class="section-number">27.2. </span>Regression API<a class="headerlink" href="#module-pyspark.ml.regression" title="Permalink to this headline">¶</a></h2>
<dl class="py class">
<dt id="pyspark.ml.regression.AFTSurvivalRegression">
<em class="property">class </em><code class="sig-prename descclassname">pyspark.ml.regression.</code><code class="sig-name descname">AFTSurvivalRegression</code><span class="sig-paren">(</span><em class="sig-param"><span class="o">*</span><span class="n">args</span></em>, <em class="sig-param"><span class="o">**</span><span class="n">kwargs</span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/runawayhorse001/LearningApacheSpark/blob/master/pyspark/ml/regression.py#L1205-L1346"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyspark.ml.regression.AFTSurvivalRegression" title="Permalink to this definition">¶</a></dt>
<dd><div class="admonition note">
<p class="admonition-title">Note</p>
<p>Experimental</p>
</div>
<p>Accelerated Failure Time (AFT) Model Survival Regression</p>
<p>Fit a parametric AFT survival regression model based on the Weibull distribution
of the survival time.</p>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference external" href="https://en.wikipedia.org/wiki/Accelerated_failure_time_model">AFT Model</a></p>
</div>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">pyspark.ml.linalg</span> <span class="kn">import</span> <span class="n">Vectors</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">df</span> <span class="o">=</span> <span class="n">spark</span><span class="o">.</span><span class="n">createDataFrame</span><span class="p">([</span>
<span class="gp">... </span>    <span class="p">(</span><span class="mf">1.0</span><span class="p">,</span> <span class="n">Vectors</span><span class="o">.</span><span class="n">dense</span><span class="p">(</span><span class="mf">1.0</span><span class="p">),</span> <span class="mf">1.0</span><span class="p">),</span>
<span class="gp">... </span>    <span class="p">(</span><span class="mf">1e-40</span><span class="p">,</span> <span class="n">Vectors</span><span class="o">.</span><span class="n">sparse</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="p">[],</span> <span class="p">[]),</span> <span class="mf">0.0</span><span class="p">)],</span> <span class="p">[</span><span class="s2">&quot;label&quot;</span><span class="p">,</span> <span class="s2">&quot;features&quot;</span><span class="p">,</span> <span class="s2">&quot;censor&quot;</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">aftsr</span> <span class="o">=</span> <span class="n">AFTSurvivalRegression</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">model</span> <span class="o">=</span> <span class="n">aftsr</span><span class="o">.</span><span class="n">fit</span><span class="p">(</span><span class="n">df</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">model</span><span class="o">.</span><span class="n">predict</span><span class="p">(</span><span class="n">Vectors</span><span class="o">.</span><span class="n">dense</span><span class="p">(</span><span class="mf">6.3</span><span class="p">))</span>
<span class="go">1.0</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">model</span><span class="o">.</span><span class="n">predictQuantiles</span><span class="p">(</span><span class="n">Vectors</span><span class="o">.</span><span class="n">dense</span><span class="p">(</span><span class="mf">6.3</span><span class="p">))</span>
<span class="go">DenseVector([0.0101, 0.0513, 0.1054, 0.2877, 0.6931, 1.3863, 2.3026, 2.9957, 4.6052])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">model</span><span class="o">.</span><span class="n">transform</span><span class="p">(</span><span class="n">df</span><span class="p">)</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
<span class="go">+-------+---------+------+----------+</span>
<span class="go">|  label| features|censor|prediction|</span>
<span class="go">+-------+---------+------+----------+</span>
<span class="go">|    1.0|    [1.0]|   1.0|       1.0|</span>
<span class="go">|1.0E-40|(1,[],[])|   0.0|       1.0|</span>
<span class="go">+-------+---------+------+----------+</span>
<span class="gp">...</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">aftsr_path</span> <span class="o">=</span> <span class="n">temp_path</span> <span class="o">+</span> <span class="s2">&quot;/aftsr&quot;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">aftsr</span><span class="o">.</span><span class="n">save</span><span class="p">(</span><span class="n">aftsr_path</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">aftsr2</span> <span class="o">=</span> <span class="n">AFTSurvivalRegression</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="n">aftsr_path</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">aftsr2</span><span class="o">.</span><span class="n">getMaxIter</span><span class="p">()</span>
<span class="go">100</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">model_path</span> <span class="o">=</span> <span class="n">temp_path</span> <span class="o">+</span> <span class="s2">&quot;/aftsr_model&quot;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">model</span><span class="o">.</span><span class="n">save</span><span class="p">(</span><span class="n">model_path</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">model2</span> <span class="o">=</span> <span class="n">AFTSurvivalRegressionModel</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="n">model_path</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">model</span><span class="o">.</span><span class="n">coefficients</span> <span class="o">==</span> <span class="n">model2</span><span class="o">.</span><span class="n">coefficients</span>
<span class="go">True</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">model</span><span class="o">.</span><span class="n">intercept</span> <span class="o">==</span> <span class="n">model2</span><span class="o">.</span><span class="n">intercept</span>
<span class="go">True</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">model</span><span class="o">.</span><span class="n">scale</span> <span class="o">==</span> <span class="n">model2</span><span class="o">.</span><span class="n">scale</span>
<span class="go">True</span>
</pre></div>
</div>
<div class="versionadded">
<p><span class="versionmodified added">New in version 1.6.0.</span></p>
</div>
<dl class="py method">
<dt id="pyspark.ml.regression.AFTSurvivalRegression.getCensorCol">
<code class="sig-name descname">getCensorCol</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference external" href="https://github.com/runawayhorse001/LearningApacheSpark/blob/master/pyspark/ml/regression.py#L1313-L1318"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyspark.ml.regression.AFTSurvivalRegression.getCensorCol" title="Permalink to this definition">¶</a></dt>
<dd><p>Gets the value of censorCol or its default value.</p>
<div class="versionadded">
<p><span class="versionmodified added">New in version 1.6.0.</span></p>
</div>
</dd></dl>

<dl class="py method">
<dt id="pyspark.ml.regression.AFTSurvivalRegression.getQuantileProbabilities">
<code class="sig-name descname">getQuantileProbabilities</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference external" href="https://github.com/runawayhorse001/LearningApacheSpark/blob/master/pyspark/ml/regression.py#L1327-L1332"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyspark.ml.regression.AFTSurvivalRegression.getQuantileProbabilities" title="Permalink to this definition">¶</a></dt>
<dd><p>Gets the value of quantileProbabilities or its default value.</p>
<div class="versionadded">
<p><span class="versionmodified added">New in version 1.6.0.</span></p>
</div>
</dd></dl>

<dl class="py method">
<dt id="pyspark.ml.regression.AFTSurvivalRegression.getQuantilesCol">
<code class="sig-name descname">getQuantilesCol</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference external" href="https://github.com/runawayhorse001/LearningApacheSpark/blob/master/pyspark/ml/regression.py#L1341-L1346"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyspark.ml.regression.AFTSurvivalRegression.getQuantilesCol" title="Permalink to this definition">¶</a></dt>
<dd><p>Gets the value of quantilesCol or its default value.</p>
<div class="versionadded">
<p><span class="versionmodified added">New in version 1.6.0.</span></p>
</div>
</dd></dl>

<dl class="py method">
<dt id="pyspark.ml.regression.AFTSurvivalRegression.setCensorCol">
<code class="sig-name descname">setCensorCol</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">value</span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/runawayhorse001/LearningApacheSpark/blob/master/pyspark/ml/regression.py#L1306-L1311"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyspark.ml.regression.AFTSurvivalRegression.setCensorCol" title="Permalink to this definition">¶</a></dt>
<dd><p>Sets the value of <code class="xref py py-attr docutils literal notranslate"><span class="pre">censorCol</span></code>.</p>
<div class="versionadded">
<p><span class="versionmodified added">New in version 1.6.0.</span></p>
</div>
</dd></dl>

<dl class="py method">
<dt id="pyspark.ml.regression.AFTSurvivalRegression.setParams">
<code class="sig-name descname">setParams</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">featuresCol</span><span class="o">=</span><span class="default_value">'features'</span></em>, <em class="sig-param"><span class="n">labelCol</span><span class="o">=</span><span class="default_value">'label'</span></em>, <em class="sig-param"><span class="n">predictionCol</span><span class="o">=</span><span class="default_value">'prediction'</span></em>, <em class="sig-param"><span class="n">fitIntercept</span><span class="o">=</span><span class="default_value">True</span></em>, <em class="sig-param"><span class="n">maxIter</span><span class="o">=</span><span class="default_value">100</span></em>, <em class="sig-param"><span class="n">tol</span><span class="o">=</span><span class="default_value">1e-06</span></em>, <em class="sig-param"><span class="n">censorCol</span><span class="o">=</span><span class="default_value">'censor'</span></em>, <em class="sig-param"><span class="n">quantileProbabilities</span><span class="o">=</span><span class="default_value">[0.01, 0.05, 0.1, 0.25, 0.5, 0.75, 0.9, 0.95, 0.99]</span></em>, <em class="sig-param"><span class="n">quantilesCol</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">aggregationDepth</span><span class="o">=</span><span class="default_value">2</span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/runawayhorse001/LearningApacheSpark/blob/master/pyspark/__init__.py#L1288-L1301"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyspark.ml.regression.AFTSurvivalRegression.setParams" title="Permalink to this definition">¶</a></dt>
<dd><p>setParams(self, featuresCol=”features”, labelCol=”label”, predictionCol=”prediction”,                   fitIntercept=True, maxIter=100, tol=1E-6, censorCol=”censor”,                   quantileProbabilities=[0.01, 0.05, 0.1, 0.25, 0.5, 0.75, 0.9, 0.95, 0.99],                   quantilesCol=None, aggregationDepth=2):</p>
<div class="versionadded">
<p><span class="versionmodified added">New in version 1.6.0.</span></p>
</div>
</dd></dl>

<dl class="py method">
<dt id="pyspark.ml.regression.AFTSurvivalRegression.setQuantileProbabilities">
<code class="sig-name descname">setQuantileProbabilities</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">value</span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/runawayhorse001/LearningApacheSpark/blob/master/pyspark/ml/regression.py#L1320-L1325"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyspark.ml.regression.AFTSurvivalRegression.setQuantileProbabilities" title="Permalink to this definition">¶</a></dt>
<dd><p>Sets the value of <code class="xref py py-attr docutils literal notranslate"><span class="pre">quantileProbabilities</span></code>.</p>
<div class="versionadded">
<p><span class="versionmodified added">New in version 1.6.0.</span></p>
</div>
</dd></dl>

<dl class="py method">
<dt id="pyspark.ml.regression.AFTSurvivalRegression.setQuantilesCol">
<code class="sig-name descname">setQuantilesCol</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">value</span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/runawayhorse001/LearningApacheSpark/blob/master/pyspark/ml/regression.py#L1334-L1339"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyspark.ml.regression.AFTSurvivalRegression.setQuantilesCol" title="Permalink to this definition">¶</a></dt>
<dd><p>Sets the value of <code class="xref py py-attr docutils literal notranslate"><span class="pre">quantilesCol</span></code>.</p>
<div class="versionadded">
<p><span class="versionmodified added">New in version 1.6.0.</span></p>
</div>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt id="pyspark.ml.regression.AFTSurvivalRegressionModel">
<em class="property">class </em><code class="sig-prename descclassname">pyspark.ml.regression.</code><code class="sig-name descname">AFTSurvivalRegressionModel</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">java_model</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/runawayhorse001/LearningApacheSpark/blob/master/pyspark/ml/regression.py#L1349-L1394"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyspark.ml.regression.AFTSurvivalRegressionModel" title="Permalink to this definition">¶</a></dt>
<dd><div class="admonition note">
<p class="admonition-title">Note</p>
<p>Experimental</p>
</div>
<p>Model fitted by <a class="reference internal" href="#pyspark.ml.regression.AFTSurvivalRegression" title="pyspark.ml.regression.AFTSurvivalRegression"><code class="xref py py-class docutils literal notranslate"><span class="pre">AFTSurvivalRegression</span></code></a>.</p>
<div class="versionadded">
<p><span class="versionmodified added">New in version 1.6.0.</span></p>
</div>
<dl class="py method">
<dt id="pyspark.ml.regression.AFTSurvivalRegressionModel.coefficients">
<em class="property">property </em><code class="sig-name descname">coefficients</code><a class="reference external" href="https://github.com/runawayhorse001/LearningApacheSpark/blob/master/pyspark/ml/regression.py"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyspark.ml.regression.AFTSurvivalRegressionModel.coefficients" title="Permalink to this definition">¶</a></dt>
<dd><p>Model coefficients.</p>
<div class="versionadded">
<p><span class="versionmodified added">New in version 2.0.0.</span></p>
</div>
</dd></dl>

<dl class="py method">
<dt id="pyspark.ml.regression.AFTSurvivalRegressionModel.intercept">
<em class="property">property </em><code class="sig-name descname">intercept</code><a class="reference external" href="https://github.com/runawayhorse001/LearningApacheSpark/blob/master/pyspark/ml/regression.py"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyspark.ml.regression.AFTSurvivalRegressionModel.intercept" title="Permalink to this definition">¶</a></dt>
<dd><p>Model intercept.</p>
<div class="versionadded">
<p><span class="versionmodified added">New in version 1.6.0.</span></p>
</div>
</dd></dl>

<dl class="py method">
<dt id="pyspark.ml.regression.AFTSurvivalRegressionModel.predict">
<code class="sig-name descname">predict</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">features</span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/runawayhorse001/LearningApacheSpark/blob/master/pyspark/ml/regression.py#L1389-L1394"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyspark.ml.regression.AFTSurvivalRegressionModel.predict" title="Permalink to this definition">¶</a></dt>
<dd><p>Predicted value</p>
<div class="versionadded">
<p><span class="versionmodified added">New in version 2.0.0.</span></p>
</div>
</dd></dl>

<dl class="py method">
<dt id="pyspark.ml.regression.AFTSurvivalRegressionModel.predictQuantiles">
<code class="sig-name descname">predictQuantiles</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">features</span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/runawayhorse001/LearningApacheSpark/blob/master/pyspark/ml/regression.py#L1382-L1387"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyspark.ml.regression.AFTSurvivalRegressionModel.predictQuantiles" title="Permalink to this definition">¶</a></dt>
<dd><p>Predicted Quantiles</p>
<div class="versionadded">
<p><span class="versionmodified added">New in version 2.0.0.</span></p>
</div>
</dd></dl>

<dl class="py method">
<dt id="pyspark.ml.regression.AFTSurvivalRegressionModel.scale">
<em class="property">property </em><code class="sig-name descname">scale</code><a class="reference external" href="https://github.com/runawayhorse001/LearningApacheSpark/blob/master/pyspark/ml/regression.py"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyspark.ml.regression.AFTSurvivalRegressionModel.scale" title="Permalink to this definition">¶</a></dt>
<dd><p>Model scale parameter.</p>
<div class="versionadded">
<p><span class="versionmodified added">New in version 1.6.0.</span></p>
</div>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt id="pyspark.ml.regression.DecisionTreeRegressionModel">
<em class="property">class </em><code class="sig-prename descclassname">pyspark.ml.regression.</code><code class="sig-name descname">DecisionTreeRegressionModel</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">java_model</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/runawayhorse001/LearningApacheSpark/blob/master/pyspark/ml/regression.py#L875-L901"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyspark.ml.regression.DecisionTreeRegressionModel" title="Permalink to this definition">¶</a></dt>
<dd><p>Model fitted by <a class="reference internal" href="#pyspark.ml.regression.DecisionTreeRegressor" title="pyspark.ml.regression.DecisionTreeRegressor"><code class="xref py py-class docutils literal notranslate"><span class="pre">DecisionTreeRegressor</span></code></a>.</p>
<div class="versionadded">
<p><span class="versionmodified added">New in version 1.4.0.</span></p>
</div>
<dl class="py method">
<dt id="pyspark.ml.regression.DecisionTreeRegressionModel.featureImportances">
<em class="property">property </em><code class="sig-name descname">featureImportances</code><a class="reference external" href="https://github.com/runawayhorse001/LearningApacheSpark/blob/master/pyspark/ml/regression.py"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyspark.ml.regression.DecisionTreeRegressionModel.featureImportances" title="Permalink to this definition">¶</a></dt>
<dd><p>Estimate of the importance of each feature.</p>
<p>This generalizes the idea of “Gini” importance to other losses,
following the explanation of Gini importance from “Random Forests” documentation
by Leo Breiman and Adele Cutler, and following the implementation from scikit-learn.</p>
<dl class="simple">
<dt>This feature importance is calculated as follows:</dt><dd><ul class="simple">
<li><p>importance(feature j) = sum (over nodes which split on feature j) of the gain,
where gain is scaled by the number of instances passing through node</p></li>
<li><p>Normalize importances for tree to sum to 1.</p></li>
</ul>
</dd>
</dl>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Feature importance for single decision trees can have high variance due to
correlated predictor variables. Consider using a <a class="reference internal" href="#pyspark.ml.regression.RandomForestRegressor" title="pyspark.ml.regression.RandomForestRegressor"><code class="xref py py-class docutils literal notranslate"><span class="pre">RandomForestRegressor</span></code></a>
to determine feature importance instead.</p>
</div>
<div class="versionadded">
<p><span class="versionmodified added">New in version 2.0.0.</span></p>
</div>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt id="pyspark.ml.regression.DecisionTreeRegressor">
<em class="property">class </em><code class="sig-prename descclassname">pyspark.ml.regression.</code><code class="sig-name descname">DecisionTreeRegressor</code><span class="sig-paren">(</span><em class="sig-param"><span class="o">*</span><span class="n">args</span></em>, <em class="sig-param"><span class="o">**</span><span class="n">kwargs</span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/runawayhorse001/LearningApacheSpark/blob/master/pyspark/ml/regression.py#L716-L799"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyspark.ml.regression.DecisionTreeRegressor" title="Permalink to this definition">¶</a></dt>
<dd><p><a class="reference external" href="http://en.wikipedia.org/wiki/Decision_tree_learning">Decision tree</a>
learning algorithm for regression.
It supports both continuous and categorical features.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">pyspark.ml.linalg</span> <span class="kn">import</span> <span class="n">Vectors</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">df</span> <span class="o">=</span> <span class="n">spark</span><span class="o">.</span><span class="n">createDataFrame</span><span class="p">([</span>
<span class="gp">... </span>    <span class="p">(</span><span class="mf">1.0</span><span class="p">,</span> <span class="n">Vectors</span><span class="o">.</span><span class="n">dense</span><span class="p">(</span><span class="mf">1.0</span><span class="p">)),</span>
<span class="gp">... </span>    <span class="p">(</span><span class="mf">0.0</span><span class="p">,</span> <span class="n">Vectors</span><span class="o">.</span><span class="n">sparse</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="p">[],</span> <span class="p">[]))],</span> <span class="p">[</span><span class="s2">&quot;label&quot;</span><span class="p">,</span> <span class="s2">&quot;features&quot;</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">dt</span> <span class="o">=</span> <span class="n">DecisionTreeRegressor</span><span class="p">(</span><span class="n">maxDepth</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">varianceCol</span><span class="o">=</span><span class="s2">&quot;variance&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">model</span> <span class="o">=</span> <span class="n">dt</span><span class="o">.</span><span class="n">fit</span><span class="p">(</span><span class="n">df</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">model</span><span class="o">.</span><span class="n">depth</span>
<span class="go">1</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">model</span><span class="o">.</span><span class="n">numNodes</span>
<span class="go">3</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">model</span><span class="o">.</span><span class="n">featureImportances</span>
<span class="go">SparseVector(1, {0: 1.0})</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">model</span><span class="o">.</span><span class="n">numFeatures</span>
<span class="go">1</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">test0</span> <span class="o">=</span> <span class="n">spark</span><span class="o">.</span><span class="n">createDataFrame</span><span class="p">([(</span><span class="n">Vectors</span><span class="o">.</span><span class="n">dense</span><span class="p">(</span><span class="o">-</span><span class="mf">1.0</span><span class="p">),)],</span> <span class="p">[</span><span class="s2">&quot;features&quot;</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">model</span><span class="o">.</span><span class="n">transform</span><span class="p">(</span><span class="n">test0</span><span class="p">)</span><span class="o">.</span><span class="n">head</span><span class="p">()</span><span class="o">.</span><span class="n">prediction</span>
<span class="go">0.0</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">test1</span> <span class="o">=</span> <span class="n">spark</span><span class="o">.</span><span class="n">createDataFrame</span><span class="p">([(</span><span class="n">Vectors</span><span class="o">.</span><span class="n">sparse</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="p">[</span><span class="mf">1.0</span><span class="p">]),)],</span> <span class="p">[</span><span class="s2">&quot;features&quot;</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">model</span><span class="o">.</span><span class="n">transform</span><span class="p">(</span><span class="n">test1</span><span class="p">)</span><span class="o">.</span><span class="n">head</span><span class="p">()</span><span class="o">.</span><span class="n">prediction</span>
<span class="go">1.0</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">dtr_path</span> <span class="o">=</span> <span class="n">temp_path</span> <span class="o">+</span> <span class="s2">&quot;/dtr&quot;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">dt</span><span class="o">.</span><span class="n">save</span><span class="p">(</span><span class="n">dtr_path</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">dt2</span> <span class="o">=</span> <span class="n">DecisionTreeRegressor</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="n">dtr_path</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">dt2</span><span class="o">.</span><span class="n">getMaxDepth</span><span class="p">()</span>
<span class="go">2</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">model_path</span> <span class="o">=</span> <span class="n">temp_path</span> <span class="o">+</span> <span class="s2">&quot;/dtr_model&quot;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">model</span><span class="o">.</span><span class="n">save</span><span class="p">(</span><span class="n">model_path</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">model2</span> <span class="o">=</span> <span class="n">DecisionTreeRegressionModel</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="n">model_path</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">model</span><span class="o">.</span><span class="n">numNodes</span> <span class="o">==</span> <span class="n">model2</span><span class="o">.</span><span class="n">numNodes</span>
<span class="go">True</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">model</span><span class="o">.</span><span class="n">depth</span> <span class="o">==</span> <span class="n">model2</span><span class="o">.</span><span class="n">depth</span>
<span class="go">True</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">model</span><span class="o">.</span><span class="n">transform</span><span class="p">(</span><span class="n">test1</span><span class="p">)</span><span class="o">.</span><span class="n">head</span><span class="p">()</span><span class="o">.</span><span class="n">variance</span>
<span class="go">0.0</span>
</pre></div>
</div>
<div class="versionadded">
<p><span class="versionmodified added">New in version 1.4.0.</span></p>
</div>
<dl class="py method">
<dt id="pyspark.ml.regression.DecisionTreeRegressor.setParams">
<code class="sig-name descname">setParams</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">self</span></em>, <em class="sig-param"><span class="n">featuresCol</span><span class="o">=</span><span class="default_value">'features'</span></em>, <em class="sig-param"><span class="n">labelCol</span><span class="o">=</span><span class="default_value">'label'</span></em>, <em class="sig-param"><span class="n">predictionCol</span><span class="o">=</span><span class="default_value">'prediction'</span></em>, <em class="sig-param"><span class="n">maxDepth</span><span class="o">=</span><span class="default_value">5</span></em>, <em class="sig-param"><span class="n">maxBins</span><span class="o">=</span><span class="default_value">32</span></em>, <em class="sig-param"><span class="n">minInstancesPerNode</span><span class="o">=</span><span class="default_value">1</span></em>, <em class="sig-param"><span class="n">minInfoGain</span><span class="o">=</span><span class="default_value">0.0</span></em>, <em class="sig-param"><span class="n">maxMemoryInMB</span><span class="o">=</span><span class="default_value">256</span></em>, <em class="sig-param"><span class="n">cacheNodeIds</span><span class="o">=</span><span class="default_value">False</span></em>, <em class="sig-param"><span class="n">checkpointInterval</span><span class="o">=</span><span class="default_value">10</span></em>, <em class="sig-param"><span class="n">impurity</span><span class="o">=</span><span class="default_value">'variance'</span></em>, <em class="sig-param"><span class="n">seed</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">varianceCol</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/runawayhorse001/LearningApacheSpark/blob/master/pyspark/__init__.py#L782-L796"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyspark.ml.regression.DecisionTreeRegressor.setParams" title="Permalink to this definition">¶</a></dt>
<dd><p>Sets params for the DecisionTreeRegressor.</p>
<div class="versionadded">
<p><span class="versionmodified added">New in version 1.4.0.</span></p>
</div>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt id="pyspark.ml.regression.GBTRegressionModel">
<em class="property">class </em><code class="sig-prename descclassname">pyspark.ml.regression.</code><code class="sig-name descname">GBTRegressionModel</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">java_model</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/runawayhorse001/LearningApacheSpark/blob/master/pyspark/ml/regression.py#L1161-L1201"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyspark.ml.regression.GBTRegressionModel" title="Permalink to this definition">¶</a></dt>
<dd><p>Model fitted by <a class="reference internal" href="#pyspark.ml.regression.GBTRegressor" title="pyspark.ml.regression.GBTRegressor"><code class="xref py py-class docutils literal notranslate"><span class="pre">GBTRegressor</span></code></a>.</p>
<div class="versionadded">
<p><span class="versionmodified added">New in version 1.4.0.</span></p>
</div>
<dl class="py method">
<dt id="pyspark.ml.regression.GBTRegressionModel.evaluateEachIteration">
<code class="sig-name descname">evaluateEachIteration</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">dataset</span></em>, <em class="sig-param"><span class="n">loss</span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/runawayhorse001/LearningApacheSpark/blob/master/pyspark/ml/regression.py#L1189-L1201"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyspark.ml.regression.GBTRegressionModel.evaluateEachIteration" title="Permalink to this definition">¶</a></dt>
<dd><p>Method to compute error or loss for every iteration of gradient boosting.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>dataset</strong> – Test dataset to evaluate model on, where dataset is an
instance of <code class="xref py py-class docutils literal notranslate"><span class="pre">pyspark.sql.DataFrame</span></code></p></li>
<li><p><strong>loss</strong> – The loss function used to compute error.
Supported options: squared, absolute</p></li>
</ul>
</dd>
</dl>
<div class="versionadded">
<p><span class="versionmodified added">New in version 2.4.0.</span></p>
</div>
</dd></dl>

<dl class="py method">
<dt id="pyspark.ml.regression.GBTRegressionModel.featureImportances">
<em class="property">property </em><code class="sig-name descname">featureImportances</code><a class="reference external" href="https://github.com/runawayhorse001/LearningApacheSpark/blob/master/pyspark/ml/regression.py"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyspark.ml.regression.GBTRegressionModel.featureImportances" title="Permalink to this definition">¶</a></dt>
<dd><p>Estimate of the importance of each feature.</p>
<p>Each feature’s importance is the average of its importance across all trees in the ensemble
The importance vector is normalized to sum to 1. This method is suggested by Hastie et al.
(Hastie, Tibshirani, Friedman. “The Elements of Statistical Learning, 2nd Edition.” 2001.)
and follows the implementation from scikit-learn.</p>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference internal" href="#pyspark.ml.regression.DecisionTreeRegressionModel.featureImportances" title="pyspark.ml.regression.DecisionTreeRegressionModel.featureImportances"><code class="xref py py-attr docutils literal notranslate"><span class="pre">DecisionTreeRegressionModel.featureImportances</span></code></a></p>
</div>
<div class="versionadded">
<p><span class="versionmodified added">New in version 2.0.0.</span></p>
</div>
</dd></dl>

<dl class="py method">
<dt id="pyspark.ml.regression.GBTRegressionModel.trees">
<em class="property">property </em><code class="sig-name descname">trees</code><a class="reference external" href="https://github.com/runawayhorse001/LearningApacheSpark/blob/master/pyspark/ml/regression.py"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyspark.ml.regression.GBTRegressionModel.trees" title="Permalink to this definition">¶</a></dt>
<dd><p>These have null parent Estimators.</p>
<div class="versionadded">
<p><span class="versionmodified added">New in version 2.0.0.</span></p>
</div>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p>Trees in this ensemble. Warning</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt id="pyspark.ml.regression.GBTRegressor">
<em class="property">class </em><code class="sig-prename descclassname">pyspark.ml.regression.</code><code class="sig-name descname">GBTRegressor</code><span class="sig-paren">(</span><em class="sig-param"><span class="o">*</span><span class="n">args</span></em>, <em class="sig-param"><span class="o">**</span><span class="n">kwargs</span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/runawayhorse001/LearningApacheSpark/blob/master/pyspark/ml/regression.py#L1033-L1158"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyspark.ml.regression.GBTRegressor" title="Permalink to this definition">¶</a></dt>
<dd><p><a class="reference external" href="http://en.wikipedia.org/wiki/Gradient_boosting">Gradient-Boosted Trees (GBTs)</a>
learning algorithm for regression.
It supports both continuous and categorical features.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">numpy</span> <span class="kn">import</span> <span class="n">allclose</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">pyspark.ml.linalg</span> <span class="kn">import</span> <span class="n">Vectors</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">df</span> <span class="o">=</span> <span class="n">spark</span><span class="o">.</span><span class="n">createDataFrame</span><span class="p">([</span>
<span class="gp">... </span>    <span class="p">(</span><span class="mf">1.0</span><span class="p">,</span> <span class="n">Vectors</span><span class="o">.</span><span class="n">dense</span><span class="p">(</span><span class="mf">1.0</span><span class="p">)),</span>
<span class="gp">... </span>    <span class="p">(</span><span class="mf">0.0</span><span class="p">,</span> <span class="n">Vectors</span><span class="o">.</span><span class="n">sparse</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="p">[],</span> <span class="p">[]))],</span> <span class="p">[</span><span class="s2">&quot;label&quot;</span><span class="p">,</span> <span class="s2">&quot;features&quot;</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">gbt</span> <span class="o">=</span> <span class="n">GBTRegressor</span><span class="p">(</span><span class="n">maxIter</span><span class="o">=</span><span class="mi">5</span><span class="p">,</span> <span class="n">maxDepth</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">seed</span><span class="o">=</span><span class="mi">42</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">gbt</span><span class="o">.</span><span class="n">getImpurity</span><span class="p">())</span>
<span class="go">variance</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">gbt</span><span class="o">.</span><span class="n">getFeatureSubsetStrategy</span><span class="p">())</span>
<span class="go">all</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">model</span> <span class="o">=</span> <span class="n">gbt</span><span class="o">.</span><span class="n">fit</span><span class="p">(</span><span class="n">df</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">model</span><span class="o">.</span><span class="n">featureImportances</span>
<span class="go">SparseVector(1, {0: 1.0})</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">model</span><span class="o">.</span><span class="n">numFeatures</span>
<span class="go">1</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">allclose</span><span class="p">(</span><span class="n">model</span><span class="o">.</span><span class="n">treeWeights</span><span class="p">,</span> <span class="p">[</span><span class="mf">1.0</span><span class="p">,</span> <span class="mf">0.1</span><span class="p">,</span> <span class="mf">0.1</span><span class="p">,</span> <span class="mf">0.1</span><span class="p">,</span> <span class="mf">0.1</span><span class="p">])</span>
<span class="go">True</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">test0</span> <span class="o">=</span> <span class="n">spark</span><span class="o">.</span><span class="n">createDataFrame</span><span class="p">([(</span><span class="n">Vectors</span><span class="o">.</span><span class="n">dense</span><span class="p">(</span><span class="o">-</span><span class="mf">1.0</span><span class="p">),)],</span> <span class="p">[</span><span class="s2">&quot;features&quot;</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">model</span><span class="o">.</span><span class="n">transform</span><span class="p">(</span><span class="n">test0</span><span class="p">)</span><span class="o">.</span><span class="n">head</span><span class="p">()</span><span class="o">.</span><span class="n">prediction</span>
<span class="go">0.0</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">test1</span> <span class="o">=</span> <span class="n">spark</span><span class="o">.</span><span class="n">createDataFrame</span><span class="p">([(</span><span class="n">Vectors</span><span class="o">.</span><span class="n">sparse</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="p">[</span><span class="mf">1.0</span><span class="p">]),)],</span> <span class="p">[</span><span class="s2">&quot;features&quot;</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">model</span><span class="o">.</span><span class="n">transform</span><span class="p">(</span><span class="n">test1</span><span class="p">)</span><span class="o">.</span><span class="n">head</span><span class="p">()</span><span class="o">.</span><span class="n">prediction</span>
<span class="go">1.0</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">gbtr_path</span> <span class="o">=</span> <span class="n">temp_path</span> <span class="o">+</span> <span class="s2">&quot;gbtr&quot;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">gbt</span><span class="o">.</span><span class="n">save</span><span class="p">(</span><span class="n">gbtr_path</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">gbt2</span> <span class="o">=</span> <span class="n">GBTRegressor</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="n">gbtr_path</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">gbt2</span><span class="o">.</span><span class="n">getMaxDepth</span><span class="p">()</span>
<span class="go">2</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">model_path</span> <span class="o">=</span> <span class="n">temp_path</span> <span class="o">+</span> <span class="s2">&quot;gbtr_model&quot;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">model</span><span class="o">.</span><span class="n">save</span><span class="p">(</span><span class="n">model_path</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">model2</span> <span class="o">=</span> <span class="n">GBTRegressionModel</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="n">model_path</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">model</span><span class="o">.</span><span class="n">featureImportances</span> <span class="o">==</span> <span class="n">model2</span><span class="o">.</span><span class="n">featureImportances</span>
<span class="go">True</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">model</span><span class="o">.</span><span class="n">treeWeights</span> <span class="o">==</span> <span class="n">model2</span><span class="o">.</span><span class="n">treeWeights</span>
<span class="go">True</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">model</span><span class="o">.</span><span class="n">trees</span>
<span class="go">[DecisionTreeRegressionModel (uid=...) of depth..., DecisionTreeRegressionModel...]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">validation</span> <span class="o">=</span> <span class="n">spark</span><span class="o">.</span><span class="n">createDataFrame</span><span class="p">([(</span><span class="mf">0.0</span><span class="p">,</span> <span class="n">Vectors</span><span class="o">.</span><span class="n">dense</span><span class="p">(</span><span class="o">-</span><span class="mf">1.0</span><span class="p">))],</span>
<span class="gp">... </span>             <span class="p">[</span><span class="s2">&quot;label&quot;</span><span class="p">,</span> <span class="s2">&quot;features&quot;</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">model</span><span class="o">.</span><span class="n">evaluateEachIteration</span><span class="p">(</span><span class="n">validation</span><span class="p">,</span> <span class="s2">&quot;squared&quot;</span><span class="p">)</span>
<span class="go">[0.0, 0.0, 0.0, 0.0, 0.0]</span>
</pre></div>
</div>
<div class="versionadded">
<p><span class="versionmodified added">New in version 1.4.0.</span></p>
</div>
<dl class="py method">
<dt id="pyspark.ml.regression.GBTRegressor.getLossType">
<code class="sig-name descname">getLossType</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference external" href="https://github.com/runawayhorse001/LearningApacheSpark/blob/master/pyspark/ml/regression.py#L1146-L1151"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyspark.ml.regression.GBTRegressor.getLossType" title="Permalink to this definition">¶</a></dt>
<dd><p>Gets the value of lossType or its default value.</p>
<div class="versionadded">
<p><span class="versionmodified added">New in version 1.4.0.</span></p>
</div>
</dd></dl>

<dl class="py method">
<dt id="pyspark.ml.regression.GBTRegressor.setFeatureSubsetStrategy">
<code class="sig-name descname">setFeatureSubsetStrategy</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">value</span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/runawayhorse001/LearningApacheSpark/blob/master/pyspark/ml/regression.py#L1153-L1158"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyspark.ml.regression.GBTRegressor.setFeatureSubsetStrategy" title="Permalink to this definition">¶</a></dt>
<dd><p>Sets the value of <code class="xref py py-attr docutils literal notranslate"><span class="pre">featureSubsetStrategy</span></code>.</p>
<div class="versionadded">
<p><span class="versionmodified added">New in version 2.4.0.</span></p>
</div>
</dd></dl>

<dl class="py method">
<dt id="pyspark.ml.regression.GBTRegressor.setLossType">
<code class="sig-name descname">setLossType</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">value</span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/runawayhorse001/LearningApacheSpark/blob/master/pyspark/ml/regression.py#L1139-L1144"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyspark.ml.regression.GBTRegressor.setLossType" title="Permalink to this definition">¶</a></dt>
<dd><p>Sets the value of <code class="xref py py-attr docutils literal notranslate"><span class="pre">lossType</span></code>.</p>
<div class="versionadded">
<p><span class="versionmodified added">New in version 1.4.0.</span></p>
</div>
</dd></dl>

<dl class="py method">
<dt id="pyspark.ml.regression.GBTRegressor.setParams">
<code class="sig-name descname">setParams</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">self</span></em>, <em class="sig-param"><span class="n">featuresCol</span><span class="o">=</span><span class="default_value">'features'</span></em>, <em class="sig-param"><span class="n">labelCol</span><span class="o">=</span><span class="default_value">'label'</span></em>, <em class="sig-param"><span class="n">predictionCol</span><span class="o">=</span><span class="default_value">'prediction'</span></em>, <em class="sig-param"><span class="n">maxDepth</span><span class="o">=</span><span class="default_value">5</span></em>, <em class="sig-param"><span class="n">maxBins</span><span class="o">=</span><span class="default_value">32</span></em>, <em class="sig-param"><span class="n">minInstancesPerNode</span><span class="o">=</span><span class="default_value">1</span></em>, <em class="sig-param"><span class="n">minInfoGain</span><span class="o">=</span><span class="default_value">0.0</span></em>, <em class="sig-param"><span class="n">maxMemoryInMB</span><span class="o">=</span><span class="default_value">256</span></em>, <em class="sig-param"><span class="n">cacheNodeIds</span><span class="o">=</span><span class="default_value">False</span></em>, <em class="sig-param"><span class="n">subsamplingRate</span><span class="o">=</span><span class="default_value">1.0</span></em>, <em class="sig-param"><span class="n">checkpointInterval</span><span class="o">=</span><span class="default_value">10</span></em>, <em class="sig-param"><span class="n">lossType</span><span class="o">=</span><span class="default_value">'squared'</span></em>, <em class="sig-param"><span class="n">maxIter</span><span class="o">=</span><span class="default_value">20</span></em>, <em class="sig-param"><span class="n">stepSize</span><span class="o">=</span><span class="default_value">0.1</span></em>, <em class="sig-param"><span class="n">seed</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">impurity</span><span class="o">=</span><span class="default_value">'variance'</span></em>, <em class="sig-param"><span class="n">featureSubsetStrategy</span><span class="o">=</span><span class="default_value">'all'</span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/runawayhorse001/LearningApacheSpark/blob/master/pyspark/__init__.py#L1118-L1134"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyspark.ml.regression.GBTRegressor.setParams" title="Permalink to this definition">¶</a></dt>
<dd><p>Sets params for Gradient Boosted Tree Regression.</p>
<div class="versionadded">
<p><span class="versionmodified added">New in version 1.4.0.</span></p>
</div>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt id="pyspark.ml.regression.GeneralizedLinearRegression">
<em class="property">class </em><code class="sig-prename descclassname">pyspark.ml.regression.</code><code class="sig-name descname">GeneralizedLinearRegression</code><span class="sig-paren">(</span><em class="sig-param"><span class="o">*</span><span class="n">args</span></em>, <em class="sig-param"><span class="o">**</span><span class="n">kwargs</span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/runawayhorse001/LearningApacheSpark/blob/master/pyspark/ml/regression.py#L1398-L1604"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyspark.ml.regression.GeneralizedLinearRegression" title="Permalink to this definition">¶</a></dt>
<dd><div class="admonition note">
<p class="admonition-title">Note</p>
<p>Experimental</p>
</div>
<p>Generalized Linear Regression.</p>
<p>Fit a Generalized Linear Model specified by giving a symbolic description of the linear
predictor (link function) and a description of the error distribution (family). It supports
“gaussian”, “binomial”, “poisson”, “gamma” and “tweedie” as family. Valid link functions for
each family is listed below. The first link function of each family is the default one.</p>
<ul class="simple">
<li><p>“gaussian” -&gt; “identity”, “log”, “inverse”</p></li>
<li><p>“binomial” -&gt; “logit”, “probit”, “cloglog”</p></li>
<li><p>“poisson”  -&gt; “log”, “identity”, “sqrt”</p></li>
<li><p>“gamma”    -&gt; “inverse”, “identity”, “log”</p></li>
<li><p>“tweedie”  -&gt; power link function specified through “linkPower”.                     The default link power in the tweedie family is 1 - variancePower.</p></li>
</ul>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference external" href="https://en.wikipedia.org/wiki/Generalized_linear_model">GLM</a></p>
</div>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">pyspark.ml.linalg</span> <span class="kn">import</span> <span class="n">Vectors</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">df</span> <span class="o">=</span> <span class="n">spark</span><span class="o">.</span><span class="n">createDataFrame</span><span class="p">([</span>
<span class="gp">... </span>    <span class="p">(</span><span class="mf">1.0</span><span class="p">,</span> <span class="n">Vectors</span><span class="o">.</span><span class="n">dense</span><span class="p">(</span><span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">)),</span>
<span class="gp">... </span>    <span class="p">(</span><span class="mf">1.0</span><span class="p">,</span> <span class="n">Vectors</span><span class="o">.</span><span class="n">dense</span><span class="p">(</span><span class="mf">1.0</span><span class="p">,</span> <span class="mf">2.0</span><span class="p">)),</span>
<span class="gp">... </span>    <span class="p">(</span><span class="mf">2.0</span><span class="p">,</span> <span class="n">Vectors</span><span class="o">.</span><span class="n">dense</span><span class="p">(</span><span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">)),</span>
<span class="gp">... </span>    <span class="p">(</span><span class="mf">2.0</span><span class="p">,</span> <span class="n">Vectors</span><span class="o">.</span><span class="n">dense</span><span class="p">(</span><span class="mf">1.0</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">)),],</span> <span class="p">[</span><span class="s2">&quot;label&quot;</span><span class="p">,</span> <span class="s2">&quot;features&quot;</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">glr</span> <span class="o">=</span> <span class="n">GeneralizedLinearRegression</span><span class="p">(</span><span class="n">family</span><span class="o">=</span><span class="s2">&quot;gaussian&quot;</span><span class="p">,</span> <span class="n">link</span><span class="o">=</span><span class="s2">&quot;identity&quot;</span><span class="p">,</span> <span class="n">linkPredictionCol</span><span class="o">=</span><span class="s2">&quot;p&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">model</span> <span class="o">=</span> <span class="n">glr</span><span class="o">.</span><span class="n">fit</span><span class="p">(</span><span class="n">df</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">transformed</span> <span class="o">=</span> <span class="n">model</span><span class="o">.</span><span class="n">transform</span><span class="p">(</span><span class="n">df</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">abs</span><span class="p">(</span><span class="n">transformed</span><span class="o">.</span><span class="n">head</span><span class="p">()</span><span class="o">.</span><span class="n">prediction</span> <span class="o">-</span> <span class="mf">1.5</span><span class="p">)</span> <span class="o">&lt;</span> <span class="mf">0.001</span>
<span class="go">True</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">abs</span><span class="p">(</span><span class="n">transformed</span><span class="o">.</span><span class="n">head</span><span class="p">()</span><span class="o">.</span><span class="n">p</span> <span class="o">-</span> <span class="mf">1.5</span><span class="p">)</span> <span class="o">&lt;</span> <span class="mf">0.001</span>
<span class="go">True</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">model</span><span class="o">.</span><span class="n">coefficients</span>
<span class="go">DenseVector([1.5..., -1.0...])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">model</span><span class="o">.</span><span class="n">numFeatures</span>
<span class="go">2</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">abs</span><span class="p">(</span><span class="n">model</span><span class="o">.</span><span class="n">intercept</span> <span class="o">-</span> <span class="mf">1.5</span><span class="p">)</span> <span class="o">&lt;</span> <span class="mf">0.001</span>
<span class="go">True</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">glr_path</span> <span class="o">=</span> <span class="n">temp_path</span> <span class="o">+</span> <span class="s2">&quot;/glr&quot;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">glr</span><span class="o">.</span><span class="n">save</span><span class="p">(</span><span class="n">glr_path</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">glr2</span> <span class="o">=</span> <span class="n">GeneralizedLinearRegression</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="n">glr_path</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">glr</span><span class="o">.</span><span class="n">getFamily</span><span class="p">()</span> <span class="o">==</span> <span class="n">glr2</span><span class="o">.</span><span class="n">getFamily</span><span class="p">()</span>
<span class="go">True</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">model_path</span> <span class="o">=</span> <span class="n">temp_path</span> <span class="o">+</span> <span class="s2">&quot;/glr_model&quot;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">model</span><span class="o">.</span><span class="n">save</span><span class="p">(</span><span class="n">model_path</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">model2</span> <span class="o">=</span> <span class="n">GeneralizedLinearRegressionModel</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="n">model_path</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">model</span><span class="o">.</span><span class="n">intercept</span> <span class="o">==</span> <span class="n">model2</span><span class="o">.</span><span class="n">intercept</span>
<span class="go">True</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">model</span><span class="o">.</span><span class="n">coefficients</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">==</span> <span class="n">model2</span><span class="o">.</span><span class="n">coefficients</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
<span class="go">True</span>
</pre></div>
</div>
<div class="versionadded">
<p><span class="versionmodified added">New in version 2.0.0.</span></p>
</div>
<dl class="py method">
<dt id="pyspark.ml.regression.GeneralizedLinearRegression.getFamily">
<code class="sig-name descname">getFamily</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference external" href="https://github.com/runawayhorse001/LearningApacheSpark/blob/master/pyspark/ml/regression.py#L1529-L1534"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyspark.ml.regression.GeneralizedLinearRegression.getFamily" title="Permalink to this definition">¶</a></dt>
<dd><p>Gets the value of family or its default value.</p>
<div class="versionadded">
<p><span class="versionmodified added">New in version 2.0.0.</span></p>
</div>
</dd></dl>

<dl class="py method">
<dt id="pyspark.ml.regression.GeneralizedLinearRegression.getLink">
<code class="sig-name descname">getLink</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference external" href="https://github.com/runawayhorse001/LearningApacheSpark/blob/master/pyspark/ml/regression.py#L1557-L1562"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyspark.ml.regression.GeneralizedLinearRegression.getLink" title="Permalink to this definition">¶</a></dt>
<dd><p>Gets the value of link or its default value.</p>
<div class="versionadded">
<p><span class="versionmodified added">New in version 2.0.0.</span></p>
</div>
</dd></dl>

<dl class="py method">
<dt id="pyspark.ml.regression.GeneralizedLinearRegression.getLinkPower">
<code class="sig-name descname">getLinkPower</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference external" href="https://github.com/runawayhorse001/LearningApacheSpark/blob/master/pyspark/ml/regression.py#L1585-L1590"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyspark.ml.regression.GeneralizedLinearRegression.getLinkPower" title="Permalink to this definition">¶</a></dt>
<dd><p>Gets the value of linkPower or its default value.</p>
<div class="versionadded">
<p><span class="versionmodified added">New in version 2.2.0.</span></p>
</div>
</dd></dl>

<dl class="py method">
<dt id="pyspark.ml.regression.GeneralizedLinearRegression.getLinkPredictionCol">
<code class="sig-name descname">getLinkPredictionCol</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference external" href="https://github.com/runawayhorse001/LearningApacheSpark/blob/master/pyspark/ml/regression.py#L1543-L1548"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyspark.ml.regression.GeneralizedLinearRegression.getLinkPredictionCol" title="Permalink to this definition">¶</a></dt>
<dd><p>Gets the value of linkPredictionCol or its default value.</p>
<div class="versionadded">
<p><span class="versionmodified added">New in version 2.0.0.</span></p>
</div>
</dd></dl>

<dl class="py method">
<dt id="pyspark.ml.regression.GeneralizedLinearRegression.getOffsetCol">
<code class="sig-name descname">getOffsetCol</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference external" href="https://github.com/runawayhorse001/LearningApacheSpark/blob/master/pyspark/ml/regression.py#L1599-L1604"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyspark.ml.regression.GeneralizedLinearRegression.getOffsetCol" title="Permalink to this definition">¶</a></dt>
<dd><p>Gets the value of offsetCol or its default value.</p>
<div class="versionadded">
<p><span class="versionmodified added">New in version 2.3.0.</span></p>
</div>
</dd></dl>

<dl class="py method">
<dt id="pyspark.ml.regression.GeneralizedLinearRegression.getVariancePower">
<code class="sig-name descname">getVariancePower</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference external" href="https://github.com/runawayhorse001/LearningApacheSpark/blob/master/pyspark/ml/regression.py#L1571-L1576"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyspark.ml.regression.GeneralizedLinearRegression.getVariancePower" title="Permalink to this definition">¶</a></dt>
<dd><p>Gets the value of variancePower or its default value.</p>
<div class="versionadded">
<p><span class="versionmodified added">New in version 2.2.0.</span></p>
</div>
</dd></dl>

<dl class="py method">
<dt id="pyspark.ml.regression.GeneralizedLinearRegression.setFamily">
<code class="sig-name descname">setFamily</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">value</span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/runawayhorse001/LearningApacheSpark/blob/master/pyspark/ml/regression.py#L1522-L1527"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyspark.ml.regression.GeneralizedLinearRegression.setFamily" title="Permalink to this definition">¶</a></dt>
<dd><p>Sets the value of <code class="xref py py-attr docutils literal notranslate"><span class="pre">family</span></code>.</p>
<div class="versionadded">
<p><span class="versionmodified added">New in version 2.0.0.</span></p>
</div>
</dd></dl>

<dl class="py method">
<dt id="pyspark.ml.regression.GeneralizedLinearRegression.setLink">
<code class="sig-name descname">setLink</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">value</span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/runawayhorse001/LearningApacheSpark/blob/master/pyspark/ml/regression.py#L1550-L1555"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyspark.ml.regression.GeneralizedLinearRegression.setLink" title="Permalink to this definition">¶</a></dt>
<dd><p>Sets the value of <code class="xref py py-attr docutils literal notranslate"><span class="pre">link</span></code>.</p>
<div class="versionadded">
<p><span class="versionmodified added">New in version 2.0.0.</span></p>
</div>
</dd></dl>

<dl class="py method">
<dt id="pyspark.ml.regression.GeneralizedLinearRegression.setLinkPower">
<code class="sig-name descname">setLinkPower</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">value</span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/runawayhorse001/LearningApacheSpark/blob/master/pyspark/ml/regression.py#L1578-L1583"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyspark.ml.regression.GeneralizedLinearRegression.setLinkPower" title="Permalink to this definition">¶</a></dt>
<dd><p>Sets the value of <code class="xref py py-attr docutils literal notranslate"><span class="pre">linkPower</span></code>.</p>
<div class="versionadded">
<p><span class="versionmodified added">New in version 2.2.0.</span></p>
</div>
</dd></dl>

<dl class="py method">
<dt id="pyspark.ml.regression.GeneralizedLinearRegression.setLinkPredictionCol">
<code class="sig-name descname">setLinkPredictionCol</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">value</span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/runawayhorse001/LearningApacheSpark/blob/master/pyspark/ml/regression.py#L1536-L1541"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyspark.ml.regression.GeneralizedLinearRegression.setLinkPredictionCol" title="Permalink to this definition">¶</a></dt>
<dd><p>Sets the value of <code class="xref py py-attr docutils literal notranslate"><span class="pre">linkPredictionCol</span></code>.</p>
<div class="versionadded">
<p><span class="versionmodified added">New in version 2.0.0.</span></p>
</div>
</dd></dl>

<dl class="py method">
<dt id="pyspark.ml.regression.GeneralizedLinearRegression.setOffsetCol">
<code class="sig-name descname">setOffsetCol</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">value</span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/runawayhorse001/LearningApacheSpark/blob/master/pyspark/ml/regression.py#L1592-L1597"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyspark.ml.regression.GeneralizedLinearRegression.setOffsetCol" title="Permalink to this definition">¶</a></dt>
<dd><p>Sets the value of <code class="xref py py-attr docutils literal notranslate"><span class="pre">offsetCol</span></code>.</p>
<div class="versionadded">
<p><span class="versionmodified added">New in version 2.3.0.</span></p>
</div>
</dd></dl>

<dl class="py method">
<dt id="pyspark.ml.regression.GeneralizedLinearRegression.setParams">
<code class="sig-name descname">setParams</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">self</span></em>, <em class="sig-param"><span class="n">labelCol</span><span class="o">=</span><span class="default_value">'label'</span></em>, <em class="sig-param"><span class="n">featuresCol</span><span class="o">=</span><span class="default_value">'features'</span></em>, <em class="sig-param"><span class="n">predictionCol</span><span class="o">=</span><span class="default_value">'prediction'</span></em>, <em class="sig-param"><span class="n">family</span><span class="o">=</span><span class="default_value">'gaussian'</span></em>, <em class="sig-param"><span class="n">link</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">fitIntercept</span><span class="o">=</span><span class="default_value">True</span></em>, <em class="sig-param"><span class="n">maxIter</span><span class="o">=</span><span class="default_value">25</span></em>, <em class="sig-param"><span class="n">tol</span><span class="o">=</span><span class="default_value">1e-06</span></em>, <em class="sig-param"><span class="n">regParam</span><span class="o">=</span><span class="default_value">0.0</span></em>, <em class="sig-param"><span class="n">weightCol</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">solver</span><span class="o">=</span><span class="default_value">'irls'</span></em>, <em class="sig-param"><span class="n">linkPredictionCol</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">variancePower</span><span class="o">=</span><span class="default_value">0.0</span></em>, <em class="sig-param"><span class="n">linkPower</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">offsetCol</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/runawayhorse001/LearningApacheSpark/blob/master/pyspark/__init__.py#L1503-L1517"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyspark.ml.regression.GeneralizedLinearRegression.setParams" title="Permalink to this definition">¶</a></dt>
<dd><p>Sets params for generalized linear regression.</p>
<div class="versionadded">
<p><span class="versionmodified added">New in version 2.0.0.</span></p>
</div>
</dd></dl>

<dl class="py method">
<dt id="pyspark.ml.regression.GeneralizedLinearRegression.setVariancePower">
<code class="sig-name descname">setVariancePower</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">value</span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/runawayhorse001/LearningApacheSpark/blob/master/pyspark/ml/regression.py#L1564-L1569"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyspark.ml.regression.GeneralizedLinearRegression.setVariancePower" title="Permalink to this definition">¶</a></dt>
<dd><p>Sets the value of <code class="xref py py-attr docutils literal notranslate"><span class="pre">variancePower</span></code>.</p>
<div class="versionadded">
<p><span class="versionmodified added">New in version 2.2.0.</span></p>
</div>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt id="pyspark.ml.regression.GeneralizedLinearRegressionModel">
<em class="property">class </em><code class="sig-prename descclassname">pyspark.ml.regression.</code><code class="sig-name descname">GeneralizedLinearRegressionModel</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">java_model</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/runawayhorse001/LearningApacheSpark/blob/master/pyspark/ml/regression.py#L1607-L1669"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyspark.ml.regression.GeneralizedLinearRegressionModel" title="Permalink to this definition">¶</a></dt>
<dd><div class="admonition note">
<p class="admonition-title">Note</p>
<p>Experimental</p>
</div>
<p>Model fitted by <a class="reference internal" href="#pyspark.ml.regression.GeneralizedLinearRegression" title="pyspark.ml.regression.GeneralizedLinearRegression"><code class="xref py py-class docutils literal notranslate"><span class="pre">GeneralizedLinearRegression</span></code></a>.</p>
<div class="versionadded">
<p><span class="versionmodified added">New in version 2.0.0.</span></p>
</div>
<dl class="py method">
<dt id="pyspark.ml.regression.GeneralizedLinearRegressionModel.coefficients">
<em class="property">property </em><code class="sig-name descname">coefficients</code><a class="reference external" href="https://github.com/runawayhorse001/LearningApacheSpark/blob/master/pyspark/ml/regression.py"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyspark.ml.regression.GeneralizedLinearRegressionModel.coefficients" title="Permalink to this definition">¶</a></dt>
<dd><p>Model coefficients.</p>
<div class="versionadded">
<p><span class="versionmodified added">New in version 2.0.0.</span></p>
</div>
</dd></dl>

<dl class="py method">
<dt id="pyspark.ml.regression.GeneralizedLinearRegressionModel.evaluate">
<code class="sig-name descname">evaluate</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">dataset</span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/runawayhorse001/LearningApacheSpark/blob/master/pyspark/ml/regression.py#L1657-L1669"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyspark.ml.regression.GeneralizedLinearRegressionModel.evaluate" title="Permalink to this definition">¶</a></dt>
<dd><p>Evaluates the model on a test dataset.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>dataset</strong> – Test dataset to evaluate model on, where dataset is an
instance of <code class="xref py py-class docutils literal notranslate"><span class="pre">pyspark.sql.DataFrame</span></code></p>
</dd>
</dl>
<div class="versionadded">
<p><span class="versionmodified added">New in version 2.0.0.</span></p>
</div>
</dd></dl>

<dl class="py method">
<dt id="pyspark.ml.regression.GeneralizedLinearRegressionModel.hasSummary">
<em class="property">property </em><code class="sig-name descname">hasSummary</code><a class="reference external" href="https://github.com/runawayhorse001/LearningApacheSpark/blob/master/pyspark/ml/regression.py"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyspark.ml.regression.GeneralizedLinearRegressionModel.hasSummary" title="Permalink to this definition">¶</a></dt>
<dd><p>Indicates whether a training summary exists for this model
instance.</p>
<div class="versionadded">
<p><span class="versionmodified added">New in version 2.0.0.</span></p>
</div>
</dd></dl>

<dl class="py method">
<dt id="pyspark.ml.regression.GeneralizedLinearRegressionModel.intercept">
<em class="property">property </em><code class="sig-name descname">intercept</code><a class="reference external" href="https://github.com/runawayhorse001/LearningApacheSpark/blob/master/pyspark/ml/regression.py"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyspark.ml.regression.GeneralizedLinearRegressionModel.intercept" title="Permalink to this definition">¶</a></dt>
<dd><p>Model intercept.</p>
<div class="versionadded">
<p><span class="versionmodified added">New in version 2.0.0.</span></p>
</div>
</dd></dl>

<dl class="py method">
<dt id="pyspark.ml.regression.GeneralizedLinearRegressionModel.summary">
<em class="property">property </em><code class="sig-name descname">summary</code><a class="reference external" href="https://github.com/runawayhorse001/LearningApacheSpark/blob/master/pyspark/ml/regression.py"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyspark.ml.regression.GeneralizedLinearRegressionModel.summary" title="Permalink to this definition">¶</a></dt>
<dd><p>Gets summary (e.g. residuals, deviance, pValues) of model on
training set. An exception is thrown if
<img class="math" src="_images/math/5c766935e8e4a480fcebe1cd549911ecd0f2babb.png" alt="trainingSummary is None"/>.</p>
<div class="versionadded">
<p><span class="versionmodified added">New in version 2.0.0.</span></p>
</div>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt id="pyspark.ml.regression.GeneralizedLinearRegressionSummary">
<em class="property">class </em><code class="sig-prename descclassname">pyspark.ml.regression.</code><code class="sig-name descname">GeneralizedLinearRegressionSummary</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">java_obj</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/runawayhorse001/LearningApacheSpark/blob/master/pyspark/ml/regression.py#L1672-L1781"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyspark.ml.regression.GeneralizedLinearRegressionSummary" title="Permalink to this definition">¶</a></dt>
<dd><div class="admonition note">
<p class="admonition-title">Note</p>
<p>Experimental</p>
</div>
<p>Generalized linear regression results evaluated on a dataset.</p>
<div class="versionadded">
<p><span class="versionmodified added">New in version 2.0.0.</span></p>
</div>
<dl class="py method">
<dt id="pyspark.ml.regression.GeneralizedLinearRegressionSummary.aic">
<em class="property">property </em><code class="sig-name descname">aic</code><a class="reference external" href="https://github.com/runawayhorse001/LearningApacheSpark/blob/master/pyspark/ml/regression.py"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyspark.ml.regression.GeneralizedLinearRegressionSummary.aic" title="Permalink to this definition">¶</a></dt>
<dd><p>Akaike’s “An Information Criterion”(AIC) for the fitted model.</p>
<div class="versionadded">
<p><span class="versionmodified added">New in version 2.0.0.</span></p>
</div>
</dd></dl>

<dl class="py method">
<dt id="pyspark.ml.regression.GeneralizedLinearRegressionSummary.degreesOfFreedom">
<em class="property">property </em><code class="sig-name descname">degreesOfFreedom</code><a class="reference external" href="https://github.com/runawayhorse001/LearningApacheSpark/blob/master/pyspark/ml/regression.py"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyspark.ml.regression.GeneralizedLinearRegressionSummary.degreesOfFreedom" title="Permalink to this definition">¶</a></dt>
<dd><p>Degrees of freedom.</p>
<div class="versionadded">
<p><span class="versionmodified added">New in version 2.0.0.</span></p>
</div>
</dd></dl>

<dl class="py method">
<dt id="pyspark.ml.regression.GeneralizedLinearRegressionSummary.deviance">
<em class="property">property </em><code class="sig-name descname">deviance</code><a class="reference external" href="https://github.com/runawayhorse001/LearningApacheSpark/blob/master/pyspark/ml/regression.py"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyspark.ml.regression.GeneralizedLinearRegressionSummary.deviance" title="Permalink to this definition">¶</a></dt>
<dd><p>The deviance for the fitted model.</p>
<div class="versionadded">
<p><span class="versionmodified added">New in version 2.0.0.</span></p>
</div>
</dd></dl>

<dl class="py method">
<dt id="pyspark.ml.regression.GeneralizedLinearRegressionSummary.dispersion">
<em class="property">property </em><code class="sig-name descname">dispersion</code><a class="reference external" href="https://github.com/runawayhorse001/LearningApacheSpark/blob/master/pyspark/ml/regression.py"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyspark.ml.regression.GeneralizedLinearRegressionSummary.dispersion" title="Permalink to this definition">¶</a></dt>
<dd><p>The dispersion of the fitted model.
It is taken as 1.0 for the “binomial” and “poisson” families, and otherwise
estimated by the residual Pearson’s Chi-Squared statistic (which is defined as
sum of the squares of the Pearson residuals) divided by the residual degrees of freedom.</p>
<div class="versionadded">
<p><span class="versionmodified added">New in version 2.0.0.</span></p>
</div>
</dd></dl>

<dl class="py method">
<dt id="pyspark.ml.regression.GeneralizedLinearRegressionSummary.nullDeviance">
<em class="property">property </em><code class="sig-name descname">nullDeviance</code><a class="reference external" href="https://github.com/runawayhorse001/LearningApacheSpark/blob/master/pyspark/ml/regression.py"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyspark.ml.regression.GeneralizedLinearRegressionSummary.nullDeviance" title="Permalink to this definition">¶</a></dt>
<dd><p>The deviance for the null model.</p>
<div class="versionadded">
<p><span class="versionmodified added">New in version 2.0.0.</span></p>
</div>
</dd></dl>

<dl class="py method">
<dt id="pyspark.ml.regression.GeneralizedLinearRegressionSummary.numInstances">
<em class="property">property </em><code class="sig-name descname">numInstances</code><a class="reference external" href="https://github.com/runawayhorse001/LearningApacheSpark/blob/master/pyspark/ml/regression.py"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyspark.ml.regression.GeneralizedLinearRegressionSummary.numInstances" title="Permalink to this definition">¶</a></dt>
<dd><p>Number of instances in DataFrame predictions.</p>
<div class="versionadded">
<p><span class="versionmodified added">New in version 2.2.0.</span></p>
</div>
</dd></dl>

<dl class="py method">
<dt id="pyspark.ml.regression.GeneralizedLinearRegressionSummary.predictionCol">
<em class="property">property </em><code class="sig-name descname">predictionCol</code><a class="reference external" href="https://github.com/runawayhorse001/LearningApacheSpark/blob/master/pyspark/ml/regression.py"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyspark.ml.regression.GeneralizedLinearRegressionSummary.predictionCol" title="Permalink to this definition">¶</a></dt>
<dd><p>Field in <a class="reference internal" href="#pyspark.ml.regression.GeneralizedLinearRegressionSummary.predictions" title="pyspark.ml.regression.GeneralizedLinearRegressionSummary.predictions"><code class="xref py py-attr docutils literal notranslate"><span class="pre">predictions</span></code></a> which gives the predicted value of each instance.
This is set to a new column name if the original model’s <img class="math" src="_images/math/d162cebd2b4656fb613d26eb7e1af97320bea63e.png" alt="predictionCol"/> is not set.</p>
<div class="versionadded">
<p><span class="versionmodified added">New in version 2.0.0.</span></p>
</div>
</dd></dl>

<dl class="py method">
<dt id="pyspark.ml.regression.GeneralizedLinearRegressionSummary.predictions">
<em class="property">property </em><code class="sig-name descname">predictions</code><a class="reference external" href="https://github.com/runawayhorse001/LearningApacheSpark/blob/master/pyspark/ml/regression.py"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyspark.ml.regression.GeneralizedLinearRegressionSummary.predictions" title="Permalink to this definition">¶</a></dt>
<dd><p>Predictions output by the model’s <img class="math" src="_images/math/1974e57a2d71dccf63f20603f513258811e97596.png" alt="transform"/> method.</p>
<div class="versionadded">
<p><span class="versionmodified added">New in version 2.0.0.</span></p>
</div>
</dd></dl>

<dl class="py method">
<dt id="pyspark.ml.regression.GeneralizedLinearRegressionSummary.rank">
<em class="property">property </em><code class="sig-name descname">rank</code><a class="reference external" href="https://github.com/runawayhorse001/LearningApacheSpark/blob/master/pyspark/ml/regression.py"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyspark.ml.regression.GeneralizedLinearRegressionSummary.rank" title="Permalink to this definition">¶</a></dt>
<dd><p>The numeric rank of the fitted linear model.</p>
<div class="versionadded">
<p><span class="versionmodified added">New in version 2.0.0.</span></p>
</div>
</dd></dl>

<dl class="py method">
<dt id="pyspark.ml.regression.GeneralizedLinearRegressionSummary.residualDegreeOfFreedom">
<em class="property">property </em><code class="sig-name descname">residualDegreeOfFreedom</code><a class="reference external" href="https://github.com/runawayhorse001/LearningApacheSpark/blob/master/pyspark/ml/regression.py"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyspark.ml.regression.GeneralizedLinearRegressionSummary.residualDegreeOfFreedom" title="Permalink to this definition">¶</a></dt>
<dd><p>The residual degrees of freedom.</p>
<div class="versionadded">
<p><span class="versionmodified added">New in version 2.0.0.</span></p>
</div>
</dd></dl>

<dl class="py method">
<dt id="pyspark.ml.regression.GeneralizedLinearRegressionSummary.residualDegreeOfFreedomNull">
<em class="property">property </em><code class="sig-name descname">residualDegreeOfFreedomNull</code><a class="reference external" href="https://github.com/runawayhorse001/LearningApacheSpark/blob/master/pyspark/ml/regression.py"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyspark.ml.regression.GeneralizedLinearRegressionSummary.residualDegreeOfFreedomNull" title="Permalink to this definition">¶</a></dt>
<dd><p>The residual degrees of freedom for the null model.</p>
<div class="versionadded">
<p><span class="versionmodified added">New in version 2.0.0.</span></p>
</div>
</dd></dl>

<dl class="py method">
<dt id="pyspark.ml.regression.GeneralizedLinearRegressionSummary.residuals">
<code class="sig-name descname">residuals</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">residualsType</span><span class="o">=</span><span class="default_value">'deviance'</span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/runawayhorse001/LearningApacheSpark/blob/master/pyspark/ml/regression.py#L1738-L1746"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyspark.ml.regression.GeneralizedLinearRegressionSummary.residuals" title="Permalink to this definition">¶</a></dt>
<dd><p>Get the residuals of the fitted model by type.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>residualsType</strong> – The type of residuals which should be returned.
Supported options: deviance (default), pearson, working, and response.</p>
</dd>
</dl>
<div class="versionadded">
<p><span class="versionmodified added">New in version 2.0.0.</span></p>
</div>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt id="pyspark.ml.regression.GeneralizedLinearRegressionTrainingSummary">
<em class="property">class </em><code class="sig-prename descclassname">pyspark.ml.regression.</code><code class="sig-name descname">GeneralizedLinearRegressionTrainingSummary</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">java_obj</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/runawayhorse001/LearningApacheSpark/blob/master/pyspark/ml/regression.py#L1785-L1844"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyspark.ml.regression.GeneralizedLinearRegressionTrainingSummary" title="Permalink to this definition">¶</a></dt>
<dd><div class="admonition note">
<p class="admonition-title">Note</p>
<p>Experimental</p>
</div>
<p>Generalized linear regression training results.</p>
<div class="versionadded">
<p><span class="versionmodified added">New in version 2.0.0.</span></p>
</div>
<dl class="py method">
<dt id="pyspark.ml.regression.GeneralizedLinearRegressionTrainingSummary.coefficientStandardErrors">
<em class="property">property </em><code class="sig-name descname">coefficientStandardErrors</code><a class="reference external" href="https://github.com/runawayhorse001/LearningApacheSpark/blob/master/pyspark/ml/regression.py"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyspark.ml.regression.GeneralizedLinearRegressionTrainingSummary.coefficientStandardErrors" title="Permalink to this definition">¶</a></dt>
<dd><p>Standard error of estimated coefficients and intercept.</p>
<p>If <code class="xref py py-attr docutils literal notranslate"><span class="pre">GeneralizedLinearRegression.fitIntercept</span></code> is set to True,
then the last element returned corresponds to the intercept.</p>
<div class="versionadded">
<p><span class="versionmodified added">New in version 2.0.0.</span></p>
</div>
</dd></dl>

<dl class="py method">
<dt id="pyspark.ml.regression.GeneralizedLinearRegressionTrainingSummary.numIterations">
<em class="property">property </em><code class="sig-name descname">numIterations</code><a class="reference external" href="https://github.com/runawayhorse001/LearningApacheSpark/blob/master/pyspark/ml/regression.py"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyspark.ml.regression.GeneralizedLinearRegressionTrainingSummary.numIterations" title="Permalink to this definition">¶</a></dt>
<dd><p>Number of training iterations.</p>
<div class="versionadded">
<p><span class="versionmodified added">New in version 2.0.0.</span></p>
</div>
</dd></dl>

<dl class="py method">
<dt id="pyspark.ml.regression.GeneralizedLinearRegressionTrainingSummary.pValues">
<em class="property">property </em><code class="sig-name descname">pValues</code><a class="reference external" href="https://github.com/runawayhorse001/LearningApacheSpark/blob/master/pyspark/ml/regression.py"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyspark.ml.regression.GeneralizedLinearRegressionTrainingSummary.pValues" title="Permalink to this definition">¶</a></dt>
<dd><p>Two-sided p-value of estimated coefficients and intercept.</p>
<p>If <code class="xref py py-attr docutils literal notranslate"><span class="pre">GeneralizedLinearRegression.fitIntercept</span></code> is set to True,
then the last element returned corresponds to the intercept.</p>
<div class="versionadded">
<p><span class="versionmodified added">New in version 2.0.0.</span></p>
</div>
</dd></dl>

<dl class="py method">
<dt id="pyspark.ml.regression.GeneralizedLinearRegressionTrainingSummary.solver">
<em class="property">property </em><code class="sig-name descname">solver</code><a class="reference external" href="https://github.com/runawayhorse001/LearningApacheSpark/blob/master/pyspark/ml/regression.py"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyspark.ml.regression.GeneralizedLinearRegressionTrainingSummary.solver" title="Permalink to this definition">¶</a></dt>
<dd><p>The numeric solver used for training.</p>
<div class="versionadded">
<p><span class="versionmodified added">New in version 2.0.0.</span></p>
</div>
</dd></dl>

<dl class="py method">
<dt id="pyspark.ml.regression.GeneralizedLinearRegressionTrainingSummary.tValues">
<em class="property">property </em><code class="sig-name descname">tValues</code><a class="reference external" href="https://github.com/runawayhorse001/LearningApacheSpark/blob/master/pyspark/ml/regression.py"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyspark.ml.regression.GeneralizedLinearRegressionTrainingSummary.tValues" title="Permalink to this definition">¶</a></dt>
<dd><p>T-statistic of estimated coefficients and intercept.</p>
<p>If <code class="xref py py-attr docutils literal notranslate"><span class="pre">GeneralizedLinearRegression.fitIntercept</span></code> is set to True,
then the last element returned corresponds to the intercept.</p>
<div class="versionadded">
<p><span class="versionmodified added">New in version 2.0.0.</span></p>
</div>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt id="pyspark.ml.regression.IsotonicRegression">
<em class="property">class </em><code class="sig-prename descclassname">pyspark.ml.regression.</code><code class="sig-name descname">IsotonicRegression</code><span class="sig-paren">(</span><em class="sig-param"><span class="o">*</span><span class="n">args</span></em>, <em class="sig-param"><span class="o">**</span><span class="n">kwargs</span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/runawayhorse001/LearningApacheSpark/blob/master/pyspark/ml/regression.py#L477-L569"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyspark.ml.regression.IsotonicRegression" title="Permalink to this definition">¶</a></dt>
<dd><p>Currently implemented using parallelized pool adjacent violators algorithm.
Only univariate (single feature) algorithm supported.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">pyspark.ml.linalg</span> <span class="kn">import</span> <span class="n">Vectors</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">df</span> <span class="o">=</span> <span class="n">spark</span><span class="o">.</span><span class="n">createDataFrame</span><span class="p">([</span>
<span class="gp">... </span>    <span class="p">(</span><span class="mf">1.0</span><span class="p">,</span> <span class="n">Vectors</span><span class="o">.</span><span class="n">dense</span><span class="p">(</span><span class="mf">1.0</span><span class="p">)),</span>
<span class="gp">... </span>    <span class="p">(</span><span class="mf">0.0</span><span class="p">,</span> <span class="n">Vectors</span><span class="o">.</span><span class="n">sparse</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="p">[],</span> <span class="p">[]))],</span> <span class="p">[</span><span class="s2">&quot;label&quot;</span><span class="p">,</span> <span class="s2">&quot;features&quot;</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ir</span> <span class="o">=</span> <span class="n">IsotonicRegression</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">model</span> <span class="o">=</span> <span class="n">ir</span><span class="o">.</span><span class="n">fit</span><span class="p">(</span><span class="n">df</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">test0</span> <span class="o">=</span> <span class="n">spark</span><span class="o">.</span><span class="n">createDataFrame</span><span class="p">([(</span><span class="n">Vectors</span><span class="o">.</span><span class="n">dense</span><span class="p">(</span><span class="o">-</span><span class="mf">1.0</span><span class="p">),)],</span> <span class="p">[</span><span class="s2">&quot;features&quot;</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">model</span><span class="o">.</span><span class="n">transform</span><span class="p">(</span><span class="n">test0</span><span class="p">)</span><span class="o">.</span><span class="n">head</span><span class="p">()</span><span class="o">.</span><span class="n">prediction</span>
<span class="go">0.0</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">model</span><span class="o">.</span><span class="n">boundaries</span>
<span class="go">DenseVector([0.0, 1.0])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ir_path</span> <span class="o">=</span> <span class="n">temp_path</span> <span class="o">+</span> <span class="s2">&quot;/ir&quot;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ir</span><span class="o">.</span><span class="n">save</span><span class="p">(</span><span class="n">ir_path</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ir2</span> <span class="o">=</span> <span class="n">IsotonicRegression</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="n">ir_path</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ir2</span><span class="o">.</span><span class="n">getIsotonic</span><span class="p">()</span>
<span class="go">True</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">model_path</span> <span class="o">=</span> <span class="n">temp_path</span> <span class="o">+</span> <span class="s2">&quot;/ir_model&quot;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">model</span><span class="o">.</span><span class="n">save</span><span class="p">(</span><span class="n">model_path</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">model2</span> <span class="o">=</span> <span class="n">IsotonicRegressionModel</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="n">model_path</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">model</span><span class="o">.</span><span class="n">boundaries</span> <span class="o">==</span> <span class="n">model2</span><span class="o">.</span><span class="n">boundaries</span>
<span class="go">True</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">model</span><span class="o">.</span><span class="n">predictions</span> <span class="o">==</span> <span class="n">model2</span><span class="o">.</span><span class="n">predictions</span>
<span class="go">True</span>
</pre></div>
</div>
<div class="versionadded">
<p><span class="versionmodified added">New in version 1.6.0.</span></p>
</div>
<dl class="py method">
<dt id="pyspark.ml.regression.IsotonicRegression.getFeatureIndex">
<code class="sig-name descname">getFeatureIndex</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference external" href="https://github.com/runawayhorse001/LearningApacheSpark/blob/master/pyspark/ml/regression.py#L565-L569"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyspark.ml.regression.IsotonicRegression.getFeatureIndex" title="Permalink to this definition">¶</a></dt>
<dd><p>Gets the value of featureIndex or its default value.</p>
</dd></dl>

<dl class="py method">
<dt id="pyspark.ml.regression.IsotonicRegression.getIsotonic">
<code class="sig-name descname">getIsotonic</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference external" href="https://github.com/runawayhorse001/LearningApacheSpark/blob/master/pyspark/ml/regression.py#L553-L557"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyspark.ml.regression.IsotonicRegression.getIsotonic" title="Permalink to this definition">¶</a></dt>
<dd><p>Gets the value of isotonic or its default value.</p>
</dd></dl>

<dl class="py method">
<dt id="pyspark.ml.regression.IsotonicRegression.setFeatureIndex">
<code class="sig-name descname">setFeatureIndex</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">value</span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/runawayhorse001/LearningApacheSpark/blob/master/pyspark/ml/regression.py#L559-L563"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyspark.ml.regression.IsotonicRegression.setFeatureIndex" title="Permalink to this definition">¶</a></dt>
<dd><p>Sets the value of <code class="xref py py-attr docutils literal notranslate"><span class="pre">featureIndex</span></code>.</p>
</dd></dl>

<dl class="py method">
<dt id="pyspark.ml.regression.IsotonicRegression.setIsotonic">
<code class="sig-name descname">setIsotonic</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">value</span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/runawayhorse001/LearningApacheSpark/blob/master/pyspark/ml/regression.py#L547-L551"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyspark.ml.regression.IsotonicRegression.setIsotonic" title="Permalink to this definition">¶</a></dt>
<dd><p>Sets the value of <code class="xref py py-attr docutils literal notranslate"><span class="pre">isotonic</span></code>.</p>
</dd></dl>

<dl class="py method">
<dt id="pyspark.ml.regression.IsotonicRegression.setParams">
<code class="sig-name descname">setParams</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">featuresCol</span><span class="o">=</span><span class="default_value">'features'</span></em>, <em class="sig-param"><span class="n">labelCol</span><span class="o">=</span><span class="default_value">'label'</span></em>, <em class="sig-param"><span class="n">predictionCol</span><span class="o">=</span><span class="default_value">'prediction'</span></em>, <em class="sig-param"><span class="n">weightCol</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">isotonic</span><span class="o">=</span><span class="default_value">True</span></em>, <em class="sig-param"><span class="n">featureIndex</span><span class="o">=</span><span class="default_value">0</span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/runawayhorse001/LearningApacheSpark/blob/master/pyspark/__init__.py#L533-L542"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyspark.ml.regression.IsotonicRegression.setParams" title="Permalink to this definition">¶</a></dt>
<dd><p>setParams(self, featuresCol=”features”, labelCol=”label”, predictionCol=”prediction”,                  weightCol=None, isotonic=True, featureIndex=0):
Set the params for IsotonicRegression.</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt id="pyspark.ml.regression.IsotonicRegressionModel">
<em class="property">class </em><code class="sig-prename descclassname">pyspark.ml.regression.</code><code class="sig-name descname">IsotonicRegressionModel</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">java_model</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/runawayhorse001/LearningApacheSpark/blob/master/pyspark/ml/regression.py#L572-L594"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyspark.ml.regression.IsotonicRegressionModel" title="Permalink to this definition">¶</a></dt>
<dd><p>Model fitted by <a class="reference internal" href="#pyspark.ml.regression.IsotonicRegression" title="pyspark.ml.regression.IsotonicRegression"><code class="xref py py-class docutils literal notranslate"><span class="pre">IsotonicRegression</span></code></a>.</p>
<div class="versionadded">
<p><span class="versionmodified added">New in version 1.6.0.</span></p>
</div>
<dl class="py method">
<dt id="pyspark.ml.regression.IsotonicRegressionModel.boundaries">
<em class="property">property </em><code class="sig-name descname">boundaries</code><a class="reference external" href="https://github.com/runawayhorse001/LearningApacheSpark/blob/master/pyspark/ml/regression.py"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyspark.ml.regression.IsotonicRegressionModel.boundaries" title="Permalink to this definition">¶</a></dt>
<dd><p>Boundaries in increasing order for which predictions are known.</p>
<div class="versionadded">
<p><span class="versionmodified added">New in version 1.6.0.</span></p>
</div>
</dd></dl>

<dl class="py method">
<dt id="pyspark.ml.regression.IsotonicRegressionModel.predictions">
<em class="property">property </em><code class="sig-name descname">predictions</code><a class="reference external" href="https://github.com/runawayhorse001/LearningApacheSpark/blob/master/pyspark/ml/regression.py"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyspark.ml.regression.IsotonicRegressionModel.predictions" title="Permalink to this definition">¶</a></dt>
<dd><p>Predictions associated with the boundaries at the same index, monotone because of isotonic
regression.</p>
<div class="versionadded">
<p><span class="versionmodified added">New in version 1.6.0.</span></p>
</div>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt id="pyspark.ml.regression.LinearRegression">
<em class="property">class </em><code class="sig-prename descclassname">pyspark.ml.regression.</code><code class="sig-name descname">LinearRegression</code><span class="sig-paren">(</span><em class="sig-param"><span class="o">*</span><span class="n">args</span></em>, <em class="sig-param"><span class="o">**</span><span class="n">kwargs</span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/runawayhorse001/LearningApacheSpark/blob/master/pyspark/ml/regression.py#L41-L162"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyspark.ml.regression.LinearRegression" title="Permalink to this definition">¶</a></dt>
<dd><p>Linear regression.</p>
<p>The learning objective is to minimize the specified loss function, with regularization.
This supports two kinds of loss:</p>
<ul class="simple">
<li><p>squaredError (a.k.a squared loss)</p></li>
<li><p>huber (a hybrid of squared error for relatively small errors and absolute error for     relatively large ones, and we estimate the scale parameter from training data)</p></li>
</ul>
<p>This supports multiple types of regularization:</p>
<ul class="simple">
<li><p>none (a.k.a. ordinary least squares)</p></li>
<li><p>L2 (ridge regression)</p></li>
<li><p>L1 (Lasso)</p></li>
<li><p>L2 + L1 (elastic net)</p></li>
</ul>
<p>Note: Fitting with huber loss only supports none and L2 regularization.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">pyspark.ml.linalg</span> <span class="kn">import</span> <span class="n">Vectors</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">df</span> <span class="o">=</span> <span class="n">spark</span><span class="o">.</span><span class="n">createDataFrame</span><span class="p">([</span>
<span class="gp">... </span>    <span class="p">(</span><span class="mf">1.0</span><span class="p">,</span> <span class="mf">2.0</span><span class="p">,</span> <span class="n">Vectors</span><span class="o">.</span><span class="n">dense</span><span class="p">(</span><span class="mf">1.0</span><span class="p">)),</span>
<span class="gp">... </span>    <span class="p">(</span><span class="mf">0.0</span><span class="p">,</span> <span class="mf">2.0</span><span class="p">,</span> <span class="n">Vectors</span><span class="o">.</span><span class="n">sparse</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="p">[],</span> <span class="p">[]))],</span> <span class="p">[</span><span class="s2">&quot;label&quot;</span><span class="p">,</span> <span class="s2">&quot;weight&quot;</span><span class="p">,</span> <span class="s2">&quot;features&quot;</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">lr</span> <span class="o">=</span> <span class="n">LinearRegression</span><span class="p">(</span><span class="n">maxIter</span><span class="o">=</span><span class="mi">5</span><span class="p">,</span> <span class="n">regParam</span><span class="o">=</span><span class="mf">0.0</span><span class="p">,</span> <span class="n">solver</span><span class="o">=</span><span class="s2">&quot;normal&quot;</span><span class="p">,</span> <span class="n">weightCol</span><span class="o">=</span><span class="s2">&quot;weight&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">model</span> <span class="o">=</span> <span class="n">lr</span><span class="o">.</span><span class="n">fit</span><span class="p">(</span><span class="n">df</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">test0</span> <span class="o">=</span> <span class="n">spark</span><span class="o">.</span><span class="n">createDataFrame</span><span class="p">([(</span><span class="n">Vectors</span><span class="o">.</span><span class="n">dense</span><span class="p">(</span><span class="o">-</span><span class="mf">1.0</span><span class="p">),)],</span> <span class="p">[</span><span class="s2">&quot;features&quot;</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">abs</span><span class="p">(</span><span class="n">model</span><span class="o">.</span><span class="n">transform</span><span class="p">(</span><span class="n">test0</span><span class="p">)</span><span class="o">.</span><span class="n">head</span><span class="p">()</span><span class="o">.</span><span class="n">prediction</span> <span class="o">-</span> <span class="p">(</span><span class="o">-</span><span class="mf">1.0</span><span class="p">))</span> <span class="o">&lt;</span> <span class="mf">0.001</span>
<span class="go">True</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">abs</span><span class="p">(</span><span class="n">model</span><span class="o">.</span><span class="n">coefficients</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">-</span> <span class="mf">1.0</span><span class="p">)</span> <span class="o">&lt;</span> <span class="mf">0.001</span>
<span class="go">True</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">abs</span><span class="p">(</span><span class="n">model</span><span class="o">.</span><span class="n">intercept</span> <span class="o">-</span> <span class="mf">0.0</span><span class="p">)</span> <span class="o">&lt;</span> <span class="mf">0.001</span>
<span class="go">True</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">test1</span> <span class="o">=</span> <span class="n">spark</span><span class="o">.</span><span class="n">createDataFrame</span><span class="p">([(</span><span class="n">Vectors</span><span class="o">.</span><span class="n">sparse</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="p">[</span><span class="mf">1.0</span><span class="p">]),)],</span> <span class="p">[</span><span class="s2">&quot;features&quot;</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">abs</span><span class="p">(</span><span class="n">model</span><span class="o">.</span><span class="n">transform</span><span class="p">(</span><span class="n">test1</span><span class="p">)</span><span class="o">.</span><span class="n">head</span><span class="p">()</span><span class="o">.</span><span class="n">prediction</span> <span class="o">-</span> <span class="mf">1.0</span><span class="p">)</span> <span class="o">&lt;</span> <span class="mf">0.001</span>
<span class="go">True</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">lr</span><span class="o">.</span><span class="n">setParams</span><span class="p">(</span><span class="s2">&quot;vector&quot;</span><span class="p">)</span>
<span class="gt">Traceback (most recent call last):</span>
    <span class="o">...</span>
<span class="gr">TypeError</span>: <span class="n">Method setParams forces keyword arguments.</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">lr_path</span> <span class="o">=</span> <span class="n">temp_path</span> <span class="o">+</span> <span class="s2">&quot;/lr&quot;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">lr</span><span class="o">.</span><span class="n">save</span><span class="p">(</span><span class="n">lr_path</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">lr2</span> <span class="o">=</span> <span class="n">LinearRegression</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="n">lr_path</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">lr2</span><span class="o">.</span><span class="n">getMaxIter</span><span class="p">()</span>
<span class="go">5</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">model_path</span> <span class="o">=</span> <span class="n">temp_path</span> <span class="o">+</span> <span class="s2">&quot;/lr_model&quot;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">model</span><span class="o">.</span><span class="n">save</span><span class="p">(</span><span class="n">model_path</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">model2</span> <span class="o">=</span> <span class="n">LinearRegressionModel</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="n">model_path</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">model</span><span class="o">.</span><span class="n">coefficients</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">==</span> <span class="n">model2</span><span class="o">.</span><span class="n">coefficients</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
<span class="go">True</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">model</span><span class="o">.</span><span class="n">intercept</span> <span class="o">==</span> <span class="n">model2</span><span class="o">.</span><span class="n">intercept</span>
<span class="go">True</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">model</span><span class="o">.</span><span class="n">numFeatures</span>
<span class="go">1</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">model</span><span class="o">.</span><span class="n">write</span><span class="p">()</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="s2">&quot;pmml&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">save</span><span class="p">(</span><span class="n">model_path</span> <span class="o">+</span> <span class="s2">&quot;_2&quot;</span><span class="p">)</span>
</pre></div>
</div>
<div class="versionadded">
<p><span class="versionmodified added">New in version 1.4.0.</span></p>
</div>
<dl class="py method">
<dt id="pyspark.ml.regression.LinearRegression.getEpsilon">
<code class="sig-name descname">getEpsilon</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference external" href="https://github.com/runawayhorse001/LearningApacheSpark/blob/master/pyspark/ml/regression.py#L157-L162"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyspark.ml.regression.LinearRegression.getEpsilon" title="Permalink to this definition">¶</a></dt>
<dd><p>Gets the value of epsilon or its default value.</p>
<div class="versionadded">
<p><span class="versionmodified added">New in version 2.3.0.</span></p>
</div>
</dd></dl>

<dl class="py method">
<dt id="pyspark.ml.regression.LinearRegression.setEpsilon">
<code class="sig-name descname">setEpsilon</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">value</span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/runawayhorse001/LearningApacheSpark/blob/master/pyspark/ml/regression.py#L150-L155"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyspark.ml.regression.LinearRegression.setEpsilon" title="Permalink to this definition">¶</a></dt>
<dd><p>Sets the value of <code class="xref py py-attr docutils literal notranslate"><span class="pre">epsilon</span></code>.</p>
<div class="versionadded">
<p><span class="versionmodified added">New in version 2.3.0.</span></p>
</div>
</dd></dl>

<dl class="py method">
<dt id="pyspark.ml.regression.LinearRegression.setParams">
<code class="sig-name descname">setParams</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">self</span></em>, <em class="sig-param"><span class="n">featuresCol</span><span class="o">=</span><span class="default_value">'features'</span></em>, <em class="sig-param"><span class="n">labelCol</span><span class="o">=</span><span class="default_value">'label'</span></em>, <em class="sig-param"><span class="n">predictionCol</span><span class="o">=</span><span class="default_value">'prediction'</span></em>, <em class="sig-param"><span class="n">maxIter</span><span class="o">=</span><span class="default_value">100</span></em>, <em class="sig-param"><span class="n">regParam</span><span class="o">=</span><span class="default_value">0.0</span></em>, <em class="sig-param"><span class="n">elasticNetParam</span><span class="o">=</span><span class="default_value">0.0</span></em>, <em class="sig-param"><span class="n">tol</span><span class="o">=</span><span class="default_value">1e-06</span></em>, <em class="sig-param"><span class="n">fitIntercept</span><span class="o">=</span><span class="default_value">True</span></em>, <em class="sig-param"><span class="n">standardization</span><span class="o">=</span><span class="default_value">True</span></em>, <em class="sig-param"><span class="n">solver</span><span class="o">=</span><span class="default_value">'auto'</span></em>, <em class="sig-param"><span class="n">weightCol</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">aggregationDepth</span><span class="o">=</span><span class="default_value">2</span></em>, <em class="sig-param"><span class="n">loss</span><span class="o">=</span><span class="default_value">'squaredError'</span></em>, <em class="sig-param"><span class="n">epsilon</span><span class="o">=</span><span class="default_value">1.35</span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/runawayhorse001/LearningApacheSpark/blob/master/pyspark/__init__.py#L131-L145"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyspark.ml.regression.LinearRegression.setParams" title="Permalink to this definition">¶</a></dt>
<dd><p>Sets params for linear regression.</p>
<div class="versionadded">
<p><span class="versionmodified added">New in version 1.4.0.</span></p>
</div>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt id="pyspark.ml.regression.LinearRegressionModel">
<em class="property">class </em><code class="sig-prename descclassname">pyspark.ml.regression.</code><code class="sig-name descname">LinearRegressionModel</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">java_model</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/runawayhorse001/LearningApacheSpark/blob/master/pyspark/ml/regression.py#L165-L232"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyspark.ml.regression.LinearRegressionModel" title="Permalink to this definition">¶</a></dt>
<dd><p>Model fitted by <a class="reference internal" href="#pyspark.ml.regression.LinearRegression" title="pyspark.ml.regression.LinearRegression"><code class="xref py py-class docutils literal notranslate"><span class="pre">LinearRegression</span></code></a>.</p>
<div class="versionadded">
<p><span class="versionmodified added">New in version 1.4.0.</span></p>
</div>
<dl class="py method">
<dt id="pyspark.ml.regression.LinearRegressionModel.coefficients">
<em class="property">property </em><code class="sig-name descname">coefficients</code><a class="reference external" href="https://github.com/runawayhorse001/LearningApacheSpark/blob/master/pyspark/ml/regression.py"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyspark.ml.regression.LinearRegressionModel.coefficients" title="Permalink to this definition">¶</a></dt>
<dd><p>Model coefficients.</p>
<div class="versionadded">
<p><span class="versionmodified added">New in version 2.0.0.</span></p>
</div>
</dd></dl>

<dl class="py method">
<dt id="pyspark.ml.regression.LinearRegressionModel.evaluate">
<code class="sig-name descname">evaluate</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">dataset</span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/runawayhorse001/LearningApacheSpark/blob/master/pyspark/ml/regression.py#L220-L232"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyspark.ml.regression.LinearRegressionModel.evaluate" title="Permalink to this definition">¶</a></dt>
<dd><p>Evaluates the model on a test dataset.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>dataset</strong> – Test dataset to evaluate model on, where dataset is an
instance of <code class="xref py py-class docutils literal notranslate"><span class="pre">pyspark.sql.DataFrame</span></code></p>
</dd>
</dl>
<div class="versionadded">
<p><span class="versionmodified added">New in version 2.0.0.</span></p>
</div>
</dd></dl>

<dl class="py method">
<dt id="pyspark.ml.regression.LinearRegressionModel.hasSummary">
<em class="property">property </em><code class="sig-name descname">hasSummary</code><a class="reference external" href="https://github.com/runawayhorse001/LearningApacheSpark/blob/master/pyspark/ml/regression.py"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyspark.ml.regression.LinearRegressionModel.hasSummary" title="Permalink to this definition">¶</a></dt>
<dd><p>Indicates whether a training summary exists for this model
instance.</p>
<div class="versionadded">
<p><span class="versionmodified added">New in version 2.0.0.</span></p>
</div>
</dd></dl>

<dl class="py method">
<dt id="pyspark.ml.regression.LinearRegressionModel.intercept">
<em class="property">property </em><code class="sig-name descname">intercept</code><a class="reference external" href="https://github.com/runawayhorse001/LearningApacheSpark/blob/master/pyspark/ml/regression.py"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyspark.ml.regression.LinearRegressionModel.intercept" title="Permalink to this definition">¶</a></dt>
<dd><p>Model intercept.</p>
<div class="versionadded">
<p><span class="versionmodified added">New in version 1.4.0.</span></p>
</div>
</dd></dl>

<dl class="py method">
<dt id="pyspark.ml.regression.LinearRegressionModel.scale">
<em class="property">property </em><code class="sig-name descname">scale</code><a class="reference external" href="https://github.com/runawayhorse001/LearningApacheSpark/blob/master/pyspark/ml/regression.py"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyspark.ml.regression.LinearRegressionModel.scale" title="Permalink to this definition">¶</a></dt>
<dd><p>The value by which <img class="math" src="_images/math/6830c8d8113e8b6713d8358b2cafd203bcc5277b.png" alt="\|y - X'w\|"/> is scaled down when loss is “huber”, otherwise 1.0.</p>
<div class="versionadded">
<p><span class="versionmodified added">New in version 2.3.0.</span></p>
</div>
</dd></dl>

<dl class="py method">
<dt id="pyspark.ml.regression.LinearRegressionModel.summary">
<em class="property">property </em><code class="sig-name descname">summary</code><a class="reference external" href="https://github.com/runawayhorse001/LearningApacheSpark/blob/master/pyspark/ml/regression.py"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyspark.ml.regression.LinearRegressionModel.summary" title="Permalink to this definition">¶</a></dt>
<dd><p>Gets summary (e.g. residuals, mse, r-squared ) of model on
training set. An exception is thrown if
<img class="math" src="_images/math/5c766935e8e4a480fcebe1cd549911ecd0f2babb.png" alt="trainingSummary is None"/>.</p>
<div class="versionadded">
<p><span class="versionmodified added">New in version 2.0.0.</span></p>
</div>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt id="pyspark.ml.regression.LinearRegressionSummary">
<em class="property">class </em><code class="sig-prename descclassname">pyspark.ml.regression.</code><code class="sig-name descname">LinearRegressionSummary</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">java_obj</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/runawayhorse001/LearningApacheSpark/blob/master/pyspark/ml/regression.py#L235-L438"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyspark.ml.regression.LinearRegressionSummary" title="Permalink to this definition">¶</a></dt>
<dd><div class="admonition note">
<p class="admonition-title">Note</p>
<p>Experimental</p>
</div>
<p>Linear regression results evaluated on a dataset.</p>
<div class="versionadded">
<p><span class="versionmodified added">New in version 2.0.0.</span></p>
</div>
<dl class="py method">
<dt id="pyspark.ml.regression.LinearRegressionSummary.coefficientStandardErrors">
<em class="property">property </em><code class="sig-name descname">coefficientStandardErrors</code><a class="reference external" href="https://github.com/runawayhorse001/LearningApacheSpark/blob/master/pyspark/ml/regression.py"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyspark.ml.regression.LinearRegressionSummary.coefficientStandardErrors" title="Permalink to this definition">¶</a></dt>
<dd><p>Standard error of estimated coefficients and intercept.
This value is only available when using the “normal” solver.</p>
<p>If <code class="xref py py-attr docutils literal notranslate"><span class="pre">LinearRegression.fitIntercept</span></code> is set to True,
then the last element returned corresponds to the intercept.</p>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><code class="xref py py-attr docutils literal notranslate"><span class="pre">LinearRegression.solver</span></code></p>
</div>
<div class="versionadded">
<p><span class="versionmodified added">New in version 2.0.0.</span></p>
</div>
</dd></dl>

<dl class="py method">
<dt id="pyspark.ml.regression.LinearRegressionSummary.degreesOfFreedom">
<em class="property">property </em><code class="sig-name descname">degreesOfFreedom</code><a class="reference external" href="https://github.com/runawayhorse001/LearningApacheSpark/blob/master/pyspark/ml/regression.py"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyspark.ml.regression.LinearRegressionSummary.degreesOfFreedom" title="Permalink to this definition">¶</a></dt>
<dd><p>Degrees of freedom.</p>
<div class="versionadded">
<p><span class="versionmodified added">New in version 2.2.0.</span></p>
</div>
</dd></dl>

<dl class="py method">
<dt id="pyspark.ml.regression.LinearRegressionSummary.devianceResiduals">
<em class="property">property </em><code class="sig-name descname">devianceResiduals</code><a class="reference external" href="https://github.com/runawayhorse001/LearningApacheSpark/blob/master/pyspark/ml/regression.py"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyspark.ml.regression.LinearRegressionSummary.devianceResiduals" title="Permalink to this definition">¶</a></dt>
<dd><p>The weighted residuals, the usual residuals rescaled by the
square root of the instance weights.</p>
<div class="versionadded">
<p><span class="versionmodified added">New in version 2.0.0.</span></p>
</div>
</dd></dl>

<dl class="py method">
<dt id="pyspark.ml.regression.LinearRegressionSummary.explainedVariance">
<em class="property">property </em><code class="sig-name descname">explainedVariance</code><a class="reference external" href="https://github.com/runawayhorse001/LearningApacheSpark/blob/master/pyspark/ml/regression.py"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyspark.ml.regression.LinearRegressionSummary.explainedVariance" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns the explained variance regression score.
explainedVariance = <img class="math" src="_images/math/66494865d97539d14385c3674eee9c8b7e75b2ec.png" alt="1 - \frac{variance(y - \hat{y})}{variance(y)}"/></p>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference external" href="http://en.wikipedia.org/wiki/Explained_variation">Wikipedia explain variation</a></p>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This ignores instance weights (setting all to 1.0) from
<img class="math" src="_images/math/f78f6e75e4686c64f09cd8c2cb1264e99cb591a7.png" alt="LinearRegression.weightCol"/>. This will change in later Spark
versions.</p>
</div>
<div class="versionadded">
<p><span class="versionmodified added">New in version 2.0.0.</span></p>
</div>
</dd></dl>

<dl class="py method">
<dt id="pyspark.ml.regression.LinearRegressionSummary.featuresCol">
<em class="property">property </em><code class="sig-name descname">featuresCol</code><a class="reference external" href="https://github.com/runawayhorse001/LearningApacheSpark/blob/master/pyspark/ml/regression.py"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyspark.ml.regression.LinearRegressionSummary.featuresCol" title="Permalink to this definition">¶</a></dt>
<dd><p>Field in “predictions” which gives the features of each instance
as a vector.</p>
<div class="versionadded">
<p><span class="versionmodified added">New in version 2.0.0.</span></p>
</div>
</dd></dl>

<dl class="py method">
<dt id="pyspark.ml.regression.LinearRegressionSummary.labelCol">
<em class="property">property </em><code class="sig-name descname">labelCol</code><a class="reference external" href="https://github.com/runawayhorse001/LearningApacheSpark/blob/master/pyspark/ml/regression.py"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyspark.ml.regression.LinearRegressionSummary.labelCol" title="Permalink to this definition">¶</a></dt>
<dd><p>Field in “predictions” which gives the true label of each
instance.</p>
<div class="versionadded">
<p><span class="versionmodified added">New in version 2.0.0.</span></p>
</div>
</dd></dl>

<dl class="py method">
<dt id="pyspark.ml.regression.LinearRegressionSummary.meanAbsoluteError">
<em class="property">property </em><code class="sig-name descname">meanAbsoluteError</code><a class="reference external" href="https://github.com/runawayhorse001/LearningApacheSpark/blob/master/pyspark/ml/regression.py"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyspark.ml.regression.LinearRegressionSummary.meanAbsoluteError" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns the mean absolute error, which is a risk function
corresponding to the expected value of the absolute error
loss or l1-norm loss.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This ignores instance weights (setting all to 1.0) from
<img class="math" src="_images/math/f78f6e75e4686c64f09cd8c2cb1264e99cb591a7.png" alt="LinearRegression.weightCol"/>. This will change in later Spark
versions.</p>
</div>
<div class="versionadded">
<p><span class="versionmodified added">New in version 2.0.0.</span></p>
</div>
</dd></dl>

<dl class="py method">
<dt id="pyspark.ml.regression.LinearRegressionSummary.meanSquaredError">
<em class="property">property </em><code class="sig-name descname">meanSquaredError</code><a class="reference external" href="https://github.com/runawayhorse001/LearningApacheSpark/blob/master/pyspark/ml/regression.py"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyspark.ml.regression.LinearRegressionSummary.meanSquaredError" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns the mean squared error, which is a risk function
corresponding to the expected value of the squared error
loss or quadratic loss.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This ignores instance weights (setting all to 1.0) from
<img class="math" src="_images/math/f78f6e75e4686c64f09cd8c2cb1264e99cb591a7.png" alt="LinearRegression.weightCol"/>. This will change in later Spark
versions.</p>
</div>
<div class="versionadded">
<p><span class="versionmodified added">New in version 2.0.0.</span></p>
</div>
</dd></dl>

<dl class="py method">
<dt id="pyspark.ml.regression.LinearRegressionSummary.numInstances">
<em class="property">property </em><code class="sig-name descname">numInstances</code><a class="reference external" href="https://github.com/runawayhorse001/LearningApacheSpark/blob/master/pyspark/ml/regression.py"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyspark.ml.regression.LinearRegressionSummary.numInstances" title="Permalink to this definition">¶</a></dt>
<dd><p>Number of instances in DataFrame predictions</p>
<div class="versionadded">
<p><span class="versionmodified added">New in version 2.0.0.</span></p>
</div>
</dd></dl>

<dl class="py method">
<dt id="pyspark.ml.regression.LinearRegressionSummary.pValues">
<em class="property">property </em><code class="sig-name descname">pValues</code><a class="reference external" href="https://github.com/runawayhorse001/LearningApacheSpark/blob/master/pyspark/ml/regression.py"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyspark.ml.regression.LinearRegressionSummary.pValues" title="Permalink to this definition">¶</a></dt>
<dd><p>Two-sided p-value of estimated coefficients and intercept.
This value is only available when using the “normal” solver.</p>
<p>If <code class="xref py py-attr docutils literal notranslate"><span class="pre">LinearRegression.fitIntercept</span></code> is set to True,
then the last element returned corresponds to the intercept.</p>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><code class="xref py py-attr docutils literal notranslate"><span class="pre">LinearRegression.solver</span></code></p>
</div>
<div class="versionadded">
<p><span class="versionmodified added">New in version 2.0.0.</span></p>
</div>
</dd></dl>

<dl class="py method">
<dt id="pyspark.ml.regression.LinearRegressionSummary.predictionCol">
<em class="property">property </em><code class="sig-name descname">predictionCol</code><a class="reference external" href="https://github.com/runawayhorse001/LearningApacheSpark/blob/master/pyspark/ml/regression.py"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyspark.ml.regression.LinearRegressionSummary.predictionCol" title="Permalink to this definition">¶</a></dt>
<dd><p>Field in “predictions” which gives the predicted value of
the label at each instance.</p>
<div class="versionadded">
<p><span class="versionmodified added">New in version 2.0.0.</span></p>
</div>
</dd></dl>

<dl class="py method">
<dt id="pyspark.ml.regression.LinearRegressionSummary.predictions">
<em class="property">property </em><code class="sig-name descname">predictions</code><a class="reference external" href="https://github.com/runawayhorse001/LearningApacheSpark/blob/master/pyspark/ml/regression.py"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyspark.ml.regression.LinearRegressionSummary.predictions" title="Permalink to this definition">¶</a></dt>
<dd><p>Dataframe outputted by the model’s <img class="math" src="_images/math/1974e57a2d71dccf63f20603f513258811e97596.png" alt="transform"/> method.</p>
<div class="versionadded">
<p><span class="versionmodified added">New in version 2.0.0.</span></p>
</div>
</dd></dl>

<dl class="py method">
<dt id="pyspark.ml.regression.LinearRegressionSummary.r2">
<em class="property">property </em><code class="sig-name descname">r2</code><a class="reference external" href="https://github.com/runawayhorse001/LearningApacheSpark/blob/master/pyspark/ml/regression.py"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyspark.ml.regression.LinearRegressionSummary.r2" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns R^2, the coefficient of determination.</p>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference external" href="http://en.wikipedia.org/wiki/Coefficient_of_determination">Wikipedia coefficient of determination</a></p>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This ignores instance weights (setting all to 1.0) from
<img class="math" src="_images/math/f78f6e75e4686c64f09cd8c2cb1264e99cb591a7.png" alt="LinearRegression.weightCol"/>. This will change in later Spark
versions.</p>
</div>
<div class="versionadded">
<p><span class="versionmodified added">New in version 2.0.0.</span></p>
</div>
</dd></dl>

<dl class="py method">
<dt id="pyspark.ml.regression.LinearRegressionSummary.r2adj">
<em class="property">property </em><code class="sig-name descname">r2adj</code><a class="reference external" href="https://github.com/runawayhorse001/LearningApacheSpark/blob/master/pyspark/ml/regression.py"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyspark.ml.regression.LinearRegressionSummary.r2adj" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns Adjusted R^2, the adjusted coefficient of determination.</p>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference external" href="https://en.wikipedia.org/wiki/Coefficient_of_determination#Adjusted_R2">Wikipedia coefficient of determination, Adjusted R^2</a></p>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This ignores instance weights (setting all to 1.0) from
<img class="math" src="_images/math/f78f6e75e4686c64f09cd8c2cb1264e99cb591a7.png" alt="LinearRegression.weightCol"/>. This will change in later Spark versions.</p>
</div>
<div class="versionadded">
<p><span class="versionmodified added">New in version 2.4.0.</span></p>
</div>
</dd></dl>

<dl class="py method">
<dt id="pyspark.ml.regression.LinearRegressionSummary.residuals">
<em class="property">property </em><code class="sig-name descname">residuals</code><a class="reference external" href="https://github.com/runawayhorse001/LearningApacheSpark/blob/master/pyspark/ml/regression.py"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyspark.ml.regression.LinearRegressionSummary.residuals" title="Permalink to this definition">¶</a></dt>
<dd><p>Residuals (label - predicted value)</p>
<div class="versionadded">
<p><span class="versionmodified added">New in version 2.0.0.</span></p>
</div>
</dd></dl>

<dl class="py method">
<dt id="pyspark.ml.regression.LinearRegressionSummary.rootMeanSquaredError">
<em class="property">property </em><code class="sig-name descname">rootMeanSquaredError</code><a class="reference external" href="https://github.com/runawayhorse001/LearningApacheSpark/blob/master/pyspark/ml/regression.py"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyspark.ml.regression.LinearRegressionSummary.rootMeanSquaredError" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns the root mean squared error, which is defined as the
square root of the mean squared error.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This ignores instance weights (setting all to 1.0) from
<img class="math" src="_images/math/f78f6e75e4686c64f09cd8c2cb1264e99cb591a7.png" alt="LinearRegression.weightCol"/>. This will change in later Spark
versions.</p>
</div>
<div class="versionadded">
<p><span class="versionmodified added">New in version 2.0.0.</span></p>
</div>
</dd></dl>

<dl class="py method">
<dt id="pyspark.ml.regression.LinearRegressionSummary.tValues">
<em class="property">property </em><code class="sig-name descname">tValues</code><a class="reference external" href="https://github.com/runawayhorse001/LearningApacheSpark/blob/master/pyspark/ml/regression.py"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyspark.ml.regression.LinearRegressionSummary.tValues" title="Permalink to this definition">¶</a></dt>
<dd><p>T-statistic of estimated coefficients and intercept.
This value is only available when using the “normal” solver.</p>
<p>If <code class="xref py py-attr docutils literal notranslate"><span class="pre">LinearRegression.fitIntercept</span></code> is set to True,
then the last element returned corresponds to the intercept.</p>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><code class="xref py py-attr docutils literal notranslate"><span class="pre">LinearRegression.solver</span></code></p>
</div>
<div class="versionadded">
<p><span class="versionmodified added">New in version 2.0.0.</span></p>
</div>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt id="pyspark.ml.regression.LinearRegressionTrainingSummary">
<em class="property">class </em><code class="sig-prename descclassname">pyspark.ml.regression.</code><code class="sig-name descname">LinearRegressionTrainingSummary</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">java_obj</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/runawayhorse001/LearningApacheSpark/blob/master/pyspark/ml/regression.py#L442-L473"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyspark.ml.regression.LinearRegressionTrainingSummary" title="Permalink to this definition">¶</a></dt>
<dd><div class="admonition note">
<p class="admonition-title">Note</p>
<p>Experimental</p>
</div>
<p>Linear regression training results. Currently, the training summary ignores the
training weights except for the objective trace.</p>
<div class="versionadded">
<p><span class="versionmodified added">New in version 2.0.0.</span></p>
</div>
<dl class="py method">
<dt id="pyspark.ml.regression.LinearRegressionTrainingSummary.objectiveHistory">
<em class="property">property </em><code class="sig-name descname">objectiveHistory</code><a class="reference external" href="https://github.com/runawayhorse001/LearningApacheSpark/blob/master/pyspark/ml/regression.py"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyspark.ml.regression.LinearRegressionTrainingSummary.objectiveHistory" title="Permalink to this definition">¶</a></dt>
<dd><p>Objective function (scaled loss + regularization) at each
iteration.
This value is only available when using the “l-bfgs” solver.</p>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><code class="xref py py-attr docutils literal notranslate"><span class="pre">LinearRegression.solver</span></code></p>
</div>
<div class="versionadded">
<p><span class="versionmodified added">New in version 2.0.0.</span></p>
</div>
</dd></dl>

<dl class="py method">
<dt id="pyspark.ml.regression.LinearRegressionTrainingSummary.totalIterations">
<em class="property">property </em><code class="sig-name descname">totalIterations</code><a class="reference external" href="https://github.com/runawayhorse001/LearningApacheSpark/blob/master/pyspark/ml/regression.py"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyspark.ml.regression.LinearRegressionTrainingSummary.totalIterations" title="Permalink to this definition">¶</a></dt>
<dd><p>Number of training iterations until termination.
This value is only available when using the “l-bfgs” solver.</p>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><code class="xref py py-attr docutils literal notranslate"><span class="pre">LinearRegression.solver</span></code></p>
</div>
<div class="versionadded">
<p><span class="versionmodified added">New in version 2.0.0.</span></p>
</div>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt id="pyspark.ml.regression.RandomForestRegressionModel">
<em class="property">class </em><code class="sig-prename descclassname">pyspark.ml.regression.</code><code class="sig-name descname">RandomForestRegressionModel</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">java_model</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/runawayhorse001/LearningApacheSpark/blob/master/pyspark/ml/regression.py#L1002-L1029"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyspark.ml.regression.RandomForestRegressionModel" title="Permalink to this definition">¶</a></dt>
<dd><p>Model fitted by <a class="reference internal" href="#pyspark.ml.regression.RandomForestRegressor" title="pyspark.ml.regression.RandomForestRegressor"><code class="xref py py-class docutils literal notranslate"><span class="pre">RandomForestRegressor</span></code></a>.</p>
<div class="versionadded">
<p><span class="versionmodified added">New in version 1.4.0.</span></p>
</div>
<dl class="py method">
<dt id="pyspark.ml.regression.RandomForestRegressionModel.featureImportances">
<em class="property">property </em><code class="sig-name descname">featureImportances</code><a class="reference external" href="https://github.com/runawayhorse001/LearningApacheSpark/blob/master/pyspark/ml/regression.py"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyspark.ml.regression.RandomForestRegressionModel.featureImportances" title="Permalink to this definition">¶</a></dt>
<dd><p>Estimate of the importance of each feature.</p>
<p>Each feature’s importance is the average of its importance across all trees in the ensemble
The importance vector is normalized to sum to 1. This method is suggested by Hastie et al.
(Hastie, Tibshirani, Friedman. “The Elements of Statistical Learning, 2nd Edition.” 2001.)
and follows the implementation from scikit-learn.</p>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference internal" href="#pyspark.ml.regression.DecisionTreeRegressionModel.featureImportances" title="pyspark.ml.regression.DecisionTreeRegressionModel.featureImportances"><code class="xref py py-attr docutils literal notranslate"><span class="pre">DecisionTreeRegressionModel.featureImportances</span></code></a></p>
</div>
<div class="versionadded">
<p><span class="versionmodified added">New in version 2.0.0.</span></p>
</div>
</dd></dl>

<dl class="py method">
<dt id="pyspark.ml.regression.RandomForestRegressionModel.trees">
<em class="property">property </em><code class="sig-name descname">trees</code><a class="reference external" href="https://github.com/runawayhorse001/LearningApacheSpark/blob/master/pyspark/ml/regression.py"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyspark.ml.regression.RandomForestRegressionModel.trees" title="Permalink to this definition">¶</a></dt>
<dd><p>These have null parent Estimators.</p>
<div class="versionadded">
<p><span class="versionmodified added">New in version 2.0.0.</span></p>
</div>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p>Trees in this ensemble. Warning</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt id="pyspark.ml.regression.RandomForestRegressor">
<em class="property">class </em><code class="sig-prename descclassname">pyspark.ml.regression.</code><code class="sig-name descname">RandomForestRegressor</code><span class="sig-paren">(</span><em class="sig-param"><span class="o">*</span><span class="n">args</span></em>, <em class="sig-param"><span class="o">**</span><span class="n">kwargs</span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/runawayhorse001/LearningApacheSpark/blob/master/pyspark/ml/regression.py#L905-L999"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyspark.ml.regression.RandomForestRegressor" title="Permalink to this definition">¶</a></dt>
<dd><p><a class="reference external" href="http://en.wikipedia.org/wiki/Random_forest">Random Forest</a>
learning algorithm for regression.
It supports both continuous and categorical features.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">numpy</span> <span class="kn">import</span> <span class="n">allclose</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">pyspark.ml.linalg</span> <span class="kn">import</span> <span class="n">Vectors</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">df</span> <span class="o">=</span> <span class="n">spark</span><span class="o">.</span><span class="n">createDataFrame</span><span class="p">([</span>
<span class="gp">... </span>    <span class="p">(</span><span class="mf">1.0</span><span class="p">,</span> <span class="n">Vectors</span><span class="o">.</span><span class="n">dense</span><span class="p">(</span><span class="mf">1.0</span><span class="p">)),</span>
<span class="gp">... </span>    <span class="p">(</span><span class="mf">0.0</span><span class="p">,</span> <span class="n">Vectors</span><span class="o">.</span><span class="n">sparse</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="p">[],</span> <span class="p">[]))],</span> <span class="p">[</span><span class="s2">&quot;label&quot;</span><span class="p">,</span> <span class="s2">&quot;features&quot;</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">rf</span> <span class="o">=</span> <span class="n">RandomForestRegressor</span><span class="p">(</span><span class="n">numTrees</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">maxDepth</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">seed</span><span class="o">=</span><span class="mi">42</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">model</span> <span class="o">=</span> <span class="n">rf</span><span class="o">.</span><span class="n">fit</span><span class="p">(</span><span class="n">df</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">model</span><span class="o">.</span><span class="n">featureImportances</span>
<span class="go">SparseVector(1, {0: 1.0})</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">allclose</span><span class="p">(</span><span class="n">model</span><span class="o">.</span><span class="n">treeWeights</span><span class="p">,</span> <span class="p">[</span><span class="mf">1.0</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">])</span>
<span class="go">True</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">test0</span> <span class="o">=</span> <span class="n">spark</span><span class="o">.</span><span class="n">createDataFrame</span><span class="p">([(</span><span class="n">Vectors</span><span class="o">.</span><span class="n">dense</span><span class="p">(</span><span class="o">-</span><span class="mf">1.0</span><span class="p">),)],</span> <span class="p">[</span><span class="s2">&quot;features&quot;</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">model</span><span class="o">.</span><span class="n">transform</span><span class="p">(</span><span class="n">test0</span><span class="p">)</span><span class="o">.</span><span class="n">head</span><span class="p">()</span><span class="o">.</span><span class="n">prediction</span>
<span class="go">0.0</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">model</span><span class="o">.</span><span class="n">numFeatures</span>
<span class="go">1</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">model</span><span class="o">.</span><span class="n">trees</span>
<span class="go">[DecisionTreeRegressionModel (uid=...) of depth..., DecisionTreeRegressionModel...]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">model</span><span class="o">.</span><span class="n">getNumTrees</span>
<span class="go">2</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">test1</span> <span class="o">=</span> <span class="n">spark</span><span class="o">.</span><span class="n">createDataFrame</span><span class="p">([(</span><span class="n">Vectors</span><span class="o">.</span><span class="n">sparse</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="p">[</span><span class="mf">1.0</span><span class="p">]),)],</span> <span class="p">[</span><span class="s2">&quot;features&quot;</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">model</span><span class="o">.</span><span class="n">transform</span><span class="p">(</span><span class="n">test1</span><span class="p">)</span><span class="o">.</span><span class="n">head</span><span class="p">()</span><span class="o">.</span><span class="n">prediction</span>
<span class="go">0.5</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">rfr_path</span> <span class="o">=</span> <span class="n">temp_path</span> <span class="o">+</span> <span class="s2">&quot;/rfr&quot;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">rf</span><span class="o">.</span><span class="n">save</span><span class="p">(</span><span class="n">rfr_path</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">rf2</span> <span class="o">=</span> <span class="n">RandomForestRegressor</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="n">rfr_path</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">rf2</span><span class="o">.</span><span class="n">getNumTrees</span><span class="p">()</span>
<span class="go">2</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">model_path</span> <span class="o">=</span> <span class="n">temp_path</span> <span class="o">+</span> <span class="s2">&quot;/rfr_model&quot;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">model</span><span class="o">.</span><span class="n">save</span><span class="p">(</span><span class="n">model_path</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">model2</span> <span class="o">=</span> <span class="n">RandomForestRegressionModel</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="n">model_path</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">model</span><span class="o">.</span><span class="n">featureImportances</span> <span class="o">==</span> <span class="n">model2</span><span class="o">.</span><span class="n">featureImportances</span>
<span class="go">True</span>
</pre></div>
</div>
<div class="versionadded">
<p><span class="versionmodified added">New in version 1.4.0.</span></p>
</div>
<dl class="py method">
<dt id="pyspark.ml.regression.RandomForestRegressor.setFeatureSubsetStrategy">
<code class="sig-name descname">setFeatureSubsetStrategy</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">value</span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/runawayhorse001/LearningApacheSpark/blob/master/pyspark/ml/regression.py#L994-L999"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyspark.ml.regression.RandomForestRegressor.setFeatureSubsetStrategy" title="Permalink to this definition">¶</a></dt>
<dd><p>Sets the value of <code class="xref py py-attr docutils literal notranslate"><span class="pre">featureSubsetStrategy</span></code>.</p>
<div class="versionadded">
<p><span class="versionmodified added">New in version 2.4.0.</span></p>
</div>
</dd></dl>

<dl class="py method">
<dt id="pyspark.ml.regression.RandomForestRegressor.setParams">
<code class="sig-name descname">setParams</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">self</span></em>, <em class="sig-param"><span class="n">featuresCol</span><span class="o">=</span><span class="default_value">'features'</span></em>, <em class="sig-param"><span class="n">labelCol</span><span class="o">=</span><span class="default_value">'label'</span></em>, <em class="sig-param"><span class="n">predictionCol</span><span class="o">=</span><span class="default_value">'prediction'</span></em>, <em class="sig-param"><span class="n">maxDepth</span><span class="o">=</span><span class="default_value">5</span></em>, <em class="sig-param"><span class="n">maxBins</span><span class="o">=</span><span class="default_value">32</span></em>, <em class="sig-param"><span class="n">minInstancesPerNode</span><span class="o">=</span><span class="default_value">1</span></em>, <em class="sig-param"><span class="n">minInfoGain</span><span class="o">=</span><span class="default_value">0.0</span></em>, <em class="sig-param"><span class="n">maxMemoryInMB</span><span class="o">=</span><span class="default_value">256</span></em>, <em class="sig-param"><span class="n">cacheNodeIds</span><span class="o">=</span><span class="default_value">False</span></em>, <em class="sig-param"><span class="n">checkpointInterval</span><span class="o">=</span><span class="default_value">10</span></em>, <em class="sig-param"><span class="n">impurity</span><span class="o">=</span><span class="default_value">'variance'</span></em>, <em class="sig-param"><span class="n">subsamplingRate</span><span class="o">=</span><span class="default_value">1.0</span></em>, <em class="sig-param"><span class="n">seed</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">numTrees</span><span class="o">=</span><span class="default_value">20</span></em>, <em class="sig-param"><span class="n">featureSubsetStrategy</span><span class="o">=</span><span class="default_value">'auto'</span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/runawayhorse001/LearningApacheSpark/blob/master/pyspark/__init__.py#L973-L989"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyspark.ml.regression.RandomForestRegressor.setParams" title="Permalink to this definition">¶</a></dt>
<dd><p>Sets params for linear regression.</p>
<div class="versionadded">
<p><span class="versionmodified added">New in version 1.4.0.</span></p>
</div>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="module-pyspark.ml.classification">
<span id="classification-api"></span><h2><span class="section-number">27.3. </span>Classification API<a class="headerlink" href="#module-pyspark.ml.classification" title="Permalink to this headline">¶</a></h2>
<dl class="py class">
<dt id="pyspark.ml.classification.BinaryLogisticRegressionSummary">
<em class="property">class </em><code class="sig-prename descclassname">pyspark.ml.classification.</code><code class="sig-name descname">BinaryLogisticRegressionSummary</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">java_obj</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/runawayhorse001/LearningApacheSpark/blob/master/pyspark/ml/classification.py#L759-L851"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyspark.ml.classification.BinaryLogisticRegressionSummary" title="Permalink to this definition">¶</a></dt>
<dd><div class="admonition note">
<p class="admonition-title">Note</p>
<p>Experimental</p>
</div>
<p>Binary Logistic regression results for a given model.</p>
<div class="versionadded">
<p><span class="versionmodified added">New in version 2.0.0.</span></p>
</div>
<dl class="py method">
<dt id="pyspark.ml.classification.BinaryLogisticRegressionSummary.areaUnderROC">
<em class="property">property </em><code class="sig-name descname">areaUnderROC</code><a class="reference external" href="https://github.com/runawayhorse001/LearningApacheSpark/blob/master/pyspark/ml/classification.py"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyspark.ml.classification.BinaryLogisticRegressionSummary.areaUnderROC" title="Permalink to this definition">¶</a></dt>
<dd><p>Computes the area under the receiver operating characteristic
(ROC) curve.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This ignores instance weights (setting all to 1.0) from
<img class="math" src="_images/math/446224a64a483d51891354db9a65af44f4b680c0.png" alt="LogisticRegression.weightCol"/>. This will change in later Spark
versions.</p>
</div>
<div class="versionadded">
<p><span class="versionmodified added">New in version 2.0.0.</span></p>
</div>
</dd></dl>

<dl class="py method">
<dt id="pyspark.ml.classification.BinaryLogisticRegressionSummary.fMeasureByThreshold">
<em class="property">property </em><code class="sig-name descname">fMeasureByThreshold</code><a class="reference external" href="https://github.com/runawayhorse001/LearningApacheSpark/blob/master/pyspark/ml/classification.py"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyspark.ml.classification.BinaryLogisticRegressionSummary.fMeasureByThreshold" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns a dataframe with two fields (threshold, F-Measure) curve
with beta = 1.0.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This ignores instance weights (setting all to 1.0) from
<img class="math" src="_images/math/446224a64a483d51891354db9a65af44f4b680c0.png" alt="LogisticRegression.weightCol"/>. This will change in later Spark
versions.</p>
</div>
<div class="versionadded">
<p><span class="versionmodified added">New in version 2.0.0.</span></p>
</div>
</dd></dl>

<dl class="py method">
<dt id="pyspark.ml.classification.BinaryLogisticRegressionSummary.pr">
<em class="property">property </em><code class="sig-name descname">pr</code><a class="reference external" href="https://github.com/runawayhorse001/LearningApacheSpark/blob/master/pyspark/ml/classification.py"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyspark.ml.classification.BinaryLogisticRegressionSummary.pr" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns the precision-recall curve, which is a Dataframe
containing two fields recall, precision with (0.0, 1.0) prepended
to it.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This ignores instance weights (setting all to 1.0) from
<img class="math" src="_images/math/446224a64a483d51891354db9a65af44f4b680c0.png" alt="LogisticRegression.weightCol"/>. This will change in later Spark
versions.</p>
</div>
<div class="versionadded">
<p><span class="versionmodified added">New in version 2.0.0.</span></p>
</div>
</dd></dl>

<dl class="py method">
<dt id="pyspark.ml.classification.BinaryLogisticRegressionSummary.precisionByThreshold">
<em class="property">property </em><code class="sig-name descname">precisionByThreshold</code><a class="reference external" href="https://github.com/runawayhorse001/LearningApacheSpark/blob/master/pyspark/ml/classification.py"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyspark.ml.classification.BinaryLogisticRegressionSummary.precisionByThreshold" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns a dataframe with two fields (threshold, precision) curve.
Every possible probability obtained in transforming the dataset
are used as thresholds used in calculating the precision.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This ignores instance weights (setting all to 1.0) from
<img class="math" src="_images/math/446224a64a483d51891354db9a65af44f4b680c0.png" alt="LogisticRegression.weightCol"/>. This will change in later Spark
versions.</p>
</div>
<div class="versionadded">
<p><span class="versionmodified added">New in version 2.0.0.</span></p>
</div>
</dd></dl>

<dl class="py method">
<dt id="pyspark.ml.classification.BinaryLogisticRegressionSummary.recallByThreshold">
<em class="property">property </em><code class="sig-name descname">recallByThreshold</code><a class="reference external" href="https://github.com/runawayhorse001/LearningApacheSpark/blob/master/pyspark/ml/classification.py"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyspark.ml.classification.BinaryLogisticRegressionSummary.recallByThreshold" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns a dataframe with two fields (threshold, recall) curve.
Every possible probability obtained in transforming the dataset
are used as thresholds used in calculating the recall.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This ignores instance weights (setting all to 1.0) from
<img class="math" src="_images/math/446224a64a483d51891354db9a65af44f4b680c0.png" alt="LogisticRegression.weightCol"/>. This will change in later Spark
versions.</p>
</div>
<div class="versionadded">
<p><span class="versionmodified added">New in version 2.0.0.</span></p>
</div>
</dd></dl>

<dl class="py method">
<dt id="pyspark.ml.classification.BinaryLogisticRegressionSummary.roc">
<em class="property">property </em><code class="sig-name descname">roc</code><a class="reference external" href="https://github.com/runawayhorse001/LearningApacheSpark/blob/master/pyspark/ml/classification.py"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyspark.ml.classification.BinaryLogisticRegressionSummary.roc" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns the receiver operating characteristic (ROC) curve,
which is a Dataframe having two fields (FPR, TPR) with
(0.0, 0.0) prepended and (1.0, 1.0) appended to it.</p>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference external" href="http://en.wikipedia.org/wiki/Receiver_operating_characteristic">Wikipedia reference</a></p>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This ignores instance weights (setting all to 1.0) from
<img class="math" src="_images/math/446224a64a483d51891354db9a65af44f4b680c0.png" alt="LogisticRegression.weightCol"/>. This will change in later Spark
versions.</p>
</div>
<div class="versionadded">
<p><span class="versionmodified added">New in version 2.0.0.</span></p>
</div>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt id="pyspark.ml.classification.BinaryLogisticRegressionTrainingSummary">
<em class="property">class </em><code class="sig-prename descclassname">pyspark.ml.classification.</code><code class="sig-name descname">BinaryLogisticRegressionTrainingSummary</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">java_obj</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/runawayhorse001/LearningApacheSpark/blob/master/pyspark/ml/classification.py#L855-L864"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyspark.ml.classification.BinaryLogisticRegressionTrainingSummary" title="Permalink to this definition">¶</a></dt>
<dd><div class="admonition note">
<p class="admonition-title">Note</p>
<p>Experimental</p>
</div>
<p>Binary Logistic regression training results for a given model.</p>
<div class="versionadded">
<p><span class="versionmodified added">New in version 2.0.0.</span></p>
</div>
</dd></dl>

<dl class="py class">
<dt id="pyspark.ml.classification.DecisionTreeClassificationModel">
<em class="property">class </em><code class="sig-prename descclassname">pyspark.ml.classification.</code><code class="sig-name descname">DecisionTreeClassificationModel</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">java_model</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/runawayhorse001/LearningApacheSpark/blob/master/pyspark/ml/classification.py#L1011-L1038"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyspark.ml.classification.DecisionTreeClassificationModel" title="Permalink to this definition">¶</a></dt>
<dd><p>Model fitted by DecisionTreeClassifier.</p>
<div class="versionadded">
<p><span class="versionmodified added">New in version 1.4.0.</span></p>
</div>
<dl class="py method">
<dt id="pyspark.ml.classification.DecisionTreeClassificationModel.featureImportances">
<em class="property">property </em><code class="sig-name descname">featureImportances</code><a class="reference external" href="https://github.com/runawayhorse001/LearningApacheSpark/blob/master/pyspark/ml/classification.py"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyspark.ml.classification.DecisionTreeClassificationModel.featureImportances" title="Permalink to this definition">¶</a></dt>
<dd><p>Estimate of the importance of each feature.</p>
<p>This generalizes the idea of “Gini” importance to other losses,
following the explanation of Gini importance from “Random Forests” documentation
by Leo Breiman and Adele Cutler, and following the implementation from scikit-learn.</p>
<dl class="simple">
<dt>This feature importance is calculated as follows:</dt><dd><ul class="simple">
<li><p>importance(feature j) = sum (over nodes which split on feature j) of the gain,
where gain is scaled by the number of instances passing through node</p></li>
<li><p>Normalize importances for tree to sum to 1.</p></li>
</ul>
</dd>
</dl>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Feature importance for single decision trees can have high variance due to
correlated predictor variables. Consider using a <a class="reference internal" href="#pyspark.ml.classification.RandomForestClassifier" title="pyspark.ml.classification.RandomForestClassifier"><code class="xref py py-class docutils literal notranslate"><span class="pre">RandomForestClassifier</span></code></a>
to determine feature importance instead.</p>
</div>
<div class="versionadded">
<p><span class="versionmodified added">New in version 2.0.0.</span></p>
</div>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt id="pyspark.ml.classification.DecisionTreeClassifier">
<em class="property">class </em><code class="sig-prename descclassname">pyspark.ml.classification.</code><code class="sig-name descname">DecisionTreeClassifier</code><span class="sig-paren">(</span><em class="sig-param"><span class="o">*</span><span class="n">args</span></em>, <em class="sig-param"><span class="o">**</span><span class="n">kwargs</span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/runawayhorse001/LearningApacheSpark/blob/master/pyspark/ml/classification.py#L908-L1007"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyspark.ml.classification.DecisionTreeClassifier" title="Permalink to this definition">¶</a></dt>
<dd><p><a class="reference external" href="http://en.wikipedia.org/wiki/Decision_tree_learning">Decision tree</a>
learning algorithm for classification.
It supports both binary and multiclass labels, as well as both continuous and categorical
features.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">pyspark.ml.linalg</span> <span class="kn">import</span> <span class="n">Vectors</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">pyspark.ml.feature</span> <span class="kn">import</span> <span class="n">StringIndexer</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">df</span> <span class="o">=</span> <span class="n">spark</span><span class="o">.</span><span class="n">createDataFrame</span><span class="p">([</span>
<span class="gp">... </span>    <span class="p">(</span><span class="mf">1.0</span><span class="p">,</span> <span class="n">Vectors</span><span class="o">.</span><span class="n">dense</span><span class="p">(</span><span class="mf">1.0</span><span class="p">)),</span>
<span class="gp">... </span>    <span class="p">(</span><span class="mf">0.0</span><span class="p">,</span> <span class="n">Vectors</span><span class="o">.</span><span class="n">sparse</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="p">[],</span> <span class="p">[]))],</span> <span class="p">[</span><span class="s2">&quot;label&quot;</span><span class="p">,</span> <span class="s2">&quot;features&quot;</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">stringIndexer</span> <span class="o">=</span> <span class="n">StringIndexer</span><span class="p">(</span><span class="n">inputCol</span><span class="o">=</span><span class="s2">&quot;label&quot;</span><span class="p">,</span> <span class="n">outputCol</span><span class="o">=</span><span class="s2">&quot;indexed&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">si_model</span> <span class="o">=</span> <span class="n">stringIndexer</span><span class="o">.</span><span class="n">fit</span><span class="p">(</span><span class="n">df</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">td</span> <span class="o">=</span> <span class="n">si_model</span><span class="o">.</span><span class="n">transform</span><span class="p">(</span><span class="n">df</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">dt</span> <span class="o">=</span> <span class="n">DecisionTreeClassifier</span><span class="p">(</span><span class="n">maxDepth</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">labelCol</span><span class="o">=</span><span class="s2">&quot;indexed&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">model</span> <span class="o">=</span> <span class="n">dt</span><span class="o">.</span><span class="n">fit</span><span class="p">(</span><span class="n">td</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">model</span><span class="o">.</span><span class="n">numNodes</span>
<span class="go">3</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">model</span><span class="o">.</span><span class="n">depth</span>
<span class="go">1</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">model</span><span class="o">.</span><span class="n">featureImportances</span>
<span class="go">SparseVector(1, {0: 1.0})</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">model</span><span class="o">.</span><span class="n">numFeatures</span>
<span class="go">1</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">model</span><span class="o">.</span><span class="n">numClasses</span>
<span class="go">2</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">model</span><span class="o">.</span><span class="n">toDebugString</span><span class="p">)</span>
<span class="go">DecisionTreeClassificationModel (uid=...) of depth 1 with 3 nodes...</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">test0</span> <span class="o">=</span> <span class="n">spark</span><span class="o">.</span><span class="n">createDataFrame</span><span class="p">([(</span><span class="n">Vectors</span><span class="o">.</span><span class="n">dense</span><span class="p">(</span><span class="o">-</span><span class="mf">1.0</span><span class="p">),)],</span> <span class="p">[</span><span class="s2">&quot;features&quot;</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">result</span> <span class="o">=</span> <span class="n">model</span><span class="o">.</span><span class="n">transform</span><span class="p">(</span><span class="n">test0</span><span class="p">)</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">result</span><span class="o">.</span><span class="n">prediction</span>
<span class="go">0.0</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">result</span><span class="o">.</span><span class="n">probability</span>
<span class="go">DenseVector([1.0, 0.0])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">result</span><span class="o">.</span><span class="n">rawPrediction</span>
<span class="go">DenseVector([1.0, 0.0])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">test1</span> <span class="o">=</span> <span class="n">spark</span><span class="o">.</span><span class="n">createDataFrame</span><span class="p">([(</span><span class="n">Vectors</span><span class="o">.</span><span class="n">sparse</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="p">[</span><span class="mf">1.0</span><span class="p">]),)],</span> <span class="p">[</span><span class="s2">&quot;features&quot;</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">model</span><span class="o">.</span><span class="n">transform</span><span class="p">(</span><span class="n">test1</span><span class="p">)</span><span class="o">.</span><span class="n">head</span><span class="p">()</span><span class="o">.</span><span class="n">prediction</span>
<span class="go">1.0</span>
</pre></div>
</div>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">dtc_path</span> <span class="o">=</span> <span class="n">temp_path</span> <span class="o">+</span> <span class="s2">&quot;/dtc&quot;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">dt</span><span class="o">.</span><span class="n">save</span><span class="p">(</span><span class="n">dtc_path</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">dt2</span> <span class="o">=</span> <span class="n">DecisionTreeClassifier</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="n">dtc_path</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">dt2</span><span class="o">.</span><span class="n">getMaxDepth</span><span class="p">()</span>
<span class="go">2</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">model_path</span> <span class="o">=</span> <span class="n">temp_path</span> <span class="o">+</span> <span class="s2">&quot;/dtc_model&quot;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">model</span><span class="o">.</span><span class="n">save</span><span class="p">(</span><span class="n">model_path</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">model2</span> <span class="o">=</span> <span class="n">DecisionTreeClassificationModel</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="n">model_path</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">model</span><span class="o">.</span><span class="n">featureImportances</span> <span class="o">==</span> <span class="n">model2</span><span class="o">.</span><span class="n">featureImportances</span>
<span class="go">True</span>
</pre></div>
</div>
<div class="versionadded">
<p><span class="versionmodified added">New in version 1.4.0.</span></p>
</div>
<dl class="py method">
<dt id="pyspark.ml.classification.DecisionTreeClassifier.setParams">
<code class="sig-name descname">setParams</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">self</span></em>, <em class="sig-param"><span class="n">featuresCol</span><span class="o">=</span><span class="default_value">'features'</span></em>, <em class="sig-param"><span class="n">labelCol</span><span class="o">=</span><span class="default_value">'label'</span></em>, <em class="sig-param"><span class="n">predictionCol</span><span class="o">=</span><span class="default_value">'prediction'</span></em>, <em class="sig-param"><span class="n">probabilityCol</span><span class="o">=</span><span class="default_value">'probability'</span></em>, <em class="sig-param"><span class="n">rawPredictionCol</span><span class="o">=</span><span class="default_value">'rawPrediction'</span></em>, <em class="sig-param"><span class="n">maxDepth</span><span class="o">=</span><span class="default_value">5</span></em>, <em class="sig-param"><span class="n">maxBins</span><span class="o">=</span><span class="default_value">32</span></em>, <em class="sig-param"><span class="n">minInstancesPerNode</span><span class="o">=</span><span class="default_value">1</span></em>, <em class="sig-param"><span class="n">minInfoGain</span><span class="o">=</span><span class="default_value">0.0</span></em>, <em class="sig-param"><span class="n">maxMemoryInMB</span><span class="o">=</span><span class="default_value">256</span></em>, <em class="sig-param"><span class="n">cacheNodeIds</span><span class="o">=</span><span class="default_value">False</span></em>, <em class="sig-param"><span class="n">checkpointInterval</span><span class="o">=</span><span class="default_value">10</span></em>, <em class="sig-param"><span class="n">impurity</span><span class="o">=</span><span class="default_value">'gini'</span></em>, <em class="sig-param"><span class="n">seed</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/runawayhorse001/LearningApacheSpark/blob/master/pyspark/__init__.py#L988-L1004"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyspark.ml.classification.DecisionTreeClassifier.setParams" title="Permalink to this definition">¶</a></dt>
<dd><p>Sets params for the DecisionTreeClassifier.</p>
<div class="versionadded">
<p><span class="versionmodified added">New in version 1.4.0.</span></p>
</div>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt id="pyspark.ml.classification.GBTClassificationModel">
<em class="property">class </em><code class="sig-prename descclassname">pyspark.ml.classification.</code><code class="sig-name descname">GBTClassificationModel</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">java_model</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/runawayhorse001/LearningApacheSpark/blob/master/pyspark/ml/classification.py#L1325-L1363"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyspark.ml.classification.GBTClassificationModel" title="Permalink to this definition">¶</a></dt>
<dd><p>Model fitted by GBTClassifier.</p>
<div class="versionadded">
<p><span class="versionmodified added">New in version 1.4.0.</span></p>
</div>
<dl class="py method">
<dt id="pyspark.ml.classification.GBTClassificationModel.evaluateEachIteration">
<code class="sig-name descname">evaluateEachIteration</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">dataset</span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/runawayhorse001/LearningApacheSpark/blob/master/pyspark/ml/classification.py#L1354-L1363"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyspark.ml.classification.GBTClassificationModel.evaluateEachIteration" title="Permalink to this definition">¶</a></dt>
<dd><p>Method to compute error or loss for every iteration of gradient boosting.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>dataset</strong> – Test dataset to evaluate model on, where dataset is an
instance of <code class="xref py py-class docutils literal notranslate"><span class="pre">pyspark.sql.DataFrame</span></code></p>
</dd>
</dl>
<div class="versionadded">
<p><span class="versionmodified added">New in version 2.4.0.</span></p>
</div>
</dd></dl>

<dl class="py method">
<dt id="pyspark.ml.classification.GBTClassificationModel.featureImportances">
<em class="property">property </em><code class="sig-name descname">featureImportances</code><a class="reference external" href="https://github.com/runawayhorse001/LearningApacheSpark/blob/master/pyspark/ml/classification.py"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyspark.ml.classification.GBTClassificationModel.featureImportances" title="Permalink to this definition">¶</a></dt>
<dd><p>Estimate of the importance of each feature.</p>
<p>Each feature’s importance is the average of its importance across all trees in the ensemble
The importance vector is normalized to sum to 1. This method is suggested by Hastie et al.
(Hastie, Tibshirani, Friedman. “The Elements of Statistical Learning, 2nd Edition.” 2001.)
and follows the implementation from scikit-learn.</p>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference internal" href="#pyspark.ml.classification.DecisionTreeClassificationModel.featureImportances" title="pyspark.ml.classification.DecisionTreeClassificationModel.featureImportances"><code class="xref py py-attr docutils literal notranslate"><span class="pre">DecisionTreeClassificationModel.featureImportances</span></code></a></p>
</div>
<div class="versionadded">
<p><span class="versionmodified added">New in version 2.0.0.</span></p>
</div>
</dd></dl>

<dl class="py method">
<dt id="pyspark.ml.classification.GBTClassificationModel.trees">
<em class="property">property </em><code class="sig-name descname">trees</code><a class="reference external" href="https://github.com/runawayhorse001/LearningApacheSpark/blob/master/pyspark/ml/classification.py"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyspark.ml.classification.GBTClassificationModel.trees" title="Permalink to this definition">¶</a></dt>
<dd><p>These have null parent Estimators.</p>
<div class="versionadded">
<p><span class="versionmodified added">New in version 2.0.0.</span></p>
</div>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p>Trees in this ensemble. Warning</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt id="pyspark.ml.classification.GBTClassifier">
<em class="property">class </em><code class="sig-prename descclassname">pyspark.ml.classification.</code><code class="sig-name descname">GBTClassifier</code><span class="sig-paren">(</span><em class="sig-param"><span class="o">*</span><span class="n">args</span></em>, <em class="sig-param"><span class="o">**</span><span class="n">kwargs</span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/runawayhorse001/LearningApacheSpark/blob/master/pyspark/ml/classification.py#L1178-L1322"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyspark.ml.classification.GBTClassifier" title="Permalink to this definition">¶</a></dt>
<dd><p><a class="reference external" href="http://en.wikipedia.org/wiki/Gradient_boosting">Gradient-Boosted Trees (GBTs)</a>
learning algorithm for classification.
It supports binary labels, as well as both continuous and categorical features.</p>
<p>The implementation is based upon: J.H. Friedman. “Stochastic Gradient Boosting.” 1999.</p>
<p>Notes on Gradient Boosting vs. TreeBoost:
- This implementation is for Stochastic Gradient Boosting, not for TreeBoost.
- Both algorithms learn tree ensembles by minimizing loss functions.
- TreeBoost (Friedman, 1999) additionally modifies the outputs at tree leaf nodes
based on the loss function, whereas the original gradient boosting method does not.
- We expect to implement TreeBoost in the future:
<a class="reference external" href="https://issues.apache.org/jira/browse/SPARK-4240">SPARK-4240</a></p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Multiclass labels are not currently supported.</p>
</div>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">numpy</span> <span class="kn">import</span> <span class="n">allclose</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">pyspark.ml.linalg</span> <span class="kn">import</span> <span class="n">Vectors</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">pyspark.ml.feature</span> <span class="kn">import</span> <span class="n">StringIndexer</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">df</span> <span class="o">=</span> <span class="n">spark</span><span class="o">.</span><span class="n">createDataFrame</span><span class="p">([</span>
<span class="gp">... </span>    <span class="p">(</span><span class="mf">1.0</span><span class="p">,</span> <span class="n">Vectors</span><span class="o">.</span><span class="n">dense</span><span class="p">(</span><span class="mf">1.0</span><span class="p">)),</span>
<span class="gp">... </span>    <span class="p">(</span><span class="mf">0.0</span><span class="p">,</span> <span class="n">Vectors</span><span class="o">.</span><span class="n">sparse</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="p">[],</span> <span class="p">[]))],</span> <span class="p">[</span><span class="s2">&quot;label&quot;</span><span class="p">,</span> <span class="s2">&quot;features&quot;</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">stringIndexer</span> <span class="o">=</span> <span class="n">StringIndexer</span><span class="p">(</span><span class="n">inputCol</span><span class="o">=</span><span class="s2">&quot;label&quot;</span><span class="p">,</span> <span class="n">outputCol</span><span class="o">=</span><span class="s2">&quot;indexed&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">si_model</span> <span class="o">=</span> <span class="n">stringIndexer</span><span class="o">.</span><span class="n">fit</span><span class="p">(</span><span class="n">df</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">td</span> <span class="o">=</span> <span class="n">si_model</span><span class="o">.</span><span class="n">transform</span><span class="p">(</span><span class="n">df</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">gbt</span> <span class="o">=</span> <span class="n">GBTClassifier</span><span class="p">(</span><span class="n">maxIter</span><span class="o">=</span><span class="mi">5</span><span class="p">,</span> <span class="n">maxDepth</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">labelCol</span><span class="o">=</span><span class="s2">&quot;indexed&quot;</span><span class="p">,</span> <span class="n">seed</span><span class="o">=</span><span class="mi">42</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">gbt</span><span class="o">.</span><span class="n">getFeatureSubsetStrategy</span><span class="p">()</span>
<span class="go">&#39;all&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">model</span> <span class="o">=</span> <span class="n">gbt</span><span class="o">.</span><span class="n">fit</span><span class="p">(</span><span class="n">td</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">model</span><span class="o">.</span><span class="n">featureImportances</span>
<span class="go">SparseVector(1, {0: 1.0})</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">allclose</span><span class="p">(</span><span class="n">model</span><span class="o">.</span><span class="n">treeWeights</span><span class="p">,</span> <span class="p">[</span><span class="mf">1.0</span><span class="p">,</span> <span class="mf">0.1</span><span class="p">,</span> <span class="mf">0.1</span><span class="p">,</span> <span class="mf">0.1</span><span class="p">,</span> <span class="mf">0.1</span><span class="p">])</span>
<span class="go">True</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">test0</span> <span class="o">=</span> <span class="n">spark</span><span class="o">.</span><span class="n">createDataFrame</span><span class="p">([(</span><span class="n">Vectors</span><span class="o">.</span><span class="n">dense</span><span class="p">(</span><span class="o">-</span><span class="mf">1.0</span><span class="p">),)],</span> <span class="p">[</span><span class="s2">&quot;features&quot;</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">model</span><span class="o">.</span><span class="n">transform</span><span class="p">(</span><span class="n">test0</span><span class="p">)</span><span class="o">.</span><span class="n">head</span><span class="p">()</span><span class="o">.</span><span class="n">prediction</span>
<span class="go">0.0</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">test1</span> <span class="o">=</span> <span class="n">spark</span><span class="o">.</span><span class="n">createDataFrame</span><span class="p">([(</span><span class="n">Vectors</span><span class="o">.</span><span class="n">sparse</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="p">[</span><span class="mf">1.0</span><span class="p">]),)],</span> <span class="p">[</span><span class="s2">&quot;features&quot;</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">model</span><span class="o">.</span><span class="n">transform</span><span class="p">(</span><span class="n">test1</span><span class="p">)</span><span class="o">.</span><span class="n">head</span><span class="p">()</span><span class="o">.</span><span class="n">prediction</span>
<span class="go">1.0</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">model</span><span class="o">.</span><span class="n">totalNumNodes</span>
<span class="go">15</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">model</span><span class="o">.</span><span class="n">toDebugString</span><span class="p">)</span>
<span class="go">GBTClassificationModel (uid=...)...with 5 trees...</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">gbtc_path</span> <span class="o">=</span> <span class="n">temp_path</span> <span class="o">+</span> <span class="s2">&quot;gbtc&quot;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">gbt</span><span class="o">.</span><span class="n">save</span><span class="p">(</span><span class="n">gbtc_path</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">gbt2</span> <span class="o">=</span> <span class="n">GBTClassifier</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="n">gbtc_path</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">gbt2</span><span class="o">.</span><span class="n">getMaxDepth</span><span class="p">()</span>
<span class="go">2</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">model_path</span> <span class="o">=</span> <span class="n">temp_path</span> <span class="o">+</span> <span class="s2">&quot;gbtc_model&quot;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">model</span><span class="o">.</span><span class="n">save</span><span class="p">(</span><span class="n">model_path</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">model2</span> <span class="o">=</span> <span class="n">GBTClassificationModel</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="n">model_path</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">model</span><span class="o">.</span><span class="n">featureImportances</span> <span class="o">==</span> <span class="n">model2</span><span class="o">.</span><span class="n">featureImportances</span>
<span class="go">True</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">model</span><span class="o">.</span><span class="n">treeWeights</span> <span class="o">==</span> <span class="n">model2</span><span class="o">.</span><span class="n">treeWeights</span>
<span class="go">True</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">model</span><span class="o">.</span><span class="n">trees</span>
<span class="go">[DecisionTreeRegressionModel (uid=...) of depth..., DecisionTreeRegressionModel...]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">validation</span> <span class="o">=</span> <span class="n">spark</span><span class="o">.</span><span class="n">createDataFrame</span><span class="p">([(</span><span class="mf">0.0</span><span class="p">,</span> <span class="n">Vectors</span><span class="o">.</span><span class="n">dense</span><span class="p">(</span><span class="o">-</span><span class="mf">1.0</span><span class="p">),)],</span>
<span class="gp">... </span>             <span class="p">[</span><span class="s2">&quot;indexed&quot;</span><span class="p">,</span> <span class="s2">&quot;features&quot;</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">model</span><span class="o">.</span><span class="n">evaluateEachIteration</span><span class="p">(</span><span class="n">validation</span><span class="p">)</span>
<span class="go">[0.25..., 0.23..., 0.21..., 0.19..., 0.18...]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">model</span><span class="o">.</span><span class="n">numClasses</span>
<span class="go">2</span>
</pre></div>
</div>
<div class="versionadded">
<p><span class="versionmodified added">New in version 1.4.0.</span></p>
</div>
<dl class="py method">
<dt id="pyspark.ml.classification.GBTClassifier.getLossType">
<code class="sig-name descname">getLossType</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference external" href="https://github.com/runawayhorse001/LearningApacheSpark/blob/master/pyspark/ml/classification.py#L1310-L1315"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyspark.ml.classification.GBTClassifier.getLossType" title="Permalink to this definition">¶</a></dt>
<dd><p>Gets the value of lossType or its default value.</p>
<div class="versionadded">
<p><span class="versionmodified added">New in version 1.4.0.</span></p>
</div>
</dd></dl>

<dl class="py method">
<dt id="pyspark.ml.classification.GBTClassifier.setFeatureSubsetStrategy">
<code class="sig-name descname">setFeatureSubsetStrategy</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">value</span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/runawayhorse001/LearningApacheSpark/blob/master/pyspark/ml/classification.py#L1317-L1322"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyspark.ml.classification.GBTClassifier.setFeatureSubsetStrategy" title="Permalink to this definition">¶</a></dt>
<dd><p>Sets the value of <code class="xref py py-attr docutils literal notranslate"><span class="pre">featureSubsetStrategy</span></code>.</p>
<div class="versionadded">
<p><span class="versionmodified added">New in version 2.4.0.</span></p>
</div>
</dd></dl>

<dl class="py method">
<dt id="pyspark.ml.classification.GBTClassifier.setLossType">
<code class="sig-name descname">setLossType</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">value</span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/runawayhorse001/LearningApacheSpark/blob/master/pyspark/ml/classification.py#L1303-L1308"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyspark.ml.classification.GBTClassifier.setLossType" title="Permalink to this definition">¶</a></dt>
<dd><p>Sets the value of <code class="xref py py-attr docutils literal notranslate"><span class="pre">lossType</span></code>.</p>
<div class="versionadded">
<p><span class="versionmodified added">New in version 1.4.0.</span></p>
</div>
</dd></dl>

<dl class="py method">
<dt id="pyspark.ml.classification.GBTClassifier.setParams">
<code class="sig-name descname">setParams</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">self</span></em>, <em class="sig-param"><span class="n">featuresCol</span><span class="o">=</span><span class="default_value">'features'</span></em>, <em class="sig-param"><span class="n">labelCol</span><span class="o">=</span><span class="default_value">'label'</span></em>, <em class="sig-param"><span class="n">predictionCol</span><span class="o">=</span><span class="default_value">'prediction'</span></em>, <em class="sig-param"><span class="n">maxDepth</span><span class="o">=</span><span class="default_value">5</span></em>, <em class="sig-param"><span class="n">maxBins</span><span class="o">=</span><span class="default_value">32</span></em>, <em class="sig-param"><span class="n">minInstancesPerNode</span><span class="o">=</span><span class="default_value">1</span></em>, <em class="sig-param"><span class="n">minInfoGain</span><span class="o">=</span><span class="default_value">0.0</span></em>, <em class="sig-param"><span class="n">maxMemoryInMB</span><span class="o">=</span><span class="default_value">256</span></em>, <em class="sig-param"><span class="n">cacheNodeIds</span><span class="o">=</span><span class="default_value">False</span></em>, <em class="sig-param"><span class="n">checkpointInterval</span><span class="o">=</span><span class="default_value">10</span></em>, <em class="sig-param"><span class="n">lossType</span><span class="o">=</span><span class="default_value">'logistic'</span></em>, <em class="sig-param"><span class="n">maxIter</span><span class="o">=</span><span class="default_value">20</span></em>, <em class="sig-param"><span class="n">stepSize</span><span class="o">=</span><span class="default_value">0.1</span></em>, <em class="sig-param"><span class="n">seed</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">subsamplingRate</span><span class="o">=</span><span class="default_value">1.0</span></em>, <em class="sig-param"><span class="n">featureSubsetStrategy</span><span class="o">=</span><span class="default_value">'all'</span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/runawayhorse001/LearningApacheSpark/blob/master/pyspark/__init__.py#L1282-L1298"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyspark.ml.classification.GBTClassifier.setParams" title="Permalink to this definition">¶</a></dt>
<dd><p>Sets params for Gradient Boosted Tree Classification.</p>
<div class="versionadded">
<p><span class="versionmodified added">New in version 1.4.0.</span></p>
</div>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt id="pyspark.ml.classification.LinearSVC">
<em class="property">class </em><code class="sig-prename descclassname">pyspark.ml.classification.</code><code class="sig-name descname">LinearSVC</code><span class="sig-paren">(</span><em class="sig-param"><span class="o">*</span><span class="n">args</span></em>, <em class="sig-param"><span class="o">**</span><span class="n">kwargs</span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/runawayhorse001/LearningApacheSpark/blob/master/pyspark/ml/classification.py#L66-L156"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyspark.ml.classification.LinearSVC" title="Permalink to this definition">¶</a></dt>
<dd><div class="admonition note">
<p class="admonition-title">Note</p>
<p>Experimental</p>
</div>
<p><a class="reference external" href="https://en.wikipedia.org/wiki/Support_vector_machine#Linear_SVM">Linear SVM Classifier</a></p>
<p>This binary classifier optimizes the Hinge Loss using the OWLQN optimizer.
Only supports L2 regularization currently.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">pyspark.sql</span> <span class="kn">import</span> <span class="n">Row</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">pyspark.ml.linalg</span> <span class="kn">import</span> <span class="n">Vectors</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">df</span> <span class="o">=</span> <span class="n">sc</span><span class="o">.</span><span class="n">parallelize</span><span class="p">([</span>
<span class="gp">... </span>    <span class="n">Row</span><span class="p">(</span><span class="n">label</span><span class="o">=</span><span class="mf">1.0</span><span class="p">,</span> <span class="n">features</span><span class="o">=</span><span class="n">Vectors</span><span class="o">.</span><span class="n">dense</span><span class="p">(</span><span class="mf">1.0</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">)),</span>
<span class="gp">... </span>    <span class="n">Row</span><span class="p">(</span><span class="n">label</span><span class="o">=</span><span class="mf">0.0</span><span class="p">,</span> <span class="n">features</span><span class="o">=</span><span class="n">Vectors</span><span class="o">.</span><span class="n">dense</span><span class="p">(</span><span class="mf">1.0</span><span class="p">,</span> <span class="mf">2.0</span><span class="p">,</span> <span class="mf">3.0</span><span class="p">))])</span><span class="o">.</span><span class="n">toDF</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">svm</span> <span class="o">=</span> <span class="n">LinearSVC</span><span class="p">(</span><span class="n">maxIter</span><span class="o">=</span><span class="mi">5</span><span class="p">,</span> <span class="n">regParam</span><span class="o">=</span><span class="mf">0.01</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">model</span> <span class="o">=</span> <span class="n">svm</span><span class="o">.</span><span class="n">fit</span><span class="p">(</span><span class="n">df</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">model</span><span class="o">.</span><span class="n">coefficients</span>
<span class="go">DenseVector([0.0, -0.2792, -0.1833])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">model</span><span class="o">.</span><span class="n">intercept</span>
<span class="go">1.0206118982229047</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">model</span><span class="o">.</span><span class="n">numClasses</span>
<span class="go">2</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">model</span><span class="o">.</span><span class="n">numFeatures</span>
<span class="go">3</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">test0</span> <span class="o">=</span> <span class="n">sc</span><span class="o">.</span><span class="n">parallelize</span><span class="p">([</span><span class="n">Row</span><span class="p">(</span><span class="n">features</span><span class="o">=</span><span class="n">Vectors</span><span class="o">.</span><span class="n">dense</span><span class="p">(</span><span class="o">-</span><span class="mf">1.0</span><span class="p">,</span> <span class="o">-</span><span class="mf">1.0</span><span class="p">,</span> <span class="o">-</span><span class="mf">1.0</span><span class="p">))])</span><span class="o">.</span><span class="n">toDF</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">result</span> <span class="o">=</span> <span class="n">model</span><span class="o">.</span><span class="n">transform</span><span class="p">(</span><span class="n">test0</span><span class="p">)</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">result</span><span class="o">.</span><span class="n">prediction</span>
<span class="go">1.0</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">result</span><span class="o">.</span><span class="n">rawPrediction</span>
<span class="go">DenseVector([-1.4831, 1.4831])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">svm_path</span> <span class="o">=</span> <span class="n">temp_path</span> <span class="o">+</span> <span class="s2">&quot;/svm&quot;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">svm</span><span class="o">.</span><span class="n">save</span><span class="p">(</span><span class="n">svm_path</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">svm2</span> <span class="o">=</span> <span class="n">LinearSVC</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="n">svm_path</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">svm2</span><span class="o">.</span><span class="n">getMaxIter</span><span class="p">()</span>
<span class="go">5</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">model_path</span> <span class="o">=</span> <span class="n">temp_path</span> <span class="o">+</span> <span class="s2">&quot;/svm_model&quot;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">model</span><span class="o">.</span><span class="n">save</span><span class="p">(</span><span class="n">model_path</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">model2</span> <span class="o">=</span> <span class="n">LinearSVCModel</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="n">model_path</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">model</span><span class="o">.</span><span class="n">coefficients</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">==</span> <span class="n">model2</span><span class="o">.</span><span class="n">coefficients</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
<span class="go">True</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">model</span><span class="o">.</span><span class="n">intercept</span> <span class="o">==</span> <span class="n">model2</span><span class="o">.</span><span class="n">intercept</span>
<span class="go">True</span>
</pre></div>
</div>
<div class="versionadded">
<p><span class="versionmodified added">New in version 2.2.0.</span></p>
</div>
<dl class="py method">
<dt id="pyspark.ml.classification.LinearSVC.setParams">
<code class="sig-name descname">setParams</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">featuresCol</span><span class="o">=</span><span class="default_value">'features'</span></em>, <em class="sig-param"><span class="n">labelCol</span><span class="o">=</span><span class="default_value">'label'</span></em>, <em class="sig-param"><span class="n">predictionCol</span><span class="o">=</span><span class="default_value">'prediction'</span></em>, <em class="sig-param"><span class="n">maxIter</span><span class="o">=</span><span class="default_value">100</span></em>, <em class="sig-param"><span class="n">regParam</span><span class="o">=</span><span class="default_value">0.0</span></em>, <em class="sig-param"><span class="n">tol</span><span class="o">=</span><span class="default_value">1e-06</span></em>, <em class="sig-param"><span class="n">rawPredictionCol</span><span class="o">=</span><span class="default_value">'rawPrediction'</span></em>, <em class="sig-param"><span class="n">fitIntercept</span><span class="o">=</span><span class="default_value">True</span></em>, <em class="sig-param"><span class="n">standardization</span><span class="o">=</span><span class="default_value">True</span></em>, <em class="sig-param"><span class="n">threshold</span><span class="o">=</span><span class="default_value">0.0</span></em>, <em class="sig-param"><span class="n">weightCol</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">aggregationDepth</span><span class="o">=</span><span class="default_value">2</span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/runawayhorse001/LearningApacheSpark/blob/master/pyspark/__init__.py#L139-L153"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyspark.ml.classification.LinearSVC.setParams" title="Permalink to this definition">¶</a></dt>
<dd><p>setParams(self, featuresCol=”features”, labelCol=”label”, predictionCol=”prediction”,                   maxIter=100, regParam=0.0, tol=1e-6, rawPredictionCol=”rawPrediction”,                   fitIntercept=True, standardization=True, threshold=0.0, weightCol=None,                   aggregationDepth=2):
Sets params for Linear SVM Classifier.</p>
<div class="versionadded">
<p><span class="versionmodified added">New in version 2.2.0.</span></p>
</div>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt id="pyspark.ml.classification.LinearSVCModel">
<em class="property">class </em><code class="sig-prename descclassname">pyspark.ml.classification.</code><code class="sig-name descname">LinearSVCModel</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">java_model</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/runawayhorse001/LearningApacheSpark/blob/master/pyspark/ml/classification.py#L159-L182"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyspark.ml.classification.LinearSVCModel" title="Permalink to this definition">¶</a></dt>
<dd><div class="admonition note">
<p class="admonition-title">Note</p>
<p>Experimental</p>
</div>
<p>Model fitted by LinearSVC.</p>
<div class="versionadded">
<p><span class="versionmodified added">New in version 2.2.0.</span></p>
</div>
<dl class="py method">
<dt id="pyspark.ml.classification.LinearSVCModel.coefficients">
<em class="property">property </em><code class="sig-name descname">coefficients</code><a class="reference external" href="https://github.com/runawayhorse001/LearningApacheSpark/blob/master/pyspark/ml/classification.py"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyspark.ml.classification.LinearSVCModel.coefficients" title="Permalink to this definition">¶</a></dt>
<dd><p>Model coefficients of Linear SVM Classifier.</p>
<div class="versionadded">
<p><span class="versionmodified added">New in version 2.2.0.</span></p>
</div>
</dd></dl>

<dl class="py method">
<dt id="pyspark.ml.classification.LinearSVCModel.intercept">
<em class="property">property </em><code class="sig-name descname">intercept</code><a class="reference external" href="https://github.com/runawayhorse001/LearningApacheSpark/blob/master/pyspark/ml/classification.py"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyspark.ml.classification.LinearSVCModel.intercept" title="Permalink to this definition">¶</a></dt>
<dd><p>Model intercept of Linear SVM Classifier.</p>
<div class="versionadded">
<p><span class="versionmodified added">New in version 2.2.0.</span></p>
</div>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt id="pyspark.ml.classification.LogisticRegression">
<em class="property">class </em><code class="sig-prename descclassname">pyspark.ml.classification.</code><code class="sig-name descname">LogisticRegression</code><span class="sig-paren">(</span><em class="sig-param"><span class="o">*</span><span class="n">args</span></em>, <em class="sig-param"><span class="o">**</span><span class="n">kwargs</span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/runawayhorse001/LearningApacheSpark/blob/master/pyspark/ml/classification.py#L186-L483"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyspark.ml.classification.LogisticRegression" title="Permalink to this definition">¶</a></dt>
<dd><p>Logistic regression.
This class supports multinomial logistic (softmax) and binomial logistic regression.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">pyspark.sql</span> <span class="kn">import</span> <span class="n">Row</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">pyspark.ml.linalg</span> <span class="kn">import</span> <span class="n">Vectors</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">bdf</span> <span class="o">=</span> <span class="n">sc</span><span class="o">.</span><span class="n">parallelize</span><span class="p">([</span>
<span class="gp">... </span>    <span class="n">Row</span><span class="p">(</span><span class="n">label</span><span class="o">=</span><span class="mf">1.0</span><span class="p">,</span> <span class="n">weight</span><span class="o">=</span><span class="mf">1.0</span><span class="p">,</span> <span class="n">features</span><span class="o">=</span><span class="n">Vectors</span><span class="o">.</span><span class="n">dense</span><span class="p">(</span><span class="mf">0.0</span><span class="p">,</span> <span class="mf">5.0</span><span class="p">)),</span>
<span class="gp">... </span>    <span class="n">Row</span><span class="p">(</span><span class="n">label</span><span class="o">=</span><span class="mf">0.0</span><span class="p">,</span> <span class="n">weight</span><span class="o">=</span><span class="mf">2.0</span><span class="p">,</span> <span class="n">features</span><span class="o">=</span><span class="n">Vectors</span><span class="o">.</span><span class="n">dense</span><span class="p">(</span><span class="mf">1.0</span><span class="p">,</span> <span class="mf">2.0</span><span class="p">)),</span>
<span class="gp">... </span>    <span class="n">Row</span><span class="p">(</span><span class="n">label</span><span class="o">=</span><span class="mf">1.0</span><span class="p">,</span> <span class="n">weight</span><span class="o">=</span><span class="mf">3.0</span><span class="p">,</span> <span class="n">features</span><span class="o">=</span><span class="n">Vectors</span><span class="o">.</span><span class="n">dense</span><span class="p">(</span><span class="mf">2.0</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">)),</span>
<span class="gp">... </span>    <span class="n">Row</span><span class="p">(</span><span class="n">label</span><span class="o">=</span><span class="mf">0.0</span><span class="p">,</span> <span class="n">weight</span><span class="o">=</span><span class="mf">4.0</span><span class="p">,</span> <span class="n">features</span><span class="o">=</span><span class="n">Vectors</span><span class="o">.</span><span class="n">dense</span><span class="p">(</span><span class="mf">3.0</span><span class="p">,</span> <span class="mf">3.0</span><span class="p">))])</span><span class="o">.</span><span class="n">toDF</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">blor</span> <span class="o">=</span> <span class="n">LogisticRegression</span><span class="p">(</span><span class="n">regParam</span><span class="o">=</span><span class="mf">0.01</span><span class="p">,</span> <span class="n">weightCol</span><span class="o">=</span><span class="s2">&quot;weight&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">blorModel</span> <span class="o">=</span> <span class="n">blor</span><span class="o">.</span><span class="n">fit</span><span class="p">(</span><span class="n">bdf</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">blorModel</span><span class="o">.</span><span class="n">coefficients</span>
<span class="go">DenseVector([-1.080..., -0.646...])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">blorModel</span><span class="o">.</span><span class="n">intercept</span>
<span class="go">3.112...</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">data_path</span> <span class="o">=</span> <span class="s2">&quot;data/mllib/sample_multiclass_classification_data.txt&quot;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">mdf</span> <span class="o">=</span> <span class="n">spark</span><span class="o">.</span><span class="n">read</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="s2">&quot;libsvm&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="n">data_path</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">mlor</span> <span class="o">=</span> <span class="n">LogisticRegression</span><span class="p">(</span><span class="n">regParam</span><span class="o">=</span><span class="mf">0.1</span><span class="p">,</span> <span class="n">elasticNetParam</span><span class="o">=</span><span class="mf">1.0</span><span class="p">,</span> <span class="n">family</span><span class="o">=</span><span class="s2">&quot;multinomial&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">mlorModel</span> <span class="o">=</span> <span class="n">mlor</span><span class="o">.</span><span class="n">fit</span><span class="p">(</span><span class="n">mdf</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">mlorModel</span><span class="o">.</span><span class="n">coefficientMatrix</span>
<span class="go">SparseMatrix(3, 4, [0, 1, 2, 3], [3, 2, 1], [1.87..., -2.75..., -0.50...], 1)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">mlorModel</span><span class="o">.</span><span class="n">interceptVector</span>
<span class="go">DenseVector([0.04..., -0.42..., 0.37...])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">test0</span> <span class="o">=</span> <span class="n">sc</span><span class="o">.</span><span class="n">parallelize</span><span class="p">([</span><span class="n">Row</span><span class="p">(</span><span class="n">features</span><span class="o">=</span><span class="n">Vectors</span><span class="o">.</span><span class="n">dense</span><span class="p">(</span><span class="o">-</span><span class="mf">1.0</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">))])</span><span class="o">.</span><span class="n">toDF</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">result</span> <span class="o">=</span> <span class="n">blorModel</span><span class="o">.</span><span class="n">transform</span><span class="p">(</span><span class="n">test0</span><span class="p">)</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">result</span><span class="o">.</span><span class="n">prediction</span>
<span class="go">1.0</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">result</span><span class="o">.</span><span class="n">probability</span>
<span class="go">DenseVector([0.02..., 0.97...])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">result</span><span class="o">.</span><span class="n">rawPrediction</span>
<span class="go">DenseVector([-3.54..., 3.54...])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">test1</span> <span class="o">=</span> <span class="n">sc</span><span class="o">.</span><span class="n">parallelize</span><span class="p">([</span><span class="n">Row</span><span class="p">(</span><span class="n">features</span><span class="o">=</span><span class="n">Vectors</span><span class="o">.</span><span class="n">sparse</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="p">[</span><span class="mf">1.0</span><span class="p">]))])</span><span class="o">.</span><span class="n">toDF</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">blorModel</span><span class="o">.</span><span class="n">transform</span><span class="p">(</span><span class="n">test1</span><span class="p">)</span><span class="o">.</span><span class="n">head</span><span class="p">()</span><span class="o">.</span><span class="n">prediction</span>
<span class="go">1.0</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">blor</span><span class="o">.</span><span class="n">setParams</span><span class="p">(</span><span class="s2">&quot;vector&quot;</span><span class="p">)</span>
<span class="gt">Traceback (most recent call last):</span>
    <span class="o">...</span>
<span class="gr">TypeError</span>: <span class="n">Method setParams forces keyword arguments.</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">lr_path</span> <span class="o">=</span> <span class="n">temp_path</span> <span class="o">+</span> <span class="s2">&quot;/lr&quot;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">blor</span><span class="o">.</span><span class="n">save</span><span class="p">(</span><span class="n">lr_path</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">lr2</span> <span class="o">=</span> <span class="n">LogisticRegression</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="n">lr_path</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">lr2</span><span class="o">.</span><span class="n">getRegParam</span><span class="p">()</span>
<span class="go">0.01</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">model_path</span> <span class="o">=</span> <span class="n">temp_path</span> <span class="o">+</span> <span class="s2">&quot;/lr_model&quot;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">blorModel</span><span class="o">.</span><span class="n">save</span><span class="p">(</span><span class="n">model_path</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">model2</span> <span class="o">=</span> <span class="n">LogisticRegressionModel</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="n">model_path</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">blorModel</span><span class="o">.</span><span class="n">coefficients</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">==</span> <span class="n">model2</span><span class="o">.</span><span class="n">coefficients</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
<span class="go">True</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">blorModel</span><span class="o">.</span><span class="n">intercept</span> <span class="o">==</span> <span class="n">model2</span><span class="o">.</span><span class="n">intercept</span>
<span class="go">True</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">model2</span>
<span class="go">LogisticRegressionModel: uid = ..., numClasses = 2, numFeatures = 2</span>
</pre></div>
</div>
<div class="versionadded">
<p><span class="versionmodified added">New in version 1.3.0.</span></p>
</div>
<dl class="py method">
<dt id="pyspark.ml.classification.LogisticRegression.getFamily">
<code class="sig-name descname">getFamily</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference external" href="https://github.com/runawayhorse001/LearningApacheSpark/blob/master/pyspark/ml/classification.py#L422-L427"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyspark.ml.classification.LogisticRegression.getFamily" title="Permalink to this definition">¶</a></dt>
<dd><p>Gets the value of <code class="xref py py-attr docutils literal notranslate"><span class="pre">family</span></code> or its default value.</p>
<div class="versionadded">
<p><span class="versionmodified added">New in version 2.1.0.</span></p>
</div>
</dd></dl>

<dl class="py method">
<dt id="pyspark.ml.classification.LogisticRegression.getLowerBoundsOnCoefficients">
<code class="sig-name descname">getLowerBoundsOnCoefficients</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference external" href="https://github.com/runawayhorse001/LearningApacheSpark/blob/master/pyspark/ml/classification.py#L436-L441"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyspark.ml.classification.LogisticRegression.getLowerBoundsOnCoefficients" title="Permalink to this definition">¶</a></dt>
<dd><p>Gets the value of <code class="xref py py-attr docutils literal notranslate"><span class="pre">lowerBoundsOnCoefficients</span></code></p>
<div class="versionadded">
<p><span class="versionmodified added">New in version 2.3.0.</span></p>
</div>
</dd></dl>

<dl class="py method">
<dt id="pyspark.ml.classification.LogisticRegression.getLowerBoundsOnIntercepts">
<code class="sig-name descname">getLowerBoundsOnIntercepts</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference external" href="https://github.com/runawayhorse001/LearningApacheSpark/blob/master/pyspark/ml/classification.py#L464-L469"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyspark.ml.classification.LogisticRegression.getLowerBoundsOnIntercepts" title="Permalink to this definition">¶</a></dt>
<dd><p>Gets the value of <code class="xref py py-attr docutils literal notranslate"><span class="pre">lowerBoundsOnIntercepts</span></code></p>
<div class="versionadded">
<p><span class="versionmodified added">New in version 2.3.0.</span></p>
</div>
</dd></dl>

<dl class="py method">
<dt id="pyspark.ml.classification.LogisticRegression.getThreshold">
<code class="sig-name descname">getThreshold</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference external" href="https://github.com/runawayhorse001/LearningApacheSpark/blob/master/pyspark/ml/classification.py#L356-L375"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyspark.ml.classification.LogisticRegression.getThreshold" title="Permalink to this definition">¶</a></dt>
<dd><p>Get threshold for binary classification.</p>
<p>If <code class="xref py py-attr docutils literal notranslate"><span class="pre">thresholds</span></code> is set with length 2 (i.e., binary classification),
this returns the equivalent threshold:
<img class="math" src="_images/math/24079480bb4f99d972cf94da74250236472528a0.png" alt="\frac{1}{1 + \frac{thresholds(0)}{thresholds(1)}}"/>.
Otherwise, returns <code class="xref py py-attr docutils literal notranslate"><span class="pre">threshold</span></code> if set or its default value if unset.</p>
<div class="versionadded">
<p><span class="versionmodified added">New in version 1.4.0.</span></p>
</div>
</dd></dl>

<dl class="py method">
<dt id="pyspark.ml.classification.LogisticRegression.getThresholds">
<code class="sig-name descname">getThresholds</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference external" href="https://github.com/runawayhorse001/LearningApacheSpark/blob/master/pyspark/ml/classification.py#L387-L400"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyspark.ml.classification.LogisticRegression.getThresholds" title="Permalink to this definition">¶</a></dt>
<dd><p>If <code class="xref py py-attr docutils literal notranslate"><span class="pre">thresholds</span></code> is set, return its value.
Otherwise, if <code class="xref py py-attr docutils literal notranslate"><span class="pre">threshold</span></code> is set, return the equivalent thresholds for binary
classification: (1-threshold, threshold).
If neither are set, throw an error.</p>
<div class="versionadded">
<p><span class="versionmodified added">New in version 1.5.0.</span></p>
</div>
</dd></dl>

<dl class="py method">
<dt id="pyspark.ml.classification.LogisticRegression.getUpperBoundsOnCoefficients">
<code class="sig-name descname">getUpperBoundsOnCoefficients</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference external" href="https://github.com/runawayhorse001/LearningApacheSpark/blob/master/pyspark/ml/classification.py#L450-L455"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyspark.ml.classification.LogisticRegression.getUpperBoundsOnCoefficients" title="Permalink to this definition">¶</a></dt>
<dd><p>Gets the value of <code class="xref py py-attr docutils literal notranslate"><span class="pre">upperBoundsOnCoefficients</span></code></p>
<div class="versionadded">
<p><span class="versionmodified added">New in version 2.3.0.</span></p>
</div>
</dd></dl>

<dl class="py method">
<dt id="pyspark.ml.classification.LogisticRegression.getUpperBoundsOnIntercepts">
<code class="sig-name descname">getUpperBoundsOnIntercepts</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference external" href="https://github.com/runawayhorse001/LearningApacheSpark/blob/master/pyspark/ml/classification.py#L478-L483"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyspark.ml.classification.LogisticRegression.getUpperBoundsOnIntercepts" title="Permalink to this definition">¶</a></dt>
<dd><p>Gets the value of <code class="xref py py-attr docutils literal notranslate"><span class="pre">upperBoundsOnIntercepts</span></code></p>
<div class="versionadded">
<p><span class="versionmodified added">New in version 2.3.0.</span></p>
</div>
</dd></dl>

<dl class="py method">
<dt id="pyspark.ml.classification.LogisticRegression.setFamily">
<code class="sig-name descname">setFamily</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">value</span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/runawayhorse001/LearningApacheSpark/blob/master/pyspark/ml/classification.py#L415-L420"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyspark.ml.classification.LogisticRegression.setFamily" title="Permalink to this definition">¶</a></dt>
<dd><p>Sets the value of <code class="xref py py-attr docutils literal notranslate"><span class="pre">family</span></code>.</p>
<div class="versionadded">
<p><span class="versionmodified added">New in version 2.1.0.</span></p>
</div>
</dd></dl>

<dl class="py method">
<dt id="pyspark.ml.classification.LogisticRegression.setLowerBoundsOnCoefficients">
<code class="sig-name descname">setLowerBoundsOnCoefficients</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">value</span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/runawayhorse001/LearningApacheSpark/blob/master/pyspark/ml/classification.py#L429-L434"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyspark.ml.classification.LogisticRegression.setLowerBoundsOnCoefficients" title="Permalink to this definition">¶</a></dt>
<dd><p>Sets the value of <code class="xref py py-attr docutils literal notranslate"><span class="pre">lowerBoundsOnCoefficients</span></code></p>
<div class="versionadded">
<p><span class="versionmodified added">New in version 2.3.0.</span></p>
</div>
</dd></dl>

<dl class="py method">
<dt id="pyspark.ml.classification.LogisticRegression.setLowerBoundsOnIntercepts">
<code class="sig-name descname">setLowerBoundsOnIntercepts</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">value</span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/runawayhorse001/LearningApacheSpark/blob/master/pyspark/ml/classification.py#L457-L462"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyspark.ml.classification.LogisticRegression.setLowerBoundsOnIntercepts" title="Permalink to this definition">¶</a></dt>
<dd><p>Sets the value of <code class="xref py py-attr docutils literal notranslate"><span class="pre">lowerBoundsOnIntercepts</span></code></p>
<div class="versionadded">
<p><span class="versionmodified added">New in version 2.3.0.</span></p>
</div>
</dd></dl>

<dl class="py method">
<dt id="pyspark.ml.classification.LogisticRegression.setParams">
<code class="sig-name descname">setParams</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">featuresCol</span><span class="o">=</span><span class="default_value">'features'</span></em>, <em class="sig-param"><span class="n">labelCol</span><span class="o">=</span><span class="default_value">'label'</span></em>, <em class="sig-param"><span class="n">predictionCol</span><span class="o">=</span><span class="default_value">'prediction'</span></em>, <em class="sig-param"><span class="n">maxIter</span><span class="o">=</span><span class="default_value">100</span></em>, <em class="sig-param"><span class="n">regParam</span><span class="o">=</span><span class="default_value">0.0</span></em>, <em class="sig-param"><span class="n">elasticNetParam</span><span class="o">=</span><span class="default_value">0.0</span></em>, <em class="sig-param"><span class="n">tol</span><span class="o">=</span><span class="default_value">1e-06</span></em>, <em class="sig-param"><span class="n">fitIntercept</span><span class="o">=</span><span class="default_value">True</span></em>, <em class="sig-param"><span class="n">threshold</span><span class="o">=</span><span class="default_value">0.5</span></em>, <em class="sig-param"><span class="n">thresholds</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">probabilityCol</span><span class="o">=</span><span class="default_value">'probability'</span></em>, <em class="sig-param"><span class="n">rawPredictionCol</span><span class="o">=</span><span class="default_value">'rawPrediction'</span></em>, <em class="sig-param"><span class="n">standardization</span><span class="o">=</span><span class="default_value">True</span></em>, <em class="sig-param"><span class="n">weightCol</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">aggregationDepth</span><span class="o">=</span><span class="default_value">2</span></em>, <em class="sig-param"><span class="n">family</span><span class="o">=</span><span class="default_value">'auto'</span></em>, <em class="sig-param"><span class="n">lowerBoundsOnCoefficients</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">upperBoundsOnCoefficients</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">lowerBoundsOnIntercepts</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">upperBoundsOnIntercepts</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/runawayhorse001/LearningApacheSpark/blob/master/pyspark/__init__.py#L318-L341"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyspark.ml.classification.LogisticRegression.setParams" title="Permalink to this definition">¶</a></dt>
<dd><p>setParams(self, featuresCol=”features”, labelCol=”label”, predictionCol=”prediction”,                   maxIter=100, regParam=0.0, elasticNetParam=0.0, tol=1e-6, fitIntercept=True,                   threshold=0.5, thresholds=None, probabilityCol=”probability”,                   rawPredictionCol=”rawPrediction”, standardization=True, weightCol=None,                   aggregationDepth=2, family=”auto”,                   lowerBoundsOnCoefficients=None, upperBoundsOnCoefficients=None,                   lowerBoundsOnIntercepts=None, upperBoundsOnIntercepts=None):
Sets params for logistic regression.
If the threshold and thresholds Params are both set, they must be equivalent.</p>
<div class="versionadded">
<p><span class="versionmodified added">New in version 1.3.0.</span></p>
</div>
</dd></dl>

<dl class="py method">
<dt id="pyspark.ml.classification.LogisticRegression.setThreshold">
<code class="sig-name descname">setThreshold</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">value</span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/runawayhorse001/LearningApacheSpark/blob/master/pyspark/ml/classification.py#L346-L354"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyspark.ml.classification.LogisticRegression.setThreshold" title="Permalink to this definition">¶</a></dt>
<dd><p>Sets the value of <code class="xref py py-attr docutils literal notranslate"><span class="pre">threshold</span></code>.
Clears value of <code class="xref py py-attr docutils literal notranslate"><span class="pre">thresholds</span></code> if it has been set.</p>
<div class="versionadded">
<p><span class="versionmodified added">New in version 1.4.0.</span></p>
</div>
</dd></dl>

<dl class="py method">
<dt id="pyspark.ml.classification.LogisticRegression.setThresholds">
<code class="sig-name descname">setThresholds</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">value</span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/runawayhorse001/LearningApacheSpark/blob/master/pyspark/ml/classification.py#L377-L385"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyspark.ml.classification.LogisticRegression.setThresholds" title="Permalink to this definition">¶</a></dt>
<dd><p>Sets the value of <code class="xref py py-attr docutils literal notranslate"><span class="pre">thresholds</span></code>.
Clears value of <code class="xref py py-attr docutils literal notranslate"><span class="pre">threshold</span></code> if it has been set.</p>
<div class="versionadded">
<p><span class="versionmodified added">New in version 1.5.0.</span></p>
</div>
</dd></dl>

<dl class="py method">
<dt id="pyspark.ml.classification.LogisticRegression.setUpperBoundsOnCoefficients">
<code class="sig-name descname">setUpperBoundsOnCoefficients</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">value</span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/runawayhorse001/LearningApacheSpark/blob/master/pyspark/ml/classification.py#L443-L448"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyspark.ml.classification.LogisticRegression.setUpperBoundsOnCoefficients" title="Permalink to this definition">¶</a></dt>
<dd><p>Sets the value of <code class="xref py py-attr docutils literal notranslate"><span class="pre">upperBoundsOnCoefficients</span></code></p>
<div class="versionadded">
<p><span class="versionmodified added">New in version 2.3.0.</span></p>
</div>
</dd></dl>

<dl class="py method">
<dt id="pyspark.ml.classification.LogisticRegression.setUpperBoundsOnIntercepts">
<code class="sig-name descname">setUpperBoundsOnIntercepts</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">value</span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/runawayhorse001/LearningApacheSpark/blob/master/pyspark/ml/classification.py#L471-L476"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyspark.ml.classification.LogisticRegression.setUpperBoundsOnIntercepts" title="Permalink to this definition">¶</a></dt>
<dd><p>Sets the value of <code class="xref py py-attr docutils literal notranslate"><span class="pre">upperBoundsOnIntercepts</span></code></p>
<div class="versionadded">
<p><span class="versionmodified added">New in version 2.3.0.</span></p>
</div>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt id="pyspark.ml.classification.LogisticRegressionModel">
<em class="property">class </em><code class="sig-prename descclassname">pyspark.ml.classification.</code><code class="sig-name descname">LogisticRegressionModel</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">java_model</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/runawayhorse001/LearningApacheSpark/blob/master/pyspark/ml/classification.py#L486-L568"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyspark.ml.classification.LogisticRegressionModel" title="Permalink to this definition">¶</a></dt>
<dd><p>Model fitted by LogisticRegression.</p>
<div class="versionadded">
<p><span class="versionmodified added">New in version 1.3.0.</span></p>
</div>
<dl class="py method">
<dt id="pyspark.ml.classification.LogisticRegressionModel.coefficientMatrix">
<em class="property">property </em><code class="sig-name descname">coefficientMatrix</code><a class="reference external" href="https://github.com/runawayhorse001/LearningApacheSpark/blob/master/pyspark/ml/classification.py"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyspark.ml.classification.LogisticRegressionModel.coefficientMatrix" title="Permalink to this definition">¶</a></dt>
<dd><p>Model coefficients.</p>
<div class="versionadded">
<p><span class="versionmodified added">New in version 2.1.0.</span></p>
</div>
</dd></dl>

<dl class="py method">
<dt id="pyspark.ml.classification.LogisticRegressionModel.coefficients">
<em class="property">property </em><code class="sig-name descname">coefficients</code><a class="reference external" href="https://github.com/runawayhorse001/LearningApacheSpark/blob/master/pyspark/ml/classification.py"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyspark.ml.classification.LogisticRegressionModel.coefficients" title="Permalink to this definition">¶</a></dt>
<dd><p>Model coefficients of binomial logistic regression.
An exception is thrown in the case of multinomial logistic regression.</p>
<div class="versionadded">
<p><span class="versionmodified added">New in version 2.0.0.</span></p>
</div>
</dd></dl>

<dl class="py method">
<dt id="pyspark.ml.classification.LogisticRegressionModel.evaluate">
<code class="sig-name descname">evaluate</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">dataset</span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/runawayhorse001/LearningApacheSpark/blob/master/pyspark/ml/classification.py#L553-L565"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyspark.ml.classification.LogisticRegressionModel.evaluate" title="Permalink to this definition">¶</a></dt>
<dd><p>Evaluates the model on a test dataset.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>dataset</strong> – Test dataset to evaluate model on, where dataset is an
instance of <code class="xref py py-class docutils literal notranslate"><span class="pre">pyspark.sql.DataFrame</span></code></p>
</dd>
</dl>
<div class="versionadded">
<p><span class="versionmodified added">New in version 2.0.0.</span></p>
</div>
</dd></dl>

<dl class="py method">
<dt id="pyspark.ml.classification.LogisticRegressionModel.hasSummary">
<em class="property">property </em><code class="sig-name descname">hasSummary</code><a class="reference external" href="https://github.com/runawayhorse001/LearningApacheSpark/blob/master/pyspark/ml/classification.py"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyspark.ml.classification.LogisticRegressionModel.hasSummary" title="Permalink to this definition">¶</a></dt>
<dd><p>Indicates whether a training summary exists for this model
instance.</p>
<div class="versionadded">
<p><span class="versionmodified added">New in version 2.0.0.</span></p>
</div>
</dd></dl>

<dl class="py method">
<dt id="pyspark.ml.classification.LogisticRegressionModel.intercept">
<em class="property">property </em><code class="sig-name descname">intercept</code><a class="reference external" href="https://github.com/runawayhorse001/LearningApacheSpark/blob/master/pyspark/ml/classification.py"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyspark.ml.classification.LogisticRegressionModel.intercept" title="Permalink to this definition">¶</a></dt>
<dd><p>Model intercept of binomial logistic regression.
An exception is thrown in the case of multinomial logistic regression.</p>
<div class="versionadded">
<p><span class="versionmodified added">New in version 1.4.0.</span></p>
</div>
</dd></dl>

<dl class="py method">
<dt id="pyspark.ml.classification.LogisticRegressionModel.interceptVector">
<em class="property">property </em><code class="sig-name descname">interceptVector</code><a class="reference external" href="https://github.com/runawayhorse001/LearningApacheSpark/blob/master/pyspark/ml/classification.py"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyspark.ml.classification.LogisticRegressionModel.interceptVector" title="Permalink to this definition">¶</a></dt>
<dd><p>Model intercept.</p>
<div class="versionadded">
<p><span class="versionmodified added">New in version 2.1.0.</span></p>
</div>
</dd></dl>

<dl class="py method">
<dt id="pyspark.ml.classification.LogisticRegressionModel.summary">
<em class="property">property </em><code class="sig-name descname">summary</code><a class="reference external" href="https://github.com/runawayhorse001/LearningApacheSpark/blob/master/pyspark/ml/classification.py"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyspark.ml.classification.LogisticRegressionModel.summary" title="Permalink to this definition">¶</a></dt>
<dd><p>Gets summary (e.g. accuracy/precision/recall, objective history, total iterations) of model
trained on the training set. An exception is thrown if <img class="math" src="_images/math/5c766935e8e4a480fcebe1cd549911ecd0f2babb.png" alt="trainingSummary is None"/>.</p>
<div class="versionadded">
<p><span class="versionmodified added">New in version 2.0.0.</span></p>
</div>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt id="pyspark.ml.classification.LogisticRegressionSummary">
<em class="property">class </em><code class="sig-prename descclassname">pyspark.ml.classification.</code><code class="sig-name descname">LogisticRegressionSummary</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">java_obj</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/runawayhorse001/LearningApacheSpark/blob/master/pyspark/ml/classification.py#L571-L725"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyspark.ml.classification.LogisticRegressionSummary" title="Permalink to this definition">¶</a></dt>
<dd><div class="admonition note">
<p class="admonition-title">Note</p>
<p>Experimental</p>
</div>
<p>Abstraction for Logistic Regression Results for a given model.</p>
<div class="versionadded">
<p><span class="versionmodified added">New in version 2.0.0.</span></p>
</div>
<dl class="py method">
<dt id="pyspark.ml.classification.LogisticRegressionSummary.accuracy">
<em class="property">property </em><code class="sig-name descname">accuracy</code><a class="reference external" href="https://github.com/runawayhorse001/LearningApacheSpark/blob/master/pyspark/ml/classification.py"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyspark.ml.classification.LogisticRegressionSummary.accuracy" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns accuracy.
(equals to the total number of correctly classified instances
out of the total number of instances.)</p>
<div class="versionadded">
<p><span class="versionmodified added">New in version 2.3.0.</span></p>
</div>
</dd></dl>

<dl class="py method">
<dt id="pyspark.ml.classification.LogisticRegressionSummary.fMeasureByLabel">
<code class="sig-name descname">fMeasureByLabel</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">beta</span><span class="o">=</span><span class="default_value">1.0</span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/runawayhorse001/LearningApacheSpark/blob/master/pyspark/ml/classification.py#L669-L674"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyspark.ml.classification.LogisticRegressionSummary.fMeasureByLabel" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns f-measure for each label (category).</p>
<div class="versionadded">
<p><span class="versionmodified added">New in version 2.3.0.</span></p>
</div>
</dd></dl>

<dl class="py method">
<dt id="pyspark.ml.classification.LogisticRegressionSummary.falsePositiveRateByLabel">
<em class="property">property </em><code class="sig-name descname">falsePositiveRateByLabel</code><a class="reference external" href="https://github.com/runawayhorse001/LearningApacheSpark/blob/master/pyspark/ml/classification.py"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyspark.ml.classification.LogisticRegressionSummary.falsePositiveRateByLabel" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns false positive rate for each label (category).</p>
<div class="versionadded">
<p><span class="versionmodified added">New in version 2.3.0.</span></p>
</div>
</dd></dl>

<dl class="py method">
<dt id="pyspark.ml.classification.LogisticRegressionSummary.featuresCol">
<em class="property">property </em><code class="sig-name descname">featuresCol</code><a class="reference external" href="https://github.com/runawayhorse001/LearningApacheSpark/blob/master/pyspark/ml/classification.py"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyspark.ml.classification.LogisticRegressionSummary.featuresCol" title="Permalink to this definition">¶</a></dt>
<dd><p>Field in “predictions” which gives the features of each instance
as a vector.</p>
<div class="versionadded">
<p><span class="versionmodified added">New in version 2.0.0.</span></p>
</div>
</dd></dl>

<dl class="py method">
<dt id="pyspark.ml.classification.LogisticRegressionSummary.labelCol">
<em class="property">property </em><code class="sig-name descname">labelCol</code><a class="reference external" href="https://github.com/runawayhorse001/LearningApacheSpark/blob/master/pyspark/ml/classification.py"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyspark.ml.classification.LogisticRegressionSummary.labelCol" title="Permalink to this definition">¶</a></dt>
<dd><p>Field in “predictions” which gives the true label of each
instance.</p>
<div class="versionadded">
<p><span class="versionmodified added">New in version 2.0.0.</span></p>
</div>
</dd></dl>

<dl class="py method">
<dt id="pyspark.ml.classification.LogisticRegressionSummary.labels">
<em class="property">property </em><code class="sig-name descname">labels</code><a class="reference external" href="https://github.com/runawayhorse001/LearningApacheSpark/blob/master/pyspark/ml/classification.py"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyspark.ml.classification.LogisticRegressionSummary.labels" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns the sequence of labels in ascending order. This order matches the order used
in metrics which are specified as arrays over labels, e.g., truePositiveRateByLabel.</p>
<p>Note: In most cases, it will be values {0.0, 1.0, …, numClasses-1}, However, if the
training set is missing a label, then all of the arrays over labels
(e.g., from truePositiveRateByLabel) will be of length numClasses-1 instead of the
expected numClasses.</p>
<div class="versionadded">
<p><span class="versionmodified added">New in version 2.3.0.</span></p>
</div>
</dd></dl>

<dl class="py method">
<dt id="pyspark.ml.classification.LogisticRegressionSummary.precisionByLabel">
<em class="property">property </em><code class="sig-name descname">precisionByLabel</code><a class="reference external" href="https://github.com/runawayhorse001/LearningApacheSpark/blob/master/pyspark/ml/classification.py"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyspark.ml.classification.LogisticRegressionSummary.precisionByLabel" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns precision for each label (category).</p>
<div class="versionadded">
<p><span class="versionmodified added">New in version 2.3.0.</span></p>
</div>
</dd></dl>

<dl class="py method">
<dt id="pyspark.ml.classification.LogisticRegressionSummary.predictionCol">
<em class="property">property </em><code class="sig-name descname">predictionCol</code><a class="reference external" href="https://github.com/runawayhorse001/LearningApacheSpark/blob/master/pyspark/ml/classification.py"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyspark.ml.classification.LogisticRegressionSummary.predictionCol" title="Permalink to this definition">¶</a></dt>
<dd><p>Field in “predictions” which gives the prediction of each class.</p>
<div class="versionadded">
<p><span class="versionmodified added">New in version 2.3.0.</span></p>
</div>
</dd></dl>

<dl class="py method">
<dt id="pyspark.ml.classification.LogisticRegressionSummary.predictions">
<em class="property">property </em><code class="sig-name descname">predictions</code><a class="reference external" href="https://github.com/runawayhorse001/LearningApacheSpark/blob/master/pyspark/ml/classification.py"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyspark.ml.classification.LogisticRegressionSummary.predictions" title="Permalink to this definition">¶</a></dt>
<dd><p>Dataframe outputted by the model’s <img class="math" src="_images/math/1974e57a2d71dccf63f20603f513258811e97596.png" alt="transform"/> method.</p>
<div class="versionadded">
<p><span class="versionmodified added">New in version 2.0.0.</span></p>
</div>
</dd></dl>

<dl class="py method">
<dt id="pyspark.ml.classification.LogisticRegressionSummary.probabilityCol">
<em class="property">property </em><code class="sig-name descname">probabilityCol</code><a class="reference external" href="https://github.com/runawayhorse001/LearningApacheSpark/blob/master/pyspark/ml/classification.py"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyspark.ml.classification.LogisticRegressionSummary.probabilityCol" title="Permalink to this definition">¶</a></dt>
<dd><p>Field in “predictions” which gives the probability
of each class as a vector.</p>
<div class="versionadded">
<p><span class="versionmodified added">New in version 2.0.0.</span></p>
</div>
</dd></dl>

<dl class="py method">
<dt id="pyspark.ml.classification.LogisticRegressionSummary.recallByLabel">
<em class="property">property </em><code class="sig-name descname">recallByLabel</code><a class="reference external" href="https://github.com/runawayhorse001/LearningApacheSpark/blob/master/pyspark/ml/classification.py"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyspark.ml.classification.LogisticRegressionSummary.recallByLabel" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns recall for each label (category).</p>
<div class="versionadded">
<p><span class="versionmodified added">New in version 2.3.0.</span></p>
</div>
</dd></dl>

<dl class="py method">
<dt id="pyspark.ml.classification.LogisticRegressionSummary.truePositiveRateByLabel">
<em class="property">property </em><code class="sig-name descname">truePositiveRateByLabel</code><a class="reference external" href="https://github.com/runawayhorse001/LearningApacheSpark/blob/master/pyspark/ml/classification.py"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyspark.ml.classification.LogisticRegressionSummary.truePositiveRateByLabel" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns true positive rate for each label (category).</p>
<div class="versionadded">
<p><span class="versionmodified added">New in version 2.3.0.</span></p>
</div>
</dd></dl>

<dl class="py method">
<dt id="pyspark.ml.classification.LogisticRegressionSummary.weightedFMeasure">
<code class="sig-name descname">weightedFMeasure</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">beta</span><span class="o">=</span><span class="default_value">1.0</span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/runawayhorse001/LearningApacheSpark/blob/master/pyspark/ml/classification.py#L720-L725"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyspark.ml.classification.LogisticRegressionSummary.weightedFMeasure" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns weighted averaged f-measure.</p>
<div class="versionadded">
<p><span class="versionmodified added">New in version 2.3.0.</span></p>
</div>
</dd></dl>

<dl class="py method">
<dt id="pyspark.ml.classification.LogisticRegressionSummary.weightedFalsePositiveRate">
<em class="property">property </em><code class="sig-name descname">weightedFalsePositiveRate</code><a class="reference external" href="https://github.com/runawayhorse001/LearningApacheSpark/blob/master/pyspark/ml/classification.py"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyspark.ml.classification.LogisticRegressionSummary.weightedFalsePositiveRate" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns weighted false positive rate.</p>
<div class="versionadded">
<p><span class="versionmodified added">New in version 2.3.0.</span></p>
</div>
</dd></dl>

<dl class="py method">
<dt id="pyspark.ml.classification.LogisticRegressionSummary.weightedPrecision">
<em class="property">property </em><code class="sig-name descname">weightedPrecision</code><a class="reference external" href="https://github.com/runawayhorse001/LearningApacheSpark/blob/master/pyspark/ml/classification.py"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyspark.ml.classification.LogisticRegressionSummary.weightedPrecision" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns weighted averaged precision.</p>
<div class="versionadded">
<p><span class="versionmodified added">New in version 2.3.0.</span></p>
</div>
</dd></dl>

<dl class="py method">
<dt id="pyspark.ml.classification.LogisticRegressionSummary.weightedRecall">
<em class="property">property </em><code class="sig-name descname">weightedRecall</code><a class="reference external" href="https://github.com/runawayhorse001/LearningApacheSpark/blob/master/pyspark/ml/classification.py"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyspark.ml.classification.LogisticRegressionSummary.weightedRecall" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns weighted averaged recall.
(equals to precision, recall and f-measure)</p>
<div class="versionadded">
<p><span class="versionmodified added">New in version 2.3.0.</span></p>
</div>
</dd></dl>

<dl class="py method">
<dt id="pyspark.ml.classification.LogisticRegressionSummary.weightedTruePositiveRate">
<em class="property">property </em><code class="sig-name descname">weightedTruePositiveRate</code><a class="reference external" href="https://github.com/runawayhorse001/LearningApacheSpark/blob/master/pyspark/ml/classification.py"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyspark.ml.classification.LogisticRegressionSummary.weightedTruePositiveRate" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns weighted true positive rate.
(equals to precision, recall and f-measure)</p>
<div class="versionadded">
<p><span class="versionmodified added">New in version 2.3.0.</span></p>
</div>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt id="pyspark.ml.classification.LogisticRegressionTrainingSummary">
<em class="property">class </em><code class="sig-prename descclassname">pyspark.ml.classification.</code><code class="sig-name descname">LogisticRegressionTrainingSummary</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">java_obj</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/runawayhorse001/LearningApacheSpark/blob/master/pyspark/ml/classification.py#L729-L755"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyspark.ml.classification.LogisticRegressionTrainingSummary" title="Permalink to this definition">¶</a></dt>
<dd><div class="admonition note">
<p class="admonition-title">Note</p>
<p>Experimental</p>
</div>
<p>Abstraction for multinomial Logistic Regression Training results.
Currently, the training summary ignores the training weights except
for the objective trace.</p>
<div class="versionadded">
<p><span class="versionmodified added">New in version 2.0.0.</span></p>
</div>
<dl class="py method">
<dt id="pyspark.ml.classification.LogisticRegressionTrainingSummary.objectiveHistory">
<em class="property">property </em><code class="sig-name descname">objectiveHistory</code><a class="reference external" href="https://github.com/runawayhorse001/LearningApacheSpark/blob/master/pyspark/ml/classification.py"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyspark.ml.classification.LogisticRegressionTrainingSummary.objectiveHistory" title="Permalink to this definition">¶</a></dt>
<dd><p>Objective function (scaled loss + regularization) at each
iteration.</p>
<div class="versionadded">
<p><span class="versionmodified added">New in version 2.0.0.</span></p>
</div>
</dd></dl>

<dl class="py method">
<dt id="pyspark.ml.classification.LogisticRegressionTrainingSummary.totalIterations">
<em class="property">property </em><code class="sig-name descname">totalIterations</code><a class="reference external" href="https://github.com/runawayhorse001/LearningApacheSpark/blob/master/pyspark/ml/classification.py"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyspark.ml.classification.LogisticRegressionTrainingSummary.totalIterations" title="Permalink to this definition">¶</a></dt>
<dd><p>Number of training iterations until termination.</p>
<div class="versionadded">
<p><span class="versionmodified added">New in version 2.0.0.</span></p>
</div>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt id="pyspark.ml.classification.MultilayerPerceptronClassificationModel">
<em class="property">class </em><code class="sig-prename descclassname">pyspark.ml.classification.</code><code class="sig-name descname">MultilayerPerceptronClassificationModel</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">java_model</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/runawayhorse001/LearningApacheSpark/blob/master/pyspark/ml/classification.py#L1679-L1701"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyspark.ml.classification.MultilayerPerceptronClassificationModel" title="Permalink to this definition">¶</a></dt>
<dd><p>Model fitted by MultilayerPerceptronClassifier.</p>
<div class="versionadded">
<p><span class="versionmodified added">New in version 1.6.0.</span></p>
</div>
<dl class="py method">
<dt id="pyspark.ml.classification.MultilayerPerceptronClassificationModel.layers">
<em class="property">property </em><code class="sig-name descname">layers</code><a class="reference external" href="https://github.com/runawayhorse001/LearningApacheSpark/blob/master/pyspark/ml/classification.py"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyspark.ml.classification.MultilayerPerceptronClassificationModel.layers" title="Permalink to this definition">¶</a></dt>
<dd><p>array of layer sizes including input and output layers.</p>
<div class="versionadded">
<p><span class="versionmodified added">New in version 1.6.0.</span></p>
</div>
</dd></dl>

<dl class="py method">
<dt id="pyspark.ml.classification.MultilayerPerceptronClassificationModel.weights">
<em class="property">property </em><code class="sig-name descname">weights</code><a class="reference external" href="https://github.com/runawayhorse001/LearningApacheSpark/blob/master/pyspark/ml/classification.py"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyspark.ml.classification.MultilayerPerceptronClassificationModel.weights" title="Permalink to this definition">¶</a></dt>
<dd><p>the weights of layers.</p>
<div class="versionadded">
<p><span class="versionmodified added">New in version 2.0.0.</span></p>
</div>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt id="pyspark.ml.classification.MultilayerPerceptronClassifier">
<em class="property">class </em><code class="sig-prename descclassname">pyspark.ml.classification.</code><code class="sig-name descname">MultilayerPerceptronClassifier</code><span class="sig-paren">(</span><em class="sig-param"><span class="o">*</span><span class="n">args</span></em>, <em class="sig-param"><span class="o">**</span><span class="n">kwargs</span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/runawayhorse001/LearningApacheSpark/blob/master/pyspark/ml/classification.py#L1516-L1676"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyspark.ml.classification.MultilayerPerceptronClassifier" title="Permalink to this definition">¶</a></dt>
<dd><p>Classifier trainer based on the Multilayer Perceptron.
Each layer has sigmoid activation function, output layer has softmax.
Number of inputs has to be equal to the size of feature vectors.
Number of outputs has to be equal to the total number of labels.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">pyspark.ml.linalg</span> <span class="kn">import</span> <span class="n">Vectors</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">df</span> <span class="o">=</span> <span class="n">spark</span><span class="o">.</span><span class="n">createDataFrame</span><span class="p">([</span>
<span class="gp">... </span>    <span class="p">(</span><span class="mf">0.0</span><span class="p">,</span> <span class="n">Vectors</span><span class="o">.</span><span class="n">dense</span><span class="p">([</span><span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">])),</span>
<span class="gp">... </span>    <span class="p">(</span><span class="mf">1.0</span><span class="p">,</span> <span class="n">Vectors</span><span class="o">.</span><span class="n">dense</span><span class="p">([</span><span class="mf">0.0</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">])),</span>
<span class="gp">... </span>    <span class="p">(</span><span class="mf">1.0</span><span class="p">,</span> <span class="n">Vectors</span><span class="o">.</span><span class="n">dense</span><span class="p">([</span><span class="mf">1.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">])),</span>
<span class="gp">... </span>    <span class="p">(</span><span class="mf">0.0</span><span class="p">,</span> <span class="n">Vectors</span><span class="o">.</span><span class="n">dense</span><span class="p">([</span><span class="mf">1.0</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">]))],</span> <span class="p">[</span><span class="s2">&quot;label&quot;</span><span class="p">,</span> <span class="s2">&quot;features&quot;</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">mlp</span> <span class="o">=</span> <span class="n">MultilayerPerceptronClassifier</span><span class="p">(</span><span class="n">maxIter</span><span class="o">=</span><span class="mi">100</span><span class="p">,</span> <span class="n">layers</span><span class="o">=</span><span class="p">[</span><span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">],</span> <span class="n">blockSize</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">seed</span><span class="o">=</span><span class="mi">123</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">model</span> <span class="o">=</span> <span class="n">mlp</span><span class="o">.</span><span class="n">fit</span><span class="p">(</span><span class="n">df</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">model</span><span class="o">.</span><span class="n">layers</span>
<span class="go">[2, 2, 2]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">model</span><span class="o">.</span><span class="n">weights</span><span class="o">.</span><span class="n">size</span>
<span class="go">12</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">testDF</span> <span class="o">=</span> <span class="n">spark</span><span class="o">.</span><span class="n">createDataFrame</span><span class="p">([</span>
<span class="gp">... </span>    <span class="p">(</span><span class="n">Vectors</span><span class="o">.</span><span class="n">dense</span><span class="p">([</span><span class="mf">1.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">]),),</span>
<span class="gp">... </span>    <span class="p">(</span><span class="n">Vectors</span><span class="o">.</span><span class="n">dense</span><span class="p">([</span><span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">]),)],</span> <span class="p">[</span><span class="s2">&quot;features&quot;</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">model</span><span class="o">.</span><span class="n">transform</span><span class="p">(</span><span class="n">testDF</span><span class="p">)</span><span class="o">.</span><span class="n">select</span><span class="p">(</span><span class="s2">&quot;features&quot;</span><span class="p">,</span> <span class="s2">&quot;prediction&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
<span class="go">+---------+----------+</span>
<span class="go">| features|prediction|</span>
<span class="go">+---------+----------+</span>
<span class="go">|[1.0,0.0]|       1.0|</span>
<span class="go">|[0.0,0.0]|       0.0|</span>
<span class="go">+---------+----------+</span>
<span class="gp">...</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">mlp_path</span> <span class="o">=</span> <span class="n">temp_path</span> <span class="o">+</span> <span class="s2">&quot;/mlp&quot;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">mlp</span><span class="o">.</span><span class="n">save</span><span class="p">(</span><span class="n">mlp_path</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">mlp2</span> <span class="o">=</span> <span class="n">MultilayerPerceptronClassifier</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="n">mlp_path</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">mlp2</span><span class="o">.</span><span class="n">getBlockSize</span><span class="p">()</span>
<span class="go">1</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">model_path</span> <span class="o">=</span> <span class="n">temp_path</span> <span class="o">+</span> <span class="s2">&quot;/mlp_model&quot;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">model</span><span class="o">.</span><span class="n">save</span><span class="p">(</span><span class="n">model_path</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">model2</span> <span class="o">=</span> <span class="n">MultilayerPerceptronClassificationModel</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="n">model_path</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">model</span><span class="o">.</span><span class="n">layers</span> <span class="o">==</span> <span class="n">model2</span><span class="o">.</span><span class="n">layers</span>
<span class="go">True</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">model</span><span class="o">.</span><span class="n">weights</span> <span class="o">==</span> <span class="n">model2</span><span class="o">.</span><span class="n">weights</span>
<span class="go">True</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">mlp2</span> <span class="o">=</span> <span class="n">mlp2</span><span class="o">.</span><span class="n">setInitialWeights</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">12</span><span class="p">)))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">model3</span> <span class="o">=</span> <span class="n">mlp2</span><span class="o">.</span><span class="n">fit</span><span class="p">(</span><span class="n">df</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">model3</span><span class="o">.</span><span class="n">weights</span> <span class="o">!=</span> <span class="n">model2</span><span class="o">.</span><span class="n">weights</span>
<span class="go">True</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">model3</span><span class="o">.</span><span class="n">layers</span> <span class="o">==</span> <span class="n">model</span><span class="o">.</span><span class="n">layers</span>
<span class="go">True</span>
</pre></div>
</div>
<div class="versionadded">
<p><span class="versionmodified added">New in version 1.6.0.</span></p>
</div>
<dl class="py method">
<dt id="pyspark.ml.classification.MultilayerPerceptronClassifier.getBlockSize">
<code class="sig-name descname">getBlockSize</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference external" href="https://github.com/runawayhorse001/LearningApacheSpark/blob/master/pyspark/ml/classification.py#L1643-L1648"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyspark.ml.classification.MultilayerPerceptronClassifier.getBlockSize" title="Permalink to this definition">¶</a></dt>
<dd><p>Gets the value of blockSize or its default value.</p>
<div class="versionadded">
<p><span class="versionmodified added">New in version 1.6.0.</span></p>
</div>
</dd></dl>

<dl class="py method">
<dt id="pyspark.ml.classification.MultilayerPerceptronClassifier.getInitialWeights">
<code class="sig-name descname">getInitialWeights</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference external" href="https://github.com/runawayhorse001/LearningApacheSpark/blob/master/pyspark/ml/classification.py#L1671-L1676"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyspark.ml.classification.MultilayerPerceptronClassifier.getInitialWeights" title="Permalink to this definition">¶</a></dt>
<dd><p>Gets the value of initialWeights or its default value.</p>
<div class="versionadded">
<p><span class="versionmodified added">New in version 2.0.0.</span></p>
</div>
</dd></dl>

<dl class="py method">
<dt id="pyspark.ml.classification.MultilayerPerceptronClassifier.getLayers">
<code class="sig-name descname">getLayers</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference external" href="https://github.com/runawayhorse001/LearningApacheSpark/blob/master/pyspark/ml/classification.py#L1629-L1634"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyspark.ml.classification.MultilayerPerceptronClassifier.getLayers" title="Permalink to this definition">¶</a></dt>
<dd><p>Gets the value of layers or its default value.</p>
<div class="versionadded">
<p><span class="versionmodified added">New in version 1.6.0.</span></p>
</div>
</dd></dl>

<dl class="py method">
<dt id="pyspark.ml.classification.MultilayerPerceptronClassifier.getStepSize">
<code class="sig-name descname">getStepSize</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference external" href="https://github.com/runawayhorse001/LearningApacheSpark/blob/master/pyspark/ml/classification.py#L1657-L1662"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyspark.ml.classification.MultilayerPerceptronClassifier.getStepSize" title="Permalink to this definition">¶</a></dt>
<dd><p>Gets the value of stepSize or its default value.</p>
<div class="versionadded">
<p><span class="versionmodified added">New in version 2.0.0.</span></p>
</div>
</dd></dl>

<dl class="py method">
<dt id="pyspark.ml.classification.MultilayerPerceptronClassifier.setBlockSize">
<code class="sig-name descname">setBlockSize</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">value</span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/runawayhorse001/LearningApacheSpark/blob/master/pyspark/ml/classification.py#L1636-L1641"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyspark.ml.classification.MultilayerPerceptronClassifier.setBlockSize" title="Permalink to this definition">¶</a></dt>
<dd><p>Sets the value of <code class="xref py py-attr docutils literal notranslate"><span class="pre">blockSize</span></code>.</p>
<div class="versionadded">
<p><span class="versionmodified added">New in version 1.6.0.</span></p>
</div>
</dd></dl>

<dl class="py method">
<dt id="pyspark.ml.classification.MultilayerPerceptronClassifier.setInitialWeights">
<code class="sig-name descname">setInitialWeights</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">value</span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/runawayhorse001/LearningApacheSpark/blob/master/pyspark/ml/classification.py#L1664-L1669"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyspark.ml.classification.MultilayerPerceptronClassifier.setInitialWeights" title="Permalink to this definition">¶</a></dt>
<dd><p>Sets the value of <code class="xref py py-attr docutils literal notranslate"><span class="pre">initialWeights</span></code>.</p>
<div class="versionadded">
<p><span class="versionmodified added">New in version 2.0.0.</span></p>
</div>
</dd></dl>

<dl class="py method">
<dt id="pyspark.ml.classification.MultilayerPerceptronClassifier.setLayers">
<code class="sig-name descname">setLayers</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">value</span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/runawayhorse001/LearningApacheSpark/blob/master/pyspark/ml/classification.py#L1622-L1627"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyspark.ml.classification.MultilayerPerceptronClassifier.setLayers" title="Permalink to this definition">¶</a></dt>
<dd><p>Sets the value of <code class="xref py py-attr docutils literal notranslate"><span class="pre">layers</span></code>.</p>
<div class="versionadded">
<p><span class="versionmodified added">New in version 1.6.0.</span></p>
</div>
</dd></dl>

<dl class="py method">
<dt id="pyspark.ml.classification.MultilayerPerceptronClassifier.setParams">
<code class="sig-name descname">setParams</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">featuresCol</span><span class="o">=</span><span class="default_value">'features'</span></em>, <em class="sig-param"><span class="n">labelCol</span><span class="o">=</span><span class="default_value">'label'</span></em>, <em class="sig-param"><span class="n">predictionCol</span><span class="o">=</span><span class="default_value">'prediction'</span></em>, <em class="sig-param"><span class="n">maxIter</span><span class="o">=</span><span class="default_value">100</span></em>, <em class="sig-param"><span class="n">tol</span><span class="o">=</span><span class="default_value">1e-06</span></em>, <em class="sig-param"><span class="n">seed</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">layers</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">blockSize</span><span class="o">=</span><span class="default_value">128</span></em>, <em class="sig-param"><span class="n">stepSize</span><span class="o">=</span><span class="default_value">0.03</span></em>, <em class="sig-param"><span class="n">solver</span><span class="o">=</span><span class="default_value">'l-bfgs'</span></em>, <em class="sig-param"><span class="n">initialWeights</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">probabilityCol</span><span class="o">=</span><span class="default_value">'probability'</span></em>, <em class="sig-param"><span class="n">rawPredictionCol</span><span class="o">=</span><span class="default_value">'rawPrediction'</span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/runawayhorse001/LearningApacheSpark/blob/master/pyspark/__init__.py#L1603-L1617"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyspark.ml.classification.MultilayerPerceptronClassifier.setParams" title="Permalink to this definition">¶</a></dt>
<dd><p>setParams(self, featuresCol=”features”, labelCol=”label”, predictionCol=”prediction”,                   maxIter=100, tol=1e-6, seed=None, layers=None, blockSize=128, stepSize=0.03,                   solver=”l-bfgs”, initialWeights=None, probabilityCol=”probability”,                   rawPredictionCol=”rawPrediction”):
Sets params for MultilayerPerceptronClassifier.</p>
<div class="versionadded">
<p><span class="versionmodified added">New in version 1.6.0.</span></p>
</div>
</dd></dl>

<dl class="py method">
<dt id="pyspark.ml.classification.MultilayerPerceptronClassifier.setStepSize">
<code class="sig-name descname">setStepSize</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">value</span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/runawayhorse001/LearningApacheSpark/blob/master/pyspark/ml/classification.py#L1650-L1655"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyspark.ml.classification.MultilayerPerceptronClassifier.setStepSize" title="Permalink to this definition">¶</a></dt>
<dd><p>Sets the value of <code class="xref py py-attr docutils literal notranslate"><span class="pre">stepSize</span></code>.</p>
<div class="versionadded">
<p><span class="versionmodified added">New in version 2.0.0.</span></p>
</div>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt id="pyspark.ml.classification.NaiveBayes">
<em class="property">class </em><code class="sig-prename descclassname">pyspark.ml.classification.</code><code class="sig-name descname">NaiveBayes</code><span class="sig-paren">(</span><em class="sig-param"><span class="o">*</span><span class="n">args</span></em>, <em class="sig-param"><span class="o">**</span><span class="n">kwargs</span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/runawayhorse001/LearningApacheSpark/blob/master/pyspark/ml/classification.py#L1367-L1488"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyspark.ml.classification.NaiveBayes" title="Permalink to this definition">¶</a></dt>
<dd><p>Naive Bayes Classifiers.
It supports both Multinomial and Bernoulli NB. <a class="reference external" href="http://nlp.stanford.edu/IR-book/html/htmledition/naive-bayes-text-classification-1.html">Multinomial NB</a>
can handle finitely supported discrete data. For example, by converting documents into
TF-IDF vectors, it can be used for document classification. By making every vector a
binary (0/1) data, it can also be used as <a class="reference external" href="http://nlp.stanford.edu/IR-book/html/htmledition/the-bernoulli-model-1.html">Bernoulli NB</a>.
The input feature values must be nonnegative.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">pyspark.sql</span> <span class="kn">import</span> <span class="n">Row</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">pyspark.ml.linalg</span> <span class="kn">import</span> <span class="n">Vectors</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">df</span> <span class="o">=</span> <span class="n">spark</span><span class="o">.</span><span class="n">createDataFrame</span><span class="p">([</span>
<span class="gp">... </span>    <span class="n">Row</span><span class="p">(</span><span class="n">label</span><span class="o">=</span><span class="mf">0.0</span><span class="p">,</span> <span class="n">weight</span><span class="o">=</span><span class="mf">0.1</span><span class="p">,</span> <span class="n">features</span><span class="o">=</span><span class="n">Vectors</span><span class="o">.</span><span class="n">dense</span><span class="p">([</span><span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">])),</span>
<span class="gp">... </span>    <span class="n">Row</span><span class="p">(</span><span class="n">label</span><span class="o">=</span><span class="mf">0.0</span><span class="p">,</span> <span class="n">weight</span><span class="o">=</span><span class="mf">0.5</span><span class="p">,</span> <span class="n">features</span><span class="o">=</span><span class="n">Vectors</span><span class="o">.</span><span class="n">dense</span><span class="p">([</span><span class="mf">0.0</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">])),</span>
<span class="gp">... </span>    <span class="n">Row</span><span class="p">(</span><span class="n">label</span><span class="o">=</span><span class="mf">1.0</span><span class="p">,</span> <span class="n">weight</span><span class="o">=</span><span class="mf">1.0</span><span class="p">,</span> <span class="n">features</span><span class="o">=</span><span class="n">Vectors</span><span class="o">.</span><span class="n">dense</span><span class="p">([</span><span class="mf">1.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">]))])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">nb</span> <span class="o">=</span> <span class="n">NaiveBayes</span><span class="p">(</span><span class="n">smoothing</span><span class="o">=</span><span class="mf">1.0</span><span class="p">,</span> <span class="n">modelType</span><span class="o">=</span><span class="s2">&quot;multinomial&quot;</span><span class="p">,</span> <span class="n">weightCol</span><span class="o">=</span><span class="s2">&quot;weight&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">model</span> <span class="o">=</span> <span class="n">nb</span><span class="o">.</span><span class="n">fit</span><span class="p">(</span><span class="n">df</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">model</span><span class="o">.</span><span class="n">pi</span>
<span class="go">DenseVector([-0.81..., -0.58...])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">model</span><span class="o">.</span><span class="n">theta</span>
<span class="go">DenseMatrix(2, 2, [-0.91..., -0.51..., -0.40..., -1.09...], 1)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">test0</span> <span class="o">=</span> <span class="n">sc</span><span class="o">.</span><span class="n">parallelize</span><span class="p">([</span><span class="n">Row</span><span class="p">(</span><span class="n">features</span><span class="o">=</span><span class="n">Vectors</span><span class="o">.</span><span class="n">dense</span><span class="p">([</span><span class="mf">1.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">]))])</span><span class="o">.</span><span class="n">toDF</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">result</span> <span class="o">=</span> <span class="n">model</span><span class="o">.</span><span class="n">transform</span><span class="p">(</span><span class="n">test0</span><span class="p">)</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">result</span><span class="o">.</span><span class="n">prediction</span>
<span class="go">1.0</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">result</span><span class="o">.</span><span class="n">probability</span>
<span class="go">DenseVector([0.32..., 0.67...])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">result</span><span class="o">.</span><span class="n">rawPrediction</span>
<span class="go">DenseVector([-1.72..., -0.99...])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">test1</span> <span class="o">=</span> <span class="n">sc</span><span class="o">.</span><span class="n">parallelize</span><span class="p">([</span><span class="n">Row</span><span class="p">(</span><span class="n">features</span><span class="o">=</span><span class="n">Vectors</span><span class="o">.</span><span class="n">sparse</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="p">[</span><span class="mf">1.0</span><span class="p">]))])</span><span class="o">.</span><span class="n">toDF</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">model</span><span class="o">.</span><span class="n">transform</span><span class="p">(</span><span class="n">test1</span><span class="p">)</span><span class="o">.</span><span class="n">head</span><span class="p">()</span><span class="o">.</span><span class="n">prediction</span>
<span class="go">1.0</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">nb_path</span> <span class="o">=</span> <span class="n">temp_path</span> <span class="o">+</span> <span class="s2">&quot;/nb&quot;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">nb</span><span class="o">.</span><span class="n">save</span><span class="p">(</span><span class="n">nb_path</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">nb2</span> <span class="o">=</span> <span class="n">NaiveBayes</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="n">nb_path</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">nb2</span><span class="o">.</span><span class="n">getSmoothing</span><span class="p">()</span>
<span class="go">1.0</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">model_path</span> <span class="o">=</span> <span class="n">temp_path</span> <span class="o">+</span> <span class="s2">&quot;/nb_model&quot;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">model</span><span class="o">.</span><span class="n">save</span><span class="p">(</span><span class="n">model_path</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">model2</span> <span class="o">=</span> <span class="n">NaiveBayesModel</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="n">model_path</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">model</span><span class="o">.</span><span class="n">pi</span> <span class="o">==</span> <span class="n">model2</span><span class="o">.</span><span class="n">pi</span>
<span class="go">True</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">model</span><span class="o">.</span><span class="n">theta</span> <span class="o">==</span> <span class="n">model2</span><span class="o">.</span><span class="n">theta</span>
<span class="go">True</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">nb</span> <span class="o">=</span> <span class="n">nb</span><span class="o">.</span><span class="n">setThresholds</span><span class="p">([</span><span class="mf">0.01</span><span class="p">,</span> <span class="mf">10.00</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">model3</span> <span class="o">=</span> <span class="n">nb</span><span class="o">.</span><span class="n">fit</span><span class="p">(</span><span class="n">df</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">result</span> <span class="o">=</span> <span class="n">model3</span><span class="o">.</span><span class="n">transform</span><span class="p">(</span><span class="n">test0</span><span class="p">)</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">result</span><span class="o">.</span><span class="n">prediction</span>
<span class="go">0.0</span>
</pre></div>
</div>
<div class="versionadded">
<p><span class="versionmodified added">New in version 1.5.0.</span></p>
</div>
<dl class="py method">
<dt id="pyspark.ml.classification.NaiveBayes.getModelType">
<code class="sig-name descname">getModelType</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference external" href="https://github.com/runawayhorse001/LearningApacheSpark/blob/master/pyspark/ml/classification.py#L1483-L1488"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyspark.ml.classification.NaiveBayes.getModelType" title="Permalink to this definition">¶</a></dt>
<dd><p>Gets the value of modelType or its default value.</p>
<div class="versionadded">
<p><span class="versionmodified added">New in version 1.5.0.</span></p>
</div>
</dd></dl>

<dl class="py method">
<dt id="pyspark.ml.classification.NaiveBayes.getSmoothing">
<code class="sig-name descname">getSmoothing</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference external" href="https://github.com/runawayhorse001/LearningApacheSpark/blob/master/pyspark/ml/classification.py#L1469-L1474"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyspark.ml.classification.NaiveBayes.getSmoothing" title="Permalink to this definition">¶</a></dt>
<dd><p>Gets the value of smoothing or its default value.</p>
<div class="versionadded">
<p><span class="versionmodified added">New in version 1.5.0.</span></p>
</div>
</dd></dl>

<dl class="py method">
<dt id="pyspark.ml.classification.NaiveBayes.setModelType">
<code class="sig-name descname">setModelType</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">value</span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/runawayhorse001/LearningApacheSpark/blob/master/pyspark/ml/classification.py#L1476-L1481"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyspark.ml.classification.NaiveBayes.setModelType" title="Permalink to this definition">¶</a></dt>
<dd><p>Sets the value of <code class="xref py py-attr docutils literal notranslate"><span class="pre">modelType</span></code>.</p>
<div class="versionadded">
<p><span class="versionmodified added">New in version 1.5.0.</span></p>
</div>
</dd></dl>

<dl class="py method">
<dt id="pyspark.ml.classification.NaiveBayes.setParams">
<code class="sig-name descname">setParams</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">self</span></em>, <em class="sig-param"><span class="n">featuresCol</span><span class="o">=</span><span class="default_value">'features'</span></em>, <em class="sig-param"><span class="n">labelCol</span><span class="o">=</span><span class="default_value">'label'</span></em>, <em class="sig-param"><span class="n">predictionCol</span><span class="o">=</span><span class="default_value">'prediction'</span></em>, <em class="sig-param"><span class="n">probabilityCol</span><span class="o">=</span><span class="default_value">'probability'</span></em>, <em class="sig-param"><span class="n">rawPredictionCol</span><span class="o">=</span><span class="default_value">'rawPrediction'</span></em>, <em class="sig-param"><span class="n">smoothing</span><span class="o">=</span><span class="default_value">1.0</span></em>, <em class="sig-param"><span class="n">modelType</span><span class="o">=</span><span class="default_value">'multinomial'</span></em>, <em class="sig-param"><span class="n">thresholds</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">weightCol</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/runawayhorse001/LearningApacheSpark/blob/master/pyspark/__init__.py#L1445-L1457"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyspark.ml.classification.NaiveBayes.setParams" title="Permalink to this definition">¶</a></dt>
<dd><p>Sets params for Naive Bayes.</p>
<div class="versionadded">
<p><span class="versionmodified added">New in version 1.5.0.</span></p>
</div>
</dd></dl>

<dl class="py method">
<dt id="pyspark.ml.classification.NaiveBayes.setSmoothing">
<code class="sig-name descname">setSmoothing</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">value</span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/runawayhorse001/LearningApacheSpark/blob/master/pyspark/ml/classification.py#L1462-L1467"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyspark.ml.classification.NaiveBayes.setSmoothing" title="Permalink to this definition">¶</a></dt>
<dd><p>Sets the value of <code class="xref py py-attr docutils literal notranslate"><span class="pre">smoothing</span></code>.</p>
<div class="versionadded">
<p><span class="versionmodified added">New in version 1.5.0.</span></p>
</div>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt id="pyspark.ml.classification.NaiveBayesModel">
<em class="property">class </em><code class="sig-prename descclassname">pyspark.ml.classification.</code><code class="sig-name descname">NaiveBayesModel</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">java_model</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/runawayhorse001/LearningApacheSpark/blob/master/pyspark/ml/classification.py#L1491-L1512"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyspark.ml.classification.NaiveBayesModel" title="Permalink to this definition">¶</a></dt>
<dd><p>Model fitted by NaiveBayes.</p>
<div class="versionadded">
<p><span class="versionmodified added">New in version 1.5.0.</span></p>
</div>
<dl class="py method">
<dt id="pyspark.ml.classification.NaiveBayesModel.pi">
<em class="property">property </em><code class="sig-name descname">pi</code><a class="reference external" href="https://github.com/runawayhorse001/LearningApacheSpark/blob/master/pyspark/ml/classification.py"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyspark.ml.classification.NaiveBayesModel.pi" title="Permalink to this definition">¶</a></dt>
<dd><p>log of class priors.</p>
<div class="versionadded">
<p><span class="versionmodified added">New in version 2.0.0.</span></p>
</div>
</dd></dl>

<dl class="py method">
<dt id="pyspark.ml.classification.NaiveBayesModel.theta">
<em class="property">property </em><code class="sig-name descname">theta</code><a class="reference external" href="https://github.com/runawayhorse001/LearningApacheSpark/blob/master/pyspark/ml/classification.py"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyspark.ml.classification.NaiveBayesModel.theta" title="Permalink to this definition">¶</a></dt>
<dd><p>log of class conditional probabilities.</p>
<div class="versionadded">
<p><span class="versionmodified added">New in version 2.0.0.</span></p>
</div>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt id="pyspark.ml.classification.OneVsRest">
<em class="property">class </em><code class="sig-prename descclassname">pyspark.ml.classification.</code><code class="sig-name descname">OneVsRest</code><span class="sig-paren">(</span><em class="sig-param"><span class="o">*</span><span class="n">args</span></em>, <em class="sig-param"><span class="o">**</span><span class="n">kwargs</span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/runawayhorse001/LearningApacheSpark/blob/master/pyspark/ml/classification.py#L1729-L1935"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyspark.ml.classification.OneVsRest" title="Permalink to this definition">¶</a></dt>
<dd><div class="admonition note">
<p class="admonition-title">Note</p>
<p>Experimental</p>
</div>
<p>Reduction of Multiclass Classification to Binary Classification.
Performs reduction using one against all strategy.
For a multiclass classification with k classes, train k models (one per class).
Each example is scored against all k models and the model with highest score
is picked to label the example.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">pyspark.sql</span> <span class="kn">import</span> <span class="n">Row</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">pyspark.ml.linalg</span> <span class="kn">import</span> <span class="n">Vectors</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">data_path</span> <span class="o">=</span> <span class="s2">&quot;data/mllib/sample_multiclass_classification_data.txt&quot;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">df</span> <span class="o">=</span> <span class="n">spark</span><span class="o">.</span><span class="n">read</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="s2">&quot;libsvm&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="n">data_path</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">lr</span> <span class="o">=</span> <span class="n">LogisticRegression</span><span class="p">(</span><span class="n">regParam</span><span class="o">=</span><span class="mf">0.01</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ovr</span> <span class="o">=</span> <span class="n">OneVsRest</span><span class="p">(</span><span class="n">classifier</span><span class="o">=</span><span class="n">lr</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">model</span> <span class="o">=</span> <span class="n">ovr</span><span class="o">.</span><span class="n">fit</span><span class="p">(</span><span class="n">df</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">model</span><span class="o">.</span><span class="n">models</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">coefficients</span>
<span class="go">DenseVector([0.5..., -1.0..., 3.4..., 4.2...])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">model</span><span class="o">.</span><span class="n">models</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">coefficients</span>
<span class="go">DenseVector([-2.1..., 3.1..., -2.6..., -2.3...])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">model</span><span class="o">.</span><span class="n">models</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span><span class="o">.</span><span class="n">coefficients</span>
<span class="go">DenseVector([0.3..., -3.4..., 1.0..., -1.1...])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="p">[</span><span class="n">x</span><span class="o">.</span><span class="n">intercept</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">model</span><span class="o">.</span><span class="n">models</span><span class="p">]</span>
<span class="go">[-2.7..., -2.5..., -1.3...]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">test0</span> <span class="o">=</span> <span class="n">sc</span><span class="o">.</span><span class="n">parallelize</span><span class="p">([</span><span class="n">Row</span><span class="p">(</span><span class="n">features</span><span class="o">=</span><span class="n">Vectors</span><span class="o">.</span><span class="n">dense</span><span class="p">(</span><span class="o">-</span><span class="mf">1.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">))])</span><span class="o">.</span><span class="n">toDF</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">model</span><span class="o">.</span><span class="n">transform</span><span class="p">(</span><span class="n">test0</span><span class="p">)</span><span class="o">.</span><span class="n">head</span><span class="p">()</span><span class="o">.</span><span class="n">prediction</span>
<span class="go">0.0</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">test1</span> <span class="o">=</span> <span class="n">sc</span><span class="o">.</span><span class="n">parallelize</span><span class="p">([</span><span class="n">Row</span><span class="p">(</span><span class="n">features</span><span class="o">=</span><span class="n">Vectors</span><span class="o">.</span><span class="n">sparse</span><span class="p">(</span><span class="mi">4</span><span class="p">,</span> <span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="p">[</span><span class="mf">1.0</span><span class="p">]))])</span><span class="o">.</span><span class="n">toDF</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">model</span><span class="o">.</span><span class="n">transform</span><span class="p">(</span><span class="n">test1</span><span class="p">)</span><span class="o">.</span><span class="n">head</span><span class="p">()</span><span class="o">.</span><span class="n">prediction</span>
<span class="go">2.0</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">test2</span> <span class="o">=</span> <span class="n">sc</span><span class="o">.</span><span class="n">parallelize</span><span class="p">([</span><span class="n">Row</span><span class="p">(</span><span class="n">features</span><span class="o">=</span><span class="n">Vectors</span><span class="o">.</span><span class="n">dense</span><span class="p">(</span><span class="mf">0.5</span><span class="p">,</span> <span class="mf">0.4</span><span class="p">,</span> <span class="mf">0.3</span><span class="p">,</span> <span class="mf">0.2</span><span class="p">))])</span><span class="o">.</span><span class="n">toDF</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">model</span><span class="o">.</span><span class="n">transform</span><span class="p">(</span><span class="n">test2</span><span class="p">)</span><span class="o">.</span><span class="n">head</span><span class="p">()</span><span class="o">.</span><span class="n">prediction</span>
<span class="go">0.0</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">model_path</span> <span class="o">=</span> <span class="n">temp_path</span> <span class="o">+</span> <span class="s2">&quot;/ovr_model&quot;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">model</span><span class="o">.</span><span class="n">save</span><span class="p">(</span><span class="n">model_path</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">model2</span> <span class="o">=</span> <span class="n">OneVsRestModel</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="n">model_path</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">model2</span><span class="o">.</span><span class="n">transform</span><span class="p">(</span><span class="n">test0</span><span class="p">)</span><span class="o">.</span><span class="n">head</span><span class="p">()</span><span class="o">.</span><span class="n">prediction</span>
<span class="go">0.0</span>
</pre></div>
</div>
<div class="versionadded">
<p><span class="versionmodified added">New in version 2.0.0.</span></p>
</div>
<dl class="py method">
<dt id="pyspark.ml.classification.OneVsRest.copy">
<code class="sig-name descname">copy</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">extra</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/runawayhorse001/LearningApacheSpark/blob/master/pyspark/ml/classification.py#L1845-L1860"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyspark.ml.classification.OneVsRest.copy" title="Permalink to this definition">¶</a></dt>
<dd><p>Creates a copy of this instance with a randomly generated uid
and some extra params. This creates a deep copy of the embedded paramMap,
and copies the embedded and extra parameters over.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>extra</strong> – Extra parameters to copy to the new instance</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Copy of this instance</p>
</dd>
</dl>
<div class="versionadded">
<p><span class="versionmodified added">New in version 2.0.0.</span></p>
</div>
</dd></dl>

<dl class="py method">
<dt id="pyspark.ml.classification.OneVsRest.setParams">
<code class="sig-name descname">setParams</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">featuresCol</span><span class="o">=</span><span class="default_value">'features'</span></em>, <em class="sig-param"><span class="n">labelCol</span><span class="o">=</span><span class="default_value">'label'</span></em>, <em class="sig-param"><span class="n">predictionCol</span><span class="o">=</span><span class="default_value">'prediction'</span></em>, <em class="sig-param"><span class="n">classifier</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">weightCol</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">parallelism</span><span class="o">=</span><span class="default_value">1</span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/runawayhorse001/LearningApacheSpark/blob/master/pyspark/__init__.py#L1784-L1794"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyspark.ml.classification.OneVsRest.setParams" title="Permalink to this definition">¶</a></dt>
<dd><p>setParams(self, featuresCol=”features”, labelCol=”label”, predictionCol=”prediction”,                   classifier=None, weightCol=None, parallelism=1):
Sets params for OneVsRest.</p>
<div class="versionadded">
<p><span class="versionmodified added">New in version 2.0.0.</span></p>
</div>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt id="pyspark.ml.classification.OneVsRestModel">
<em class="property">class </em><code class="sig-prename descclassname">pyspark.ml.classification.</code><code class="sig-name descname">OneVsRestModel</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">models</span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/runawayhorse001/LearningApacheSpark/blob/master/pyspark/ml/classification.py#L1938-L2060"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyspark.ml.classification.OneVsRestModel" title="Permalink to this definition">¶</a></dt>
<dd><div class="admonition note">
<p class="admonition-title">Note</p>
<p>Experimental</p>
</div>
<p>Model fitted by OneVsRest.
This stores the models resulting from training k binary classifiers: one for each class.
Each example is scored against all k models, and the model with the highest score
is picked to label the example.</p>
<div class="versionadded">
<p><span class="versionmodified added">New in version 2.0.0.</span></p>
</div>
<dl class="py method">
<dt id="pyspark.ml.classification.OneVsRestModel.copy">
<code class="sig-name descname">copy</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">extra</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/runawayhorse001/LearningApacheSpark/blob/master/pyspark/ml/classification.py#L2011-L2025"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyspark.ml.classification.OneVsRestModel.copy" title="Permalink to this definition">¶</a></dt>
<dd><p>Creates a copy of this instance with a randomly generated uid
and some extra params. This creates a deep copy of the embedded paramMap,
and copies the embedded and extra parameters over.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>extra</strong> – Extra parameters to copy to the new instance</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Copy of this instance</p>
</dd>
</dl>
<div class="versionadded">
<p><span class="versionmodified added">New in version 2.0.0.</span></p>
</div>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt id="pyspark.ml.classification.RandomForestClassificationModel">
<em class="property">class </em><code class="sig-prename descclassname">pyspark.ml.classification.</code><code class="sig-name descname">RandomForestClassificationModel</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">java_model</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/runawayhorse001/LearningApacheSpark/blob/master/pyspark/ml/classification.py#L1147-L1174"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyspark.ml.classification.RandomForestClassificationModel" title="Permalink to this definition">¶</a></dt>
<dd><p>Model fitted by RandomForestClassifier.</p>
<div class="versionadded">
<p><span class="versionmodified added">New in version 1.4.0.</span></p>
</div>
<dl class="py method">
<dt id="pyspark.ml.classification.RandomForestClassificationModel.featureImportances">
<em class="property">property </em><code class="sig-name descname">featureImportances</code><a class="reference external" href="https://github.com/runawayhorse001/LearningApacheSpark/blob/master/pyspark/ml/classification.py"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyspark.ml.classification.RandomForestClassificationModel.featureImportances" title="Permalink to this definition">¶</a></dt>
<dd><p>Estimate of the importance of each feature.</p>
<p>Each feature’s importance is the average of its importance across all trees in the ensemble
The importance vector is normalized to sum to 1. This method is suggested by Hastie et al.
(Hastie, Tibshirani, Friedman. “The Elements of Statistical Learning, 2nd Edition.” 2001.)
and follows the implementation from scikit-learn.</p>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference internal" href="#pyspark.ml.classification.DecisionTreeClassificationModel.featureImportances" title="pyspark.ml.classification.DecisionTreeClassificationModel.featureImportances"><code class="xref py py-attr docutils literal notranslate"><span class="pre">DecisionTreeClassificationModel.featureImportances</span></code></a></p>
</div>
<div class="versionadded">
<p><span class="versionmodified added">New in version 2.0.0.</span></p>
</div>
</dd></dl>

<dl class="py method">
<dt id="pyspark.ml.classification.RandomForestClassificationModel.trees">
<em class="property">property </em><code class="sig-name descname">trees</code><a class="reference external" href="https://github.com/runawayhorse001/LearningApacheSpark/blob/master/pyspark/ml/classification.py"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyspark.ml.classification.RandomForestClassificationModel.trees" title="Permalink to this definition">¶</a></dt>
<dd><p>These have null parent Estimators.</p>
<div class="versionadded">
<p><span class="versionmodified added">New in version 2.0.0.</span></p>
</div>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p>Trees in this ensemble. Warning</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt id="pyspark.ml.classification.RandomForestClassifier">
<em class="property">class </em><code class="sig-prename descclassname">pyspark.ml.classification.</code><code class="sig-name descname">RandomForestClassifier</code><span class="sig-paren">(</span><em class="sig-param"><span class="o">*</span><span class="n">args</span></em>, <em class="sig-param"><span class="o">**</span><span class="n">kwargs</span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/runawayhorse001/LearningApacheSpark/blob/master/pyspark/ml/classification.py#L1042-L1144"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyspark.ml.classification.RandomForestClassifier" title="Permalink to this definition">¶</a></dt>
<dd><p><a class="reference external" href="http://en.wikipedia.org/wiki/Random_forest">Random Forest</a>
learning algorithm for classification.
It supports both binary and multiclass labels, as well as both continuous and categorical
features.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">numpy</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">numpy</span> <span class="kn">import</span> <span class="n">allclose</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">pyspark.ml.linalg</span> <span class="kn">import</span> <span class="n">Vectors</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">pyspark.ml.feature</span> <span class="kn">import</span> <span class="n">StringIndexer</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">df</span> <span class="o">=</span> <span class="n">spark</span><span class="o">.</span><span class="n">createDataFrame</span><span class="p">([</span>
<span class="gp">... </span>    <span class="p">(</span><span class="mf">1.0</span><span class="p">,</span> <span class="n">Vectors</span><span class="o">.</span><span class="n">dense</span><span class="p">(</span><span class="mf">1.0</span><span class="p">)),</span>
<span class="gp">... </span>    <span class="p">(</span><span class="mf">0.0</span><span class="p">,</span> <span class="n">Vectors</span><span class="o">.</span><span class="n">sparse</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="p">[],</span> <span class="p">[]))],</span> <span class="p">[</span><span class="s2">&quot;label&quot;</span><span class="p">,</span> <span class="s2">&quot;features&quot;</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">stringIndexer</span> <span class="o">=</span> <span class="n">StringIndexer</span><span class="p">(</span><span class="n">inputCol</span><span class="o">=</span><span class="s2">&quot;label&quot;</span><span class="p">,</span> <span class="n">outputCol</span><span class="o">=</span><span class="s2">&quot;indexed&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">si_model</span> <span class="o">=</span> <span class="n">stringIndexer</span><span class="o">.</span><span class="n">fit</span><span class="p">(</span><span class="n">df</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">td</span> <span class="o">=</span> <span class="n">si_model</span><span class="o">.</span><span class="n">transform</span><span class="p">(</span><span class="n">df</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">rf</span> <span class="o">=</span> <span class="n">RandomForestClassifier</span><span class="p">(</span><span class="n">numTrees</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span> <span class="n">maxDepth</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">labelCol</span><span class="o">=</span><span class="s2">&quot;indexed&quot;</span><span class="p">,</span> <span class="n">seed</span><span class="o">=</span><span class="mi">42</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">model</span> <span class="o">=</span> <span class="n">rf</span><span class="o">.</span><span class="n">fit</span><span class="p">(</span><span class="n">td</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">model</span><span class="o">.</span><span class="n">featureImportances</span>
<span class="go">SparseVector(1, {0: 1.0})</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">allclose</span><span class="p">(</span><span class="n">model</span><span class="o">.</span><span class="n">treeWeights</span><span class="p">,</span> <span class="p">[</span><span class="mf">1.0</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">])</span>
<span class="go">True</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">test0</span> <span class="o">=</span> <span class="n">spark</span><span class="o">.</span><span class="n">createDataFrame</span><span class="p">([(</span><span class="n">Vectors</span><span class="o">.</span><span class="n">dense</span><span class="p">(</span><span class="o">-</span><span class="mf">1.0</span><span class="p">),)],</span> <span class="p">[</span><span class="s2">&quot;features&quot;</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">result</span> <span class="o">=</span> <span class="n">model</span><span class="o">.</span><span class="n">transform</span><span class="p">(</span><span class="n">test0</span><span class="p">)</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">result</span><span class="o">.</span><span class="n">prediction</span>
<span class="go">0.0</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">numpy</span><span class="o">.</span><span class="n">argmax</span><span class="p">(</span><span class="n">result</span><span class="o">.</span><span class="n">probability</span><span class="p">)</span>
<span class="go">0</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">numpy</span><span class="o">.</span><span class="n">argmax</span><span class="p">(</span><span class="n">result</span><span class="o">.</span><span class="n">rawPrediction</span><span class="p">)</span>
<span class="go">0</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">test1</span> <span class="o">=</span> <span class="n">spark</span><span class="o">.</span><span class="n">createDataFrame</span><span class="p">([(</span><span class="n">Vectors</span><span class="o">.</span><span class="n">sparse</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="p">[</span><span class="mf">1.0</span><span class="p">]),)],</span> <span class="p">[</span><span class="s2">&quot;features&quot;</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">model</span><span class="o">.</span><span class="n">transform</span><span class="p">(</span><span class="n">test1</span><span class="p">)</span><span class="o">.</span><span class="n">head</span><span class="p">()</span><span class="o">.</span><span class="n">prediction</span>
<span class="go">1.0</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">model</span><span class="o">.</span><span class="n">trees</span>
<span class="go">[DecisionTreeClassificationModel (uid=...) of depth..., DecisionTreeClassificationModel...]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">rfc_path</span> <span class="o">=</span> <span class="n">temp_path</span> <span class="o">+</span> <span class="s2">&quot;/rfc&quot;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">rf</span><span class="o">.</span><span class="n">save</span><span class="p">(</span><span class="n">rfc_path</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">rf2</span> <span class="o">=</span> <span class="n">RandomForestClassifier</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="n">rfc_path</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">rf2</span><span class="o">.</span><span class="n">getNumTrees</span><span class="p">()</span>
<span class="go">3</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">model_path</span> <span class="o">=</span> <span class="n">temp_path</span> <span class="o">+</span> <span class="s2">&quot;/rfc_model&quot;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">model</span><span class="o">.</span><span class="n">save</span><span class="p">(</span><span class="n">model_path</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">model2</span> <span class="o">=</span> <span class="n">RandomForestClassificationModel</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="n">model_path</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">model</span><span class="o">.</span><span class="n">featureImportances</span> <span class="o">==</span> <span class="n">model2</span><span class="o">.</span><span class="n">featureImportances</span>
<span class="go">True</span>
</pre></div>
</div>
<div class="versionadded">
<p><span class="versionmodified added">New in version 1.4.0.</span></p>
</div>
<dl class="py method">
<dt id="pyspark.ml.classification.RandomForestClassifier.setFeatureSubsetStrategy">
<code class="sig-name descname">setFeatureSubsetStrategy</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">value</span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/runawayhorse001/LearningApacheSpark/blob/master/pyspark/ml/classification.py#L1139-L1144"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyspark.ml.classification.RandomForestClassifier.setFeatureSubsetStrategy" title="Permalink to this definition">¶</a></dt>
<dd><p>Sets the value of <code class="xref py py-attr docutils literal notranslate"><span class="pre">featureSubsetStrategy</span></code>.</p>
<div class="versionadded">
<p><span class="versionmodified added">New in version 2.4.0.</span></p>
</div>
</dd></dl>

<dl class="py method">
<dt id="pyspark.ml.classification.RandomForestClassifier.setParams">
<code class="sig-name descname">setParams</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">self</span></em>, <em class="sig-param"><span class="n">featuresCol</span><span class="o">=</span><span class="default_value">'features'</span></em>, <em class="sig-param"><span class="n">labelCol</span><span class="o">=</span><span class="default_value">'label'</span></em>, <em class="sig-param"><span class="n">predictionCol</span><span class="o">=</span><span class="default_value">'prediction'</span></em>, <em class="sig-param"><span class="n">probabilityCol</span><span class="o">=</span><span class="default_value">'probability'</span></em>, <em class="sig-param"><span class="n">rawPredictionCol</span><span class="o">=</span><span class="default_value">'rawPrediction'</span></em>, <em class="sig-param"><span class="n">maxDepth</span><span class="o">=</span><span class="default_value">5</span></em>, <em class="sig-param"><span class="n">maxBins</span><span class="o">=</span><span class="default_value">32</span></em>, <em class="sig-param"><span class="n">minInstancesPerNode</span><span class="o">=</span><span class="default_value">1</span></em>, <em class="sig-param"><span class="n">minInfoGain</span><span class="o">=</span><span class="default_value">0.0</span></em>, <em class="sig-param"><span class="n">maxMemoryInMB</span><span class="o">=</span><span class="default_value">256</span></em>, <em class="sig-param"><span class="n">cacheNodeIds</span><span class="o">=</span><span class="default_value">False</span></em>, <em class="sig-param"><span class="n">checkpointInterval</span><span class="o">=</span><span class="default_value">10</span></em>, <em class="sig-param"><span class="n">seed</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">impurity</span><span class="o">=</span><span class="default_value">'gini'</span></em>, <em class="sig-param"><span class="n">numTrees</span><span class="o">=</span><span class="default_value">20</span></em>, <em class="sig-param"><span class="n">featureSubsetStrategy</span><span class="o">=</span><span class="default_value">'auto'</span></em>, <em class="sig-param"><span class="n">subsamplingRate</span><span class="o">=</span><span class="default_value">1.0</span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/runawayhorse001/LearningApacheSpark/blob/master/pyspark/__init__.py#L1118-L1134"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyspark.ml.classification.RandomForestClassifier.setParams" title="Permalink to this definition">¶</a></dt>
<dd><p>Sets params for linear classification.</p>
<div class="versionadded">
<p><span class="versionmodified added">New in version 1.4.0.</span></p>
</div>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="module-pyspark.ml.clustering">
<span id="clustering-api"></span><h2><span class="section-number">27.4. </span>Clustering API<a class="headerlink" href="#module-pyspark.ml.clustering" title="Permalink to this headline">¶</a></h2>
<dl class="py class">
<dt id="pyspark.ml.clustering.BisectingKMeans">
<em class="property">class </em><code class="sig-prename descclassname">pyspark.ml.clustering.</code><code class="sig-name descname">BisectingKMeans</code><span class="sig-paren">(</span><em class="sig-param"><span class="o">*</span><span class="n">args</span></em>, <em class="sig-param"><span class="o">**</span><span class="n">kwargs</span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/runawayhorse001/LearningApacheSpark/blob/master/pyspark/ml/clustering.py#L569-L701"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyspark.ml.clustering.BisectingKMeans" title="Permalink to this definition">¶</a></dt>
<dd><p>A bisecting k-means algorithm based on the paper “A comparison of document clustering
techniques” by Steinbach, Karypis, and Kumar, with modification to fit Spark.
The algorithm starts from a single cluster that contains all points.
Iteratively it finds divisible clusters on the bottom level and bisects each of them using
k-means, until there are <img class="math" src="_images/math/399613003fa16a4cb28778c29474b2bc84961dc2.png" alt="k"/> leaf clusters in total or no leaf clusters are divisible.
The bisecting steps of clusters on the same level are grouped together to increase parallelism.
If bisecting all divisible clusters on the bottom level would result more than <img class="math" src="_images/math/399613003fa16a4cb28778c29474b2bc84961dc2.png" alt="k"/> leaf
clusters, larger clusters get higher priority.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">pyspark.ml.linalg</span> <span class="kn">import</span> <span class="n">Vectors</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">data</span> <span class="o">=</span> <span class="p">[(</span><span class="n">Vectors</span><span class="o">.</span><span class="n">dense</span><span class="p">([</span><span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">]),),</span> <span class="p">(</span><span class="n">Vectors</span><span class="o">.</span><span class="n">dense</span><span class="p">([</span><span class="mf">1.0</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">]),),</span>
<span class="gp">... </span>        <span class="p">(</span><span class="n">Vectors</span><span class="o">.</span><span class="n">dense</span><span class="p">([</span><span class="mf">9.0</span><span class="p">,</span> <span class="mf">8.0</span><span class="p">]),),</span> <span class="p">(</span><span class="n">Vectors</span><span class="o">.</span><span class="n">dense</span><span class="p">([</span><span class="mf">8.0</span><span class="p">,</span> <span class="mf">9.0</span><span class="p">]),)]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">df</span> <span class="o">=</span> <span class="n">spark</span><span class="o">.</span><span class="n">createDataFrame</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="p">[</span><span class="s2">&quot;features&quot;</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">bkm</span> <span class="o">=</span> <span class="n">BisectingKMeans</span><span class="p">(</span><span class="n">k</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">minDivisibleClusterSize</span><span class="o">=</span><span class="mf">1.0</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">model</span> <span class="o">=</span> <span class="n">bkm</span><span class="o">.</span><span class="n">fit</span><span class="p">(</span><span class="n">df</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">centers</span> <span class="o">=</span> <span class="n">model</span><span class="o">.</span><span class="n">clusterCenters</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">len</span><span class="p">(</span><span class="n">centers</span><span class="p">)</span>
<span class="go">2</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">model</span><span class="o">.</span><span class="n">computeCost</span><span class="p">(</span><span class="n">df</span><span class="p">)</span>
<span class="go">2.000...</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">model</span><span class="o">.</span><span class="n">hasSummary</span>
<span class="go">True</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">summary</span> <span class="o">=</span> <span class="n">model</span><span class="o">.</span><span class="n">summary</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">summary</span><span class="o">.</span><span class="n">k</span>
<span class="go">2</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">summary</span><span class="o">.</span><span class="n">clusterSizes</span>
<span class="go">[2, 2]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">transformed</span> <span class="o">=</span> <span class="n">model</span><span class="o">.</span><span class="n">transform</span><span class="p">(</span><span class="n">df</span><span class="p">)</span><span class="o">.</span><span class="n">select</span><span class="p">(</span><span class="s2">&quot;features&quot;</span><span class="p">,</span> <span class="s2">&quot;prediction&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">rows</span> <span class="o">=</span> <span class="n">transformed</span><span class="o">.</span><span class="n">collect</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">rows</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">prediction</span> <span class="o">==</span> <span class="n">rows</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">prediction</span>
<span class="go">True</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">rows</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span><span class="o">.</span><span class="n">prediction</span> <span class="o">==</span> <span class="n">rows</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span><span class="o">.</span><span class="n">prediction</span>
<span class="go">True</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">bkm_path</span> <span class="o">=</span> <span class="n">temp_path</span> <span class="o">+</span> <span class="s2">&quot;/bkm&quot;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">bkm</span><span class="o">.</span><span class="n">save</span><span class="p">(</span><span class="n">bkm_path</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">bkm2</span> <span class="o">=</span> <span class="n">BisectingKMeans</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="n">bkm_path</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">bkm2</span><span class="o">.</span><span class="n">getK</span><span class="p">()</span>
<span class="go">2</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">bkm2</span><span class="o">.</span><span class="n">getDistanceMeasure</span><span class="p">()</span>
<span class="go">&#39;euclidean&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">model_path</span> <span class="o">=</span> <span class="n">temp_path</span> <span class="o">+</span> <span class="s2">&quot;/bkm_model&quot;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">model</span><span class="o">.</span><span class="n">save</span><span class="p">(</span><span class="n">model_path</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">model2</span> <span class="o">=</span> <span class="n">BisectingKMeansModel</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="n">model_path</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">model2</span><span class="o">.</span><span class="n">hasSummary</span>
<span class="go">False</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">model</span><span class="o">.</span><span class="n">clusterCenters</span><span class="p">()[</span><span class="mi">0</span><span class="p">]</span> <span class="o">==</span> <span class="n">model2</span><span class="o">.</span><span class="n">clusterCenters</span><span class="p">()[</span><span class="mi">0</span><span class="p">]</span>
<span class="go">array([ True,  True], dtype=bool)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">model</span><span class="o">.</span><span class="n">clusterCenters</span><span class="p">()[</span><span class="mi">1</span><span class="p">]</span> <span class="o">==</span> <span class="n">model2</span><span class="o">.</span><span class="n">clusterCenters</span><span class="p">()[</span><span class="mi">1</span><span class="p">]</span>
<span class="go">array([ True,  True], dtype=bool)</span>
</pre></div>
</div>
<div class="versionadded">
<p><span class="versionmodified added">New in version 2.0.0.</span></p>
</div>
<dl class="py method">
<dt id="pyspark.ml.clustering.BisectingKMeans.getDistanceMeasure">
<code class="sig-name descname">getDistanceMeasure</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference external" href="https://github.com/runawayhorse001/LearningApacheSpark/blob/master/pyspark/ml/clustering.py#L693-L698"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyspark.ml.clustering.BisectingKMeans.getDistanceMeasure" title="Permalink to this definition">¶</a></dt>
<dd><p>Gets the value of <img class="math" src="_images/math/30f643b3990e62346b8dd12cda8088cea4f1b498.png" alt="distanceMeasure"/> or its default value.</p>
<div class="versionadded">
<p><span class="versionmodified added">New in version 2.4.0.</span></p>
</div>
</dd></dl>

<dl class="py method">
<dt id="pyspark.ml.clustering.BisectingKMeans.getK">
<code class="sig-name descname">getK</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference external" href="https://github.com/runawayhorse001/LearningApacheSpark/blob/master/pyspark/ml/clustering.py#L665-L670"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyspark.ml.clustering.BisectingKMeans.getK" title="Permalink to this definition">¶</a></dt>
<dd><p>Gets the value of <img class="math" src="_images/math/399613003fa16a4cb28778c29474b2bc84961dc2.png" alt="k"/> or its default value.</p>
<div class="versionadded">
<p><span class="versionmodified added">New in version 2.0.0.</span></p>
</div>
</dd></dl>

<dl class="py method">
<dt id="pyspark.ml.clustering.BisectingKMeans.getMinDivisibleClusterSize">
<code class="sig-name descname">getMinDivisibleClusterSize</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference external" href="https://github.com/runawayhorse001/LearningApacheSpark/blob/master/pyspark/ml/clustering.py#L679-L684"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyspark.ml.clustering.BisectingKMeans.getMinDivisibleClusterSize" title="Permalink to this definition">¶</a></dt>
<dd><p>Gets the value of <img class="math" src="_images/math/4928e0e1d15832f648d3b606b4e9a0c7fabc306b.png" alt="minDivisibleClusterSize"/> or its default value.</p>
<div class="versionadded">
<p><span class="versionmodified added">New in version 2.0.0.</span></p>
</div>
</dd></dl>

<dl class="py method">
<dt id="pyspark.ml.clustering.BisectingKMeans.setDistanceMeasure">
<code class="sig-name descname">setDistanceMeasure</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">value</span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/runawayhorse001/LearningApacheSpark/blob/master/pyspark/ml/clustering.py#L686-L691"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyspark.ml.clustering.BisectingKMeans.setDistanceMeasure" title="Permalink to this definition">¶</a></dt>
<dd><p>Sets the value of <code class="xref py py-attr docutils literal notranslate"><span class="pre">distanceMeasure</span></code>.</p>
<div class="versionadded">
<p><span class="versionmodified added">New in version 2.4.0.</span></p>
</div>
</dd></dl>

<dl class="py method">
<dt id="pyspark.ml.clustering.BisectingKMeans.setK">
<code class="sig-name descname">setK</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">value</span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/runawayhorse001/LearningApacheSpark/blob/master/pyspark/ml/clustering.py#L658-L663"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyspark.ml.clustering.BisectingKMeans.setK" title="Permalink to this definition">¶</a></dt>
<dd><p>Sets the value of <code class="xref py py-attr docutils literal notranslate"><span class="pre">k</span></code>.</p>
<div class="versionadded">
<p><span class="versionmodified added">New in version 2.0.0.</span></p>
</div>
</dd></dl>

<dl class="py method">
<dt id="pyspark.ml.clustering.BisectingKMeans.setMinDivisibleClusterSize">
<code class="sig-name descname">setMinDivisibleClusterSize</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">value</span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/runawayhorse001/LearningApacheSpark/blob/master/pyspark/ml/clustering.py#L672-L677"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyspark.ml.clustering.BisectingKMeans.setMinDivisibleClusterSize" title="Permalink to this definition">¶</a></dt>
<dd><p>Sets the value of <code class="xref py py-attr docutils literal notranslate"><span class="pre">minDivisibleClusterSize</span></code>.</p>
<div class="versionadded">
<p><span class="versionmodified added">New in version 2.0.0.</span></p>
</div>
</dd></dl>

<dl class="py method">
<dt id="pyspark.ml.clustering.BisectingKMeans.setParams">
<code class="sig-name descname">setParams</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">self</span></em>, <em class="sig-param"><span class="n">featuresCol</span><span class="o">=</span><span class="default_value">'features'</span></em>, <em class="sig-param"><span class="n">predictionCol</span><span class="o">=</span><span class="default_value">'prediction'</span></em>, <em class="sig-param"><span class="n">maxIter</span><span class="o">=</span><span class="default_value">20</span></em>, <em class="sig-param"><span class="n">seed</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">k</span><span class="o">=</span><span class="default_value">4</span></em>, <em class="sig-param"><span class="n">minDivisibleClusterSize</span><span class="o">=</span><span class="default_value">1.0</span></em>, <em class="sig-param"><span class="n">distanceMeasure</span><span class="o">=</span><span class="default_value">'euclidean'</span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/runawayhorse001/LearningApacheSpark/blob/master/pyspark/__init__.py#L646-L656"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyspark.ml.clustering.BisectingKMeans.setParams" title="Permalink to this definition">¶</a></dt>
<dd><p>Sets params for BisectingKMeans.</p>
<div class="versionadded">
<p><span class="versionmodified added">New in version 2.0.0.</span></p>
</div>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt id="pyspark.ml.clustering.BisectingKMeansModel">
<em class="property">class </em><code class="sig-prename descclassname">pyspark.ml.clustering.</code><code class="sig-name descname">BisectingKMeansModel</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">java_model</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/runawayhorse001/LearningApacheSpark/blob/master/pyspark/ml/clustering.py#L526-L565"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyspark.ml.clustering.BisectingKMeansModel" title="Permalink to this definition">¶</a></dt>
<dd><p>Model fitted by BisectingKMeans.</p>
<div class="versionadded">
<p><span class="versionmodified added">New in version 2.0.0.</span></p>
</div>
<dl class="py method">
<dt id="pyspark.ml.clustering.BisectingKMeansModel.clusterCenters">
<code class="sig-name descname">clusterCenters</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference external" href="https://github.com/runawayhorse001/LearningApacheSpark/blob/master/pyspark/ml/clustering.py#L533-L536"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyspark.ml.clustering.BisectingKMeansModel.clusterCenters" title="Permalink to this definition">¶</a></dt>
<dd><p>Get the cluster centers, represented as a list of NumPy arrays.</p>
<div class="versionadded">
<p><span class="versionmodified added">New in version 2.0.0.</span></p>
</div>
</dd></dl>

<dl class="py method">
<dt id="pyspark.ml.clustering.BisectingKMeansModel.computeCost">
<code class="sig-name descname">computeCost</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">dataset</span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/runawayhorse001/LearningApacheSpark/blob/master/pyspark/ml/clustering.py#L538-L544"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyspark.ml.clustering.BisectingKMeansModel.computeCost" title="Permalink to this definition">¶</a></dt>
<dd><p>Computes the sum of squared distances between the input points
and their corresponding cluster centers.</p>
<div class="versionadded">
<p><span class="versionmodified added">New in version 2.0.0.</span></p>
</div>
</dd></dl>

<dl class="py method">
<dt id="pyspark.ml.clustering.BisectingKMeansModel.hasSummary">
<em class="property">property </em><code class="sig-name descname">hasSummary</code><a class="reference external" href="https://github.com/runawayhorse001/LearningApacheSpark/blob/master/pyspark/ml/clustering.py"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyspark.ml.clustering.BisectingKMeansModel.hasSummary" title="Permalink to this definition">¶</a></dt>
<dd><p>Indicates whether a training summary exists for this model instance.</p>
<div class="versionadded">
<p><span class="versionmodified added">New in version 2.1.0.</span></p>
</div>
</dd></dl>

<dl class="py method">
<dt id="pyspark.ml.clustering.BisectingKMeansModel.summary">
<em class="property">property </em><code class="sig-name descname">summary</code><a class="reference external" href="https://github.com/runawayhorse001/LearningApacheSpark/blob/master/pyspark/ml/clustering.py"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyspark.ml.clustering.BisectingKMeansModel.summary" title="Permalink to this definition">¶</a></dt>
<dd><p>Gets summary (e.g. cluster assignments, cluster sizes) of the model trained on the
training set. An exception is thrown if no summary exists.</p>
<div class="versionadded">
<p><span class="versionmodified added">New in version 2.1.0.</span></p>
</div>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt id="pyspark.ml.clustering.BisectingKMeansSummary">
<em class="property">class </em><code class="sig-prename descclassname">pyspark.ml.clustering.</code><code class="sig-name descname">BisectingKMeansSummary</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">java_obj</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/runawayhorse001/LearningApacheSpark/blob/master/pyspark/ml/clustering.py#L704-L712"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyspark.ml.clustering.BisectingKMeansSummary" title="Permalink to this definition">¶</a></dt>
<dd><div class="admonition note">
<p class="admonition-title">Note</p>
<p>Experimental</p>
</div>
<p>Bisecting KMeans clustering results for a given model.</p>
<div class="versionadded">
<p><span class="versionmodified added">New in version 2.1.0.</span></p>
</div>
</dd></dl>

<dl class="py class">
<dt id="pyspark.ml.clustering.DistributedLDAModel">
<em class="property">class </em><code class="sig-prename descclassname">pyspark.ml.clustering.</code><code class="sig-name descname">DistributedLDAModel</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">java_model</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/runawayhorse001/LearningApacheSpark/blob/master/pyspark/ml/clustering.py#L792-L856"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyspark.ml.clustering.DistributedLDAModel" title="Permalink to this definition">¶</a></dt>
<dd><p>Distributed model fitted by <a class="reference internal" href="#pyspark.ml.clustering.LDA" title="pyspark.ml.clustering.LDA"><code class="xref py py-class docutils literal notranslate"><span class="pre">LDA</span></code></a>.
This type of model is currently only produced by Expectation-Maximization (EM).</p>
<p>This model stores the inferred topics, the full training dataset, and the topic distribution
for each training document.</p>
<div class="versionadded">
<p><span class="versionmodified added">New in version 2.0.0.</span></p>
</div>
<dl class="py method">
<dt id="pyspark.ml.clustering.DistributedLDAModel.getCheckpointFiles">
<code class="sig-name descname">getCheckpointFiles</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference external" href="https://github.com/runawayhorse001/LearningApacheSpark/blob/master/pyspark/ml/clustering.py#L844-L856"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyspark.ml.clustering.DistributedLDAModel.getCheckpointFiles" title="Permalink to this definition">¶</a></dt>
<dd><p>If using checkpointing and <code class="xref py py-attr docutils literal notranslate"><span class="pre">LDA.keepLastCheckpoint</span></code> is set to true, then there may
be saved checkpoint files.  This method is provided so that users can manage those files.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Removing the checkpoints can cause failures if a partition is lost and is needed
by certain <a class="reference internal" href="#pyspark.ml.clustering.DistributedLDAModel" title="pyspark.ml.clustering.DistributedLDAModel"><code class="xref py py-class docutils literal notranslate"><span class="pre">DistributedLDAModel</span></code></a> methods.  Reference counting will clean up
the checkpoints when this model and derivative data go out of scope.</p>
</div>
<p>:return  List of checkpoint files from training</p>
<div class="versionadded">
<p><span class="versionmodified added">New in version 2.0.0.</span></p>
</div>
</dd></dl>

<dl class="py method">
<dt id="pyspark.ml.clustering.DistributedLDAModel.logPrior">
<code class="sig-name descname">logPrior</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference external" href="https://github.com/runawayhorse001/LearningApacheSpark/blob/master/pyspark/ml/clustering.py#L836-L842"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyspark.ml.clustering.DistributedLDAModel.logPrior" title="Permalink to this definition">¶</a></dt>
<dd><p>Log probability of the current parameter estimate:
log P(topics, topic distributions for docs | alpha, eta)</p>
<div class="versionadded">
<p><span class="versionmodified added">New in version 2.0.0.</span></p>
</div>
</dd></dl>

<dl class="py method">
<dt id="pyspark.ml.clustering.DistributedLDAModel.toLocal">
<code class="sig-name descname">toLocal</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference external" href="https://github.com/runawayhorse001/LearningApacheSpark/blob/master/pyspark/ml/clustering.py#L803-L817"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyspark.ml.clustering.DistributedLDAModel.toLocal" title="Permalink to this definition">¶</a></dt>
<dd><p>Convert this distributed model to a local representation.  This discards info about the
training dataset.</p>
<p>WARNING: This involves collecting a large <code class="xref py py-func docutils literal notranslate"><span class="pre">topicsMatrix()</span></code> to the driver.</p>
<div class="versionadded">
<p><span class="versionmodified added">New in version 2.0.0.</span></p>
</div>
</dd></dl>

<dl class="py method">
<dt id="pyspark.ml.clustering.DistributedLDAModel.trainingLogLikelihood">
<code class="sig-name descname">trainingLogLikelihood</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference external" href="https://github.com/runawayhorse001/LearningApacheSpark/blob/master/pyspark/ml/clustering.py#L819-L834"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyspark.ml.clustering.DistributedLDAModel.trainingLogLikelihood" title="Permalink to this definition">¶</a></dt>
<dd><p>Log likelihood of the observed tokens in the training set,
given the current parameter estimates:
log P(docs | topics, topic distributions for docs, Dirichlet hyperparameters)</p>
<dl class="simple">
<dt>Notes:</dt><dd><ul class="simple">
<li><p>This excludes the prior; for that, use <a class="reference internal" href="#pyspark.ml.clustering.DistributedLDAModel.logPrior" title="pyspark.ml.clustering.DistributedLDAModel.logPrior"><code class="xref py py-func docutils literal notranslate"><span class="pre">logPrior()</span></code></a>.</p></li>
<li><p>Even with <a class="reference internal" href="#pyspark.ml.clustering.DistributedLDAModel.logPrior" title="pyspark.ml.clustering.DistributedLDAModel.logPrior"><code class="xref py py-func docutils literal notranslate"><span class="pre">logPrior()</span></code></a>, this is NOT the same as the data log likelihood given
the hyperparameters.</p></li>
<li><p>This is computed from the topic distributions computed during training. If you call
<code class="xref py py-func docutils literal notranslate"><span class="pre">logLikelihood()</span></code> on the same training dataset, the topic distributions
will be computed again, possibly giving different results.</p></li>
</ul>
</dd>
</dl>
<div class="versionadded">
<p><span class="versionmodified added">New in version 2.0.0.</span></p>
</div>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt id="pyspark.ml.clustering.GaussianMixture">
<em class="property">class </em><code class="sig-prename descclassname">pyspark.ml.clustering.</code><code class="sig-name descname">GaussianMixture</code><span class="sig-paren">(</span><em class="sig-param"><span class="o">*</span><span class="n">args</span></em>, <em class="sig-param"><span class="o">**</span><span class="n">kwargs</span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/runawayhorse001/LearningApacheSpark/blob/master/pyspark/ml/clustering.py#L151-L270"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyspark.ml.clustering.GaussianMixture" title="Permalink to this definition">¶</a></dt>
<dd><p>GaussianMixture clustering.
This class performs expectation maximization for multivariate Gaussian
Mixture Models (GMMs).  A GMM represents a composite distribution of
independent Gaussian distributions with associated “mixing” weights
specifying each’s contribution to the composite.</p>
<p>Given a set of sample points, this class will maximize the log-likelihood
for a mixture of k Gaussians, iterating until the log-likelihood changes by
less than convergenceTol, or until it has reached the max number of iterations.
While this process is generally guaranteed to converge, it is not guaranteed
to find a global optimum.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>For high-dimensional data (with many features), this algorithm may perform poorly.
This is due to high-dimensional data (a) making it difficult to cluster at all
(based on statistical/theoretical arguments) and (b) numerical issues with
Gaussian distributions.</p>
</div>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">pyspark.ml.linalg</span> <span class="kn">import</span> <span class="n">Vectors</span>
</pre></div>
</div>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">data</span> <span class="o">=</span> <span class="p">[(</span><span class="n">Vectors</span><span class="o">.</span><span class="n">dense</span><span class="p">([</span><span class="o">-</span><span class="mf">0.1</span><span class="p">,</span> <span class="o">-</span><span class="mf">0.05</span> <span class="p">]),),</span>
<span class="gp">... </span>        <span class="p">(</span><span class="n">Vectors</span><span class="o">.</span><span class="n">dense</span><span class="p">([</span><span class="o">-</span><span class="mf">0.01</span><span class="p">,</span> <span class="o">-</span><span class="mf">0.1</span><span class="p">]),),</span>
<span class="gp">... </span>        <span class="p">(</span><span class="n">Vectors</span><span class="o">.</span><span class="n">dense</span><span class="p">([</span><span class="mf">0.9</span><span class="p">,</span> <span class="mf">0.8</span><span class="p">]),),</span>
<span class="gp">... </span>        <span class="p">(</span><span class="n">Vectors</span><span class="o">.</span><span class="n">dense</span><span class="p">([</span><span class="mf">0.75</span><span class="p">,</span> <span class="mf">0.935</span><span class="p">]),),</span>
<span class="gp">... </span>        <span class="p">(</span><span class="n">Vectors</span><span class="o">.</span><span class="n">dense</span><span class="p">([</span><span class="o">-</span><span class="mf">0.83</span><span class="p">,</span> <span class="o">-</span><span class="mf">0.68</span><span class="p">]),),</span>
<span class="gp">... </span>        <span class="p">(</span><span class="n">Vectors</span><span class="o">.</span><span class="n">dense</span><span class="p">([</span><span class="o">-</span><span class="mf">0.91</span><span class="p">,</span> <span class="o">-</span><span class="mf">0.76</span><span class="p">]),)]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">df</span> <span class="o">=</span> <span class="n">spark</span><span class="o">.</span><span class="n">createDataFrame</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="p">[</span><span class="s2">&quot;features&quot;</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">gm</span> <span class="o">=</span> <span class="n">GaussianMixture</span><span class="p">(</span><span class="n">k</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span> <span class="n">tol</span><span class="o">=</span><span class="mf">0.0001</span><span class="p">,</span>
<span class="gp">... </span>                     <span class="n">maxIter</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">seed</span><span class="o">=</span><span class="mi">10</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">model</span> <span class="o">=</span> <span class="n">gm</span><span class="o">.</span><span class="n">fit</span><span class="p">(</span><span class="n">df</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">model</span><span class="o">.</span><span class="n">hasSummary</span>
<span class="go">True</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">summary</span> <span class="o">=</span> <span class="n">model</span><span class="o">.</span><span class="n">summary</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">summary</span><span class="o">.</span><span class="n">k</span>
<span class="go">3</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">summary</span><span class="o">.</span><span class="n">clusterSizes</span>
<span class="go">[2, 2, 2]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">summary</span><span class="o">.</span><span class="n">logLikelihood</span>
<span class="go">8.14636...</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">weights</span> <span class="o">=</span> <span class="n">model</span><span class="o">.</span><span class="n">weights</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">len</span><span class="p">(</span><span class="n">weights</span><span class="p">)</span>
<span class="go">3</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">model</span><span class="o">.</span><span class="n">gaussiansDF</span><span class="o">.</span><span class="n">select</span><span class="p">(</span><span class="s2">&quot;mean&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
<span class="go">Row(mean=DenseVector([0.825, 0.8675]))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">model</span><span class="o">.</span><span class="n">gaussiansDF</span><span class="o">.</span><span class="n">select</span><span class="p">(</span><span class="s2">&quot;cov&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
<span class="go">Row(cov=DenseMatrix(2, 2, [0.0056, -0.0051, -0.0051, 0.0046], False))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">transformed</span> <span class="o">=</span> <span class="n">model</span><span class="o">.</span><span class="n">transform</span><span class="p">(</span><span class="n">df</span><span class="p">)</span><span class="o">.</span><span class="n">select</span><span class="p">(</span><span class="s2">&quot;features&quot;</span><span class="p">,</span> <span class="s2">&quot;prediction&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">rows</span> <span class="o">=</span> <span class="n">transformed</span><span class="o">.</span><span class="n">collect</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">rows</span><span class="p">[</span><span class="mi">4</span><span class="p">]</span><span class="o">.</span><span class="n">prediction</span> <span class="o">==</span> <span class="n">rows</span><span class="p">[</span><span class="mi">5</span><span class="p">]</span><span class="o">.</span><span class="n">prediction</span>
<span class="go">True</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">rows</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span><span class="o">.</span><span class="n">prediction</span> <span class="o">==</span> <span class="n">rows</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span><span class="o">.</span><span class="n">prediction</span>
<span class="go">True</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">gmm_path</span> <span class="o">=</span> <span class="n">temp_path</span> <span class="o">+</span> <span class="s2">&quot;/gmm&quot;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">gm</span><span class="o">.</span><span class="n">save</span><span class="p">(</span><span class="n">gmm_path</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">gm2</span> <span class="o">=</span> <span class="n">GaussianMixture</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="n">gmm_path</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">gm2</span><span class="o">.</span><span class="n">getK</span><span class="p">()</span>
<span class="go">3</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">model_path</span> <span class="o">=</span> <span class="n">temp_path</span> <span class="o">+</span> <span class="s2">&quot;/gmm_model&quot;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">model</span><span class="o">.</span><span class="n">save</span><span class="p">(</span><span class="n">model_path</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">model2</span> <span class="o">=</span> <span class="n">GaussianMixtureModel</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="n">model_path</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">model2</span><span class="o">.</span><span class="n">hasSummary</span>
<span class="go">False</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">model2</span><span class="o">.</span><span class="n">weights</span> <span class="o">==</span> <span class="n">model</span><span class="o">.</span><span class="n">weights</span>
<span class="go">True</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">model2</span><span class="o">.</span><span class="n">gaussiansDF</span><span class="o">.</span><span class="n">select</span><span class="p">(</span><span class="s2">&quot;mean&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
<span class="go">Row(mean=DenseVector([0.825, 0.8675]))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">model2</span><span class="o">.</span><span class="n">gaussiansDF</span><span class="o">.</span><span class="n">select</span><span class="p">(</span><span class="s2">&quot;cov&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
<span class="go">Row(cov=DenseMatrix(2, 2, [0.0056, -0.0051, -0.0051, 0.0046], False))</span>
</pre></div>
</div>
<div class="versionadded">
<p><span class="versionmodified added">New in version 2.0.0.</span></p>
</div>
<dl class="py method">
<dt id="pyspark.ml.clustering.GaussianMixture.getK">
<code class="sig-name descname">getK</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference external" href="https://github.com/runawayhorse001/LearningApacheSpark/blob/master/pyspark/ml/clustering.py#L265-L270"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyspark.ml.clustering.GaussianMixture.getK" title="Permalink to this definition">¶</a></dt>
<dd><p>Gets the value of <img class="math" src="_images/math/399613003fa16a4cb28778c29474b2bc84961dc2.png" alt="k"/></p>
<div class="versionadded">
<p><span class="versionmodified added">New in version 2.0.0.</span></p>
</div>
</dd></dl>

<dl class="py method">
<dt id="pyspark.ml.clustering.GaussianMixture.setK">
<code class="sig-name descname">setK</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">value</span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/runawayhorse001/LearningApacheSpark/blob/master/pyspark/ml/clustering.py#L258-L263"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyspark.ml.clustering.GaussianMixture.setK" title="Permalink to this definition">¶</a></dt>
<dd><p>Sets the value of <code class="xref py py-attr docutils literal notranslate"><span class="pre">k</span></code>.</p>
<div class="versionadded">
<p><span class="versionmodified added">New in version 2.0.0.</span></p>
</div>
</dd></dl>

<dl class="py method">
<dt id="pyspark.ml.clustering.GaussianMixture.setParams">
<code class="sig-name descname">setParams</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">self</span></em>, <em class="sig-param"><span class="n">featuresCol</span><span class="o">=</span><span class="default_value">'features'</span></em>, <em class="sig-param"><span class="n">predictionCol</span><span class="o">=</span><span class="default_value">'prediction'</span></em>, <em class="sig-param"><span class="n">k</span><span class="o">=</span><span class="default_value">2</span></em>, <em class="sig-param"><span class="n">probabilityCol</span><span class="o">=</span><span class="default_value">'probability'</span></em>, <em class="sig-param"><span class="n">tol</span><span class="o">=</span><span class="default_value">0.01</span></em>, <em class="sig-param"><span class="n">maxIter</span><span class="o">=</span><span class="default_value">100</span></em>, <em class="sig-param"><span class="n">seed</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/runawayhorse001/LearningApacheSpark/blob/master/pyspark/__init__.py#L245-L256"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyspark.ml.clustering.GaussianMixture.setParams" title="Permalink to this definition">¶</a></dt>
<dd><p>Sets params for GaussianMixture.</p>
<div class="versionadded">
<p><span class="versionmodified added">New in version 2.0.0.</span></p>
</div>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt id="pyspark.ml.clustering.GaussianMixtureModel">
<em class="property">class </em><code class="sig-prename descclassname">pyspark.ml.clustering.</code><code class="sig-name descname">GaussianMixtureModel</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">java_model</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/runawayhorse001/LearningApacheSpark/blob/master/pyspark/ml/clustering.py#L100-L147"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyspark.ml.clustering.GaussianMixtureModel" title="Permalink to this definition">¶</a></dt>
<dd><p>Model fitted by GaussianMixture.</p>
<div class="versionadded">
<p><span class="versionmodified added">New in version 2.0.0.</span></p>
</div>
<dl class="py method">
<dt id="pyspark.ml.clustering.GaussianMixtureModel.gaussiansDF">
<em class="property">property </em><code class="sig-name descname">gaussiansDF</code><a class="reference external" href="https://github.com/runawayhorse001/LearningApacheSpark/blob/master/pyspark/ml/clustering.py"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyspark.ml.clustering.GaussianMixtureModel.gaussiansDF" title="Permalink to this definition">¶</a></dt>
<dd><p>Retrieve Gaussian distributions as a DataFrame.
Each row represents a Gaussian Distribution.
The DataFrame has two columns: mean (Vector) and cov (Matrix).</p>
<div class="versionadded">
<p><span class="versionmodified added">New in version 2.0.0.</span></p>
</div>
</dd></dl>

<dl class="py method">
<dt id="pyspark.ml.clustering.GaussianMixtureModel.hasSummary">
<em class="property">property </em><code class="sig-name descname">hasSummary</code><a class="reference external" href="https://github.com/runawayhorse001/LearningApacheSpark/blob/master/pyspark/ml/clustering.py"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyspark.ml.clustering.GaussianMixtureModel.hasSummary" title="Permalink to this definition">¶</a></dt>
<dd><p>Indicates whether a training summary exists for this model
instance.</p>
<div class="versionadded">
<p><span class="versionmodified added">New in version 2.1.0.</span></p>
</div>
</dd></dl>

<dl class="py method">
<dt id="pyspark.ml.clustering.GaussianMixtureModel.summary">
<em class="property">property </em><code class="sig-name descname">summary</code><a class="reference external" href="https://github.com/runawayhorse001/LearningApacheSpark/blob/master/pyspark/ml/clustering.py"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyspark.ml.clustering.GaussianMixtureModel.summary" title="Permalink to this definition">¶</a></dt>
<dd><p>Gets summary (e.g. cluster assignments, cluster sizes) of the model trained on the
training set. An exception is thrown if no summary exists.</p>
<div class="versionadded">
<p><span class="versionmodified added">New in version 2.1.0.</span></p>
</div>
</dd></dl>

<dl class="py method">
<dt id="pyspark.ml.clustering.GaussianMixtureModel.weights">
<em class="property">property </em><code class="sig-name descname">weights</code><a class="reference external" href="https://github.com/runawayhorse001/LearningApacheSpark/blob/master/pyspark/ml/clustering.py"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyspark.ml.clustering.GaussianMixtureModel.weights" title="Permalink to this definition">¶</a></dt>
<dd><p>Weight for each Gaussian distribution in the mixture.
This is a multinomial probability distribution over the k Gaussians,
where weights[i] is the weight for Gaussian i, and weights sum to 1.</p>
<div class="versionadded">
<p><span class="versionmodified added">New in version 2.0.0.</span></p>
</div>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt id="pyspark.ml.clustering.GaussianMixtureSummary">
<em class="property">class </em><code class="sig-prename descclassname">pyspark.ml.clustering.</code><code class="sig-name descname">GaussianMixtureSummary</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">java_obj</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/runawayhorse001/LearningApacheSpark/blob/master/pyspark/ml/clustering.py#L273-L304"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyspark.ml.clustering.GaussianMixtureSummary" title="Permalink to this definition">¶</a></dt>
<dd><div class="admonition note">
<p class="admonition-title">Note</p>
<p>Experimental</p>
</div>
<p>Gaussian mixture clustering results for a given model.</p>
<div class="versionadded">
<p><span class="versionmodified added">New in version 2.1.0.</span></p>
</div>
<dl class="py method">
<dt id="pyspark.ml.clustering.GaussianMixtureSummary.logLikelihood">
<em class="property">property </em><code class="sig-name descname">logLikelihood</code><a class="reference external" href="https://github.com/runawayhorse001/LearningApacheSpark/blob/master/pyspark/ml/clustering.py"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyspark.ml.clustering.GaussianMixtureSummary.logLikelihood" title="Permalink to this definition">¶</a></dt>
<dd><p>Total log-likelihood for this model on the given data.</p>
<div class="versionadded">
<p><span class="versionmodified added">New in version 2.2.0.</span></p>
</div>
</dd></dl>

<dl class="py method">
<dt id="pyspark.ml.clustering.GaussianMixtureSummary.probability">
<em class="property">property </em><code class="sig-name descname">probability</code><a class="reference external" href="https://github.com/runawayhorse001/LearningApacheSpark/blob/master/pyspark/ml/clustering.py"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyspark.ml.clustering.GaussianMixtureSummary.probability" title="Permalink to this definition">¶</a></dt>
<dd><p>DataFrame of probabilities of each cluster for each training data point.</p>
<div class="versionadded">
<p><span class="versionmodified added">New in version 2.1.0.</span></p>
</div>
</dd></dl>

<dl class="py method">
<dt id="pyspark.ml.clustering.GaussianMixtureSummary.probabilityCol">
<em class="property">property </em><code class="sig-name descname">probabilityCol</code><a class="reference external" href="https://github.com/runawayhorse001/LearningApacheSpark/blob/master/pyspark/ml/clustering.py"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyspark.ml.clustering.GaussianMixtureSummary.probabilityCol" title="Permalink to this definition">¶</a></dt>
<dd><p>Name for column of predicted probability of each cluster in <img class="math" src="_images/math/7c4315fdfd09ec69562500882765eff2ace2fbd4.png" alt="predictions"/>.</p>
<div class="versionadded">
<p><span class="versionmodified added">New in version 2.1.0.</span></p>
</div>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt id="pyspark.ml.clustering.KMeans">
<em class="property">class </em><code class="sig-prename descclassname">pyspark.ml.clustering.</code><code class="sig-name descname">KMeans</code><span class="sig-paren">(</span><em class="sig-param"><span class="o">*</span><span class="n">args</span></em>, <em class="sig-param"><span class="o">**</span><span class="n">kwargs</span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/runawayhorse001/LearningApacheSpark/blob/master/pyspark/ml/clustering.py#L375-L523"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyspark.ml.clustering.KMeans" title="Permalink to this definition">¶</a></dt>
<dd><p>K-means clustering with a k-means++ like initialization mode
(the k-means|| algorithm by Bahmani et al).</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">pyspark.ml.linalg</span> <span class="kn">import</span> <span class="n">Vectors</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">data</span> <span class="o">=</span> <span class="p">[(</span><span class="n">Vectors</span><span class="o">.</span><span class="n">dense</span><span class="p">([</span><span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">]),),</span> <span class="p">(</span><span class="n">Vectors</span><span class="o">.</span><span class="n">dense</span><span class="p">([</span><span class="mf">1.0</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">]),),</span>
<span class="gp">... </span>        <span class="p">(</span><span class="n">Vectors</span><span class="o">.</span><span class="n">dense</span><span class="p">([</span><span class="mf">9.0</span><span class="p">,</span> <span class="mf">8.0</span><span class="p">]),),</span> <span class="p">(</span><span class="n">Vectors</span><span class="o">.</span><span class="n">dense</span><span class="p">([</span><span class="mf">8.0</span><span class="p">,</span> <span class="mf">9.0</span><span class="p">]),)]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">df</span> <span class="o">=</span> <span class="n">spark</span><span class="o">.</span><span class="n">createDataFrame</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="p">[</span><span class="s2">&quot;features&quot;</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">kmeans</span> <span class="o">=</span> <span class="n">KMeans</span><span class="p">(</span><span class="n">k</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">seed</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">model</span> <span class="o">=</span> <span class="n">kmeans</span><span class="o">.</span><span class="n">fit</span><span class="p">(</span><span class="n">df</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">centers</span> <span class="o">=</span> <span class="n">model</span><span class="o">.</span><span class="n">clusterCenters</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">len</span><span class="p">(</span><span class="n">centers</span><span class="p">)</span>
<span class="go">2</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">model</span><span class="o">.</span><span class="n">computeCost</span><span class="p">(</span><span class="n">df</span><span class="p">)</span>
<span class="go">2.000...</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">transformed</span> <span class="o">=</span> <span class="n">model</span><span class="o">.</span><span class="n">transform</span><span class="p">(</span><span class="n">df</span><span class="p">)</span><span class="o">.</span><span class="n">select</span><span class="p">(</span><span class="s2">&quot;features&quot;</span><span class="p">,</span> <span class="s2">&quot;prediction&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">rows</span> <span class="o">=</span> <span class="n">transformed</span><span class="o">.</span><span class="n">collect</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">rows</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">prediction</span> <span class="o">==</span> <span class="n">rows</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">prediction</span>
<span class="go">True</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">rows</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span><span class="o">.</span><span class="n">prediction</span> <span class="o">==</span> <span class="n">rows</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span><span class="o">.</span><span class="n">prediction</span>
<span class="go">True</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">model</span><span class="o">.</span><span class="n">hasSummary</span>
<span class="go">True</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">summary</span> <span class="o">=</span> <span class="n">model</span><span class="o">.</span><span class="n">summary</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">summary</span><span class="o">.</span><span class="n">k</span>
<span class="go">2</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">summary</span><span class="o">.</span><span class="n">clusterSizes</span>
<span class="go">[2, 2]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">summary</span><span class="o">.</span><span class="n">trainingCost</span>
<span class="go">2.000...</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">kmeans_path</span> <span class="o">=</span> <span class="n">temp_path</span> <span class="o">+</span> <span class="s2">&quot;/kmeans&quot;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">kmeans</span><span class="o">.</span><span class="n">save</span><span class="p">(</span><span class="n">kmeans_path</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">kmeans2</span> <span class="o">=</span> <span class="n">KMeans</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="n">kmeans_path</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">kmeans2</span><span class="o">.</span><span class="n">getK</span><span class="p">()</span>
<span class="go">2</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">model_path</span> <span class="o">=</span> <span class="n">temp_path</span> <span class="o">+</span> <span class="s2">&quot;/kmeans_model&quot;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">model</span><span class="o">.</span><span class="n">save</span><span class="p">(</span><span class="n">model_path</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">model2</span> <span class="o">=</span> <span class="n">KMeansModel</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="n">model_path</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">model2</span><span class="o">.</span><span class="n">hasSummary</span>
<span class="go">False</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">model</span><span class="o">.</span><span class="n">clusterCenters</span><span class="p">()[</span><span class="mi">0</span><span class="p">]</span> <span class="o">==</span> <span class="n">model2</span><span class="o">.</span><span class="n">clusterCenters</span><span class="p">()[</span><span class="mi">0</span><span class="p">]</span>
<span class="go">array([ True,  True], dtype=bool)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">model</span><span class="o">.</span><span class="n">clusterCenters</span><span class="p">()[</span><span class="mi">1</span><span class="p">]</span> <span class="o">==</span> <span class="n">model2</span><span class="o">.</span><span class="n">clusterCenters</span><span class="p">()[</span><span class="mi">1</span><span class="p">]</span>
<span class="go">array([ True,  True], dtype=bool)</span>
</pre></div>
</div>
<div class="versionadded">
<p><span class="versionmodified added">New in version 1.5.0.</span></p>
</div>
<dl class="py method">
<dt id="pyspark.ml.clustering.KMeans.getDistanceMeasure">
<code class="sig-name descname">getDistanceMeasure</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference external" href="https://github.com/runawayhorse001/LearningApacheSpark/blob/master/pyspark/ml/clustering.py#L518-L523"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyspark.ml.clustering.KMeans.getDistanceMeasure" title="Permalink to this definition">¶</a></dt>
<dd><p>Gets the value of <img class="math" src="_images/math/30f643b3990e62346b8dd12cda8088cea4f1b498.png" alt="distanceMeasure"/></p>
<div class="versionadded">
<p><span class="versionmodified added">New in version 2.4.0.</span></p>
</div>
</dd></dl>

<dl class="py method">
<dt id="pyspark.ml.clustering.KMeans.getInitMode">
<code class="sig-name descname">getInitMode</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference external" href="https://github.com/runawayhorse001/LearningApacheSpark/blob/master/pyspark/ml/clustering.py#L490-L495"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyspark.ml.clustering.KMeans.getInitMode" title="Permalink to this definition">¶</a></dt>
<dd><p>Gets the value of <img class="math" src="_images/math/b0d96d91c3aef8f1ea0b07d1c639ba136106b2cc.png" alt="initMode"/></p>
<div class="versionadded">
<p><span class="versionmodified added">New in version 1.5.0.</span></p>
</div>
</dd></dl>

<dl class="py method">
<dt id="pyspark.ml.clustering.KMeans.getInitSteps">
<code class="sig-name descname">getInitSteps</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference external" href="https://github.com/runawayhorse001/LearningApacheSpark/blob/master/pyspark/ml/clustering.py#L504-L509"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyspark.ml.clustering.KMeans.getInitSteps" title="Permalink to this definition">¶</a></dt>
<dd><p>Gets the value of <img class="math" src="_images/math/24180576ba671ac6b409c068649f2c7548e047a8.png" alt="initSteps"/></p>
<div class="versionadded">
<p><span class="versionmodified added">New in version 1.5.0.</span></p>
</div>
</dd></dl>

<dl class="py method">
<dt id="pyspark.ml.clustering.KMeans.getK">
<code class="sig-name descname">getK</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference external" href="https://github.com/runawayhorse001/LearningApacheSpark/blob/master/pyspark/ml/clustering.py#L476-L481"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyspark.ml.clustering.KMeans.getK" title="Permalink to this definition">¶</a></dt>
<dd><p>Gets the value of <img class="math" src="_images/math/399613003fa16a4cb28778c29474b2bc84961dc2.png" alt="k"/></p>
<div class="versionadded">
<p><span class="versionmodified added">New in version 1.5.0.</span></p>
</div>
</dd></dl>

<dl class="py method">
<dt id="pyspark.ml.clustering.KMeans.setDistanceMeasure">
<code class="sig-name descname">setDistanceMeasure</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">value</span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/runawayhorse001/LearningApacheSpark/blob/master/pyspark/ml/clustering.py#L511-L516"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyspark.ml.clustering.KMeans.setDistanceMeasure" title="Permalink to this definition">¶</a></dt>
<dd><p>Sets the value of <code class="xref py py-attr docutils literal notranslate"><span class="pre">distanceMeasure</span></code>.</p>
<div class="versionadded">
<p><span class="versionmodified added">New in version 2.4.0.</span></p>
</div>
</dd></dl>

<dl class="py method">
<dt id="pyspark.ml.clustering.KMeans.setInitMode">
<code class="sig-name descname">setInitMode</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">value</span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/runawayhorse001/LearningApacheSpark/blob/master/pyspark/ml/clustering.py#L483-L488"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyspark.ml.clustering.KMeans.setInitMode" title="Permalink to this definition">¶</a></dt>
<dd><p>Sets the value of <code class="xref py py-attr docutils literal notranslate"><span class="pre">initMode</span></code>.</p>
<div class="versionadded">
<p><span class="versionmodified added">New in version 1.5.0.</span></p>
</div>
</dd></dl>

<dl class="py method">
<dt id="pyspark.ml.clustering.KMeans.setInitSteps">
<code class="sig-name descname">setInitSteps</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">value</span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/runawayhorse001/LearningApacheSpark/blob/master/pyspark/ml/clustering.py#L497-L502"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyspark.ml.clustering.KMeans.setInitSteps" title="Permalink to this definition">¶</a></dt>
<dd><p>Sets the value of <code class="xref py py-attr docutils literal notranslate"><span class="pre">initSteps</span></code>.</p>
<div class="versionadded">
<p><span class="versionmodified added">New in version 1.5.0.</span></p>
</div>
</dd></dl>

<dl class="py method">
<dt id="pyspark.ml.clustering.KMeans.setK">
<code class="sig-name descname">setK</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">value</span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/runawayhorse001/LearningApacheSpark/blob/master/pyspark/ml/clustering.py#L469-L474"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyspark.ml.clustering.KMeans.setK" title="Permalink to this definition">¶</a></dt>
<dd><p>Sets the value of <code class="xref py py-attr docutils literal notranslate"><span class="pre">k</span></code>.</p>
<div class="versionadded">
<p><span class="versionmodified added">New in version 1.5.0.</span></p>
</div>
</dd></dl>

<dl class="py method">
<dt id="pyspark.ml.clustering.KMeans.setParams">
<code class="sig-name descname">setParams</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">self</span></em>, <em class="sig-param"><span class="n">featuresCol</span><span class="o">=</span><span class="default_value">'features'</span></em>, <em class="sig-param"><span class="n">predictionCol</span><span class="o">=</span><span class="default_value">'prediction'</span></em>, <em class="sig-param"><span class="n">k</span><span class="o">=</span><span class="default_value">2</span></em>, <em class="sig-param"><span class="n">initMode</span><span class="o">=</span><span class="default_value">'k-means||'</span></em>, <em class="sig-param"><span class="n">initSteps</span><span class="o">=</span><span class="default_value">2</span></em>, <em class="sig-param"><span class="n">tol</span><span class="o">=</span><span class="default_value">0.0001</span></em>, <em class="sig-param"><span class="n">maxIter</span><span class="o">=</span><span class="default_value">20</span></em>, <em class="sig-param"><span class="n">seed</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">distanceMeasure</span><span class="o">=</span><span class="default_value">'euclidean'</span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/runawayhorse001/LearningApacheSpark/blob/master/pyspark/__init__.py#L454-L467"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyspark.ml.clustering.KMeans.setParams" title="Permalink to this definition">¶</a></dt>
<dd><p>Sets params for KMeans.</p>
<div class="versionadded">
<p><span class="versionmodified added">New in version 1.5.0.</span></p>
</div>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt id="pyspark.ml.clustering.KMeansModel">
<em class="property">class </em><code class="sig-prename descclassname">pyspark.ml.clustering.</code><code class="sig-name descname">KMeansModel</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">java_model</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/runawayhorse001/LearningApacheSpark/blob/master/pyspark/ml/clustering.py#L326-L371"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyspark.ml.clustering.KMeansModel" title="Permalink to this definition">¶</a></dt>
<dd><p>Model fitted by KMeans.</p>
<div class="versionadded">
<p><span class="versionmodified added">New in version 1.5.0.</span></p>
</div>
<dl class="py method">
<dt id="pyspark.ml.clustering.KMeansModel.clusterCenters">
<code class="sig-name descname">clusterCenters</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference external" href="https://github.com/runawayhorse001/LearningApacheSpark/blob/master/pyspark/ml/clustering.py#L333-L336"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyspark.ml.clustering.KMeansModel.clusterCenters" title="Permalink to this definition">¶</a></dt>
<dd><p>Get the cluster centers, represented as a list of NumPy arrays.</p>
<div class="versionadded">
<p><span class="versionmodified added">New in version 1.5.0.</span></p>
</div>
</dd></dl>

<dl class="py method">
<dt id="pyspark.ml.clustering.KMeansModel.computeCost">
<code class="sig-name descname">computeCost</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">dataset</span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/runawayhorse001/LearningApacheSpark/blob/master/pyspark/ml/clustering.py#L338-L350"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyspark.ml.clustering.KMeansModel.computeCost" title="Permalink to this definition">¶</a></dt>
<dd><p>Return the K-means cost (sum of squared distances of points to their nearest center)
for this model on the given data.</p>
<dl class="simple">
<dt>..note:: Deprecated in 2.4.0. It will be removed in 3.0.0. Use ClusteringEvaluator instead.</dt><dd><p>You can also get the cost on the training dataset in the summary.</p>
</dd>
</dl>
<div class="versionadded">
<p><span class="versionmodified added">New in version 2.0.0.</span></p>
</div>
</dd></dl>

<dl class="py method">
<dt id="pyspark.ml.clustering.KMeansModel.hasSummary">
<em class="property">property </em><code class="sig-name descname">hasSummary</code><a class="reference external" href="https://github.com/runawayhorse001/LearningApacheSpark/blob/master/pyspark/ml/clustering.py"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyspark.ml.clustering.KMeansModel.hasSummary" title="Permalink to this definition">¶</a></dt>
<dd><p>Indicates whether a training summary exists for this model instance.</p>
<div class="versionadded">
<p><span class="versionmodified added">New in version 2.1.0.</span></p>
</div>
</dd></dl>

<dl class="py method">
<dt id="pyspark.ml.clustering.KMeansModel.summary">
<em class="property">property </em><code class="sig-name descname">summary</code><a class="reference external" href="https://github.com/runawayhorse001/LearningApacheSpark/blob/master/pyspark/ml/clustering.py"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyspark.ml.clustering.KMeansModel.summary" title="Permalink to this definition">¶</a></dt>
<dd><p>Gets summary (e.g. cluster assignments, cluster sizes) of the model trained on the
training set. An exception is thrown if no summary exists.</p>
<div class="versionadded">
<p><span class="versionmodified added">New in version 2.1.0.</span></p>
</div>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt id="pyspark.ml.clustering.LDA">
<em class="property">class </em><code class="sig-prename descclassname">pyspark.ml.clustering.</code><code class="sig-name descname">LDA</code><span class="sig-paren">(</span><em class="sig-param"><span class="o">*</span><span class="n">args</span></em>, <em class="sig-param"><span class="o">**</span><span class="n">kwargs</span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/runawayhorse001/LearningApacheSpark/blob/master/pyspark/ml/clustering.py#L871-L1195"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyspark.ml.clustering.LDA" title="Permalink to this definition">¶</a></dt>
<dd><p>Latent Dirichlet Allocation (LDA), a topic model designed for text documents.</p>
<p>Terminology:</p>
<blockquote>
<div><ul class="simple">
<li><p>“term” = “word”: an element of the vocabulary</p></li>
<li><p>“token”: instance of a term appearing in a document</p></li>
<li><p>“topic”: multinomial distribution over terms representing some concept</p></li>
<li><p>“document”: one piece of text, corresponding to one row in the input data</p></li>
</ul>
</div></blockquote>
<dl class="simple">
<dt>Original LDA paper (journal version):</dt><dd><p>Blei, Ng, and Jordan.  “Latent Dirichlet Allocation.”  JMLR, 2003.</p>
</dd>
</dl>
<p>Input data (featuresCol):
LDA is given a collection of documents as input data, via the featuresCol parameter.
Each document is specified as a <code class="xref py py-class docutils literal notranslate"><span class="pre">Vector</span></code> of length vocabSize, where each entry is the
count for the corresponding term (word) in the document.  Feature transformers such as
<code class="xref py py-class docutils literal notranslate"><span class="pre">pyspark.ml.feature.Tokenizer</span></code> and <code class="xref py py-class docutils literal notranslate"><span class="pre">pyspark.ml.feature.CountVectorizer</span></code>
can be useful for converting text to word count vectors.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">pyspark.ml.linalg</span> <span class="kn">import</span> <span class="n">Vectors</span><span class="p">,</span> <span class="n">SparseVector</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">pyspark.ml.clustering</span> <span class="kn">import</span> <span class="n">LDA</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">df</span> <span class="o">=</span> <span class="n">spark</span><span class="o">.</span><span class="n">createDataFrame</span><span class="p">([[</span><span class="mi">1</span><span class="p">,</span> <span class="n">Vectors</span><span class="o">.</span><span class="n">dense</span><span class="p">([</span><span class="mf">0.0</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">])],</span>
<span class="gp">... </span>     <span class="p">[</span><span class="mi">2</span><span class="p">,</span> <span class="n">SparseVector</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="p">{</span><span class="mi">0</span><span class="p">:</span> <span class="mf">1.0</span><span class="p">})],],</span> <span class="p">[</span><span class="s2">&quot;id&quot;</span><span class="p">,</span> <span class="s2">&quot;features&quot;</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">lda</span> <span class="o">=</span> <span class="n">LDA</span><span class="p">(</span><span class="n">k</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">seed</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">optimizer</span><span class="o">=</span><span class="s2">&quot;em&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">model</span> <span class="o">=</span> <span class="n">lda</span><span class="o">.</span><span class="n">fit</span><span class="p">(</span><span class="n">df</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">model</span><span class="o">.</span><span class="n">isDistributed</span><span class="p">()</span>
<span class="go">True</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">localModel</span> <span class="o">=</span> <span class="n">model</span><span class="o">.</span><span class="n">toLocal</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">localModel</span><span class="o">.</span><span class="n">isDistributed</span><span class="p">()</span>
<span class="go">False</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">model</span><span class="o">.</span><span class="n">vocabSize</span><span class="p">()</span>
<span class="go">2</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">model</span><span class="o">.</span><span class="n">describeTopics</span><span class="p">()</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
<span class="go">+-----+-----------+--------------------+</span>
<span class="go">|topic|termIndices|         termWeights|</span>
<span class="go">+-----+-----------+--------------------+</span>
<span class="go">|    0|     [1, 0]|[0.50401530077160...|</span>
<span class="go">|    1|     [0, 1]|[0.50401530077160...|</span>
<span class="go">+-----+-----------+--------------------+</span>
<span class="gp">...</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">model</span><span class="o">.</span><span class="n">topicsMatrix</span><span class="p">()</span>
<span class="go">DenseMatrix(2, 2, [0.496, 0.504, 0.504, 0.496], 0)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">lda_path</span> <span class="o">=</span> <span class="n">temp_path</span> <span class="o">+</span> <span class="s2">&quot;/lda&quot;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">lda</span><span class="o">.</span><span class="n">save</span><span class="p">(</span><span class="n">lda_path</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">sameLDA</span> <span class="o">=</span> <span class="n">LDA</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="n">lda_path</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">distributed_model_path</span> <span class="o">=</span> <span class="n">temp_path</span> <span class="o">+</span> <span class="s2">&quot;/lda_distributed_model&quot;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">model</span><span class="o">.</span><span class="n">save</span><span class="p">(</span><span class="n">distributed_model_path</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">sameModel</span> <span class="o">=</span> <span class="n">DistributedLDAModel</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="n">distributed_model_path</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">local_model_path</span> <span class="o">=</span> <span class="n">temp_path</span> <span class="o">+</span> <span class="s2">&quot;/lda_local_model&quot;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">localModel</span><span class="o">.</span><span class="n">save</span><span class="p">(</span><span class="n">local_model_path</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">sameLocalModel</span> <span class="o">=</span> <span class="n">LocalLDAModel</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="n">local_model_path</span><span class="p">)</span>
</pre></div>
</div>
<div class="versionadded">
<p><span class="versionmodified added">New in version 2.0.0.</span></p>
</div>
<dl class="py method">
<dt id="pyspark.ml.clustering.LDA.getDocConcentration">
<code class="sig-name descname">getDocConcentration</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference external" href="https://github.com/runawayhorse001/LearningApacheSpark/blob/master/pyspark/ml/clustering.py#L1136-L1141"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyspark.ml.clustering.LDA.getDocConcentration" title="Permalink to this definition">¶</a></dt>
<dd><p>Gets the value of <code class="xref py py-attr docutils literal notranslate"><span class="pre">docConcentration</span></code> or its default value.</p>
<div class="versionadded">
<p><span class="versionmodified added">New in version 2.0.0.</span></p>
</div>
</dd></dl>

<dl class="py method">
<dt id="pyspark.ml.clustering.LDA.getK">
<code class="sig-name descname">getK</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference external" href="https://github.com/runawayhorse001/LearningApacheSpark/blob/master/pyspark/ml/clustering.py#L1027-L1032"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyspark.ml.clustering.LDA.getK" title="Permalink to this definition">¶</a></dt>
<dd><p>Gets the value of <code class="xref py py-attr docutils literal notranslate"><span class="pre">k</span></code> or its default value.</p>
<div class="versionadded">
<p><span class="versionmodified added">New in version 2.0.0.</span></p>
</div>
</dd></dl>

<dl class="py method">
<dt id="pyspark.ml.clustering.LDA.getKeepLastCheckpoint">
<code class="sig-name descname">getKeepLastCheckpoint</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference external" href="https://github.com/runawayhorse001/LearningApacheSpark/blob/master/pyspark/ml/clustering.py#L1190-L1195"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyspark.ml.clustering.LDA.getKeepLastCheckpoint" title="Permalink to this definition">¶</a></dt>
<dd><p>Gets the value of <code class="xref py py-attr docutils literal notranslate"><span class="pre">keepLastCheckpoint</span></code> or its default value.</p>
<div class="versionadded">
<p><span class="versionmodified added">New in version 2.0.0.</span></p>
</div>
</dd></dl>

<dl class="py method">
<dt id="pyspark.ml.clustering.LDA.getLearningDecay">
<code class="sig-name descname">getLearningDecay</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference external" href="https://github.com/runawayhorse001/LearningApacheSpark/blob/master/pyspark/ml/clustering.py#L1082-L1087"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyspark.ml.clustering.LDA.getLearningDecay" title="Permalink to this definition">¶</a></dt>
<dd><p>Gets the value of <code class="xref py py-attr docutils literal notranslate"><span class="pre">learningDecay</span></code> or its default value.</p>
<div class="versionadded">
<p><span class="versionmodified added">New in version 2.0.0.</span></p>
</div>
</dd></dl>

<dl class="py method">
<dt id="pyspark.ml.clustering.LDA.getLearningOffset">
<code class="sig-name descname">getLearningOffset</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference external" href="https://github.com/runawayhorse001/LearningApacheSpark/blob/master/pyspark/ml/clustering.py#L1064-L1069"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyspark.ml.clustering.LDA.getLearningOffset" title="Permalink to this definition">¶</a></dt>
<dd><p>Gets the value of <code class="xref py py-attr docutils literal notranslate"><span class="pre">learningOffset</span></code> or its default value.</p>
<div class="versionadded">
<p><span class="versionmodified added">New in version 2.0.0.</span></p>
</div>
</dd></dl>

<dl class="py method">
<dt id="pyspark.ml.clustering.LDA.getOptimizeDocConcentration">
<code class="sig-name descname">getOptimizeDocConcentration</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference external" href="https://github.com/runawayhorse001/LearningApacheSpark/blob/master/pyspark/ml/clustering.py#L1118-L1123"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyspark.ml.clustering.LDA.getOptimizeDocConcentration" title="Permalink to this definition">¶</a></dt>
<dd><p>Gets the value of <code class="xref py py-attr docutils literal notranslate"><span class="pre">optimizeDocConcentration</span></code> or its default value.</p>
<div class="versionadded">
<p><span class="versionmodified added">New in version 2.0.0.</span></p>
</div>
</dd></dl>

<dl class="py method">
<dt id="pyspark.ml.clustering.LDA.getOptimizer">
<code class="sig-name descname">getOptimizer</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference external" href="https://github.com/runawayhorse001/LearningApacheSpark/blob/master/pyspark/ml/clustering.py#L1046-L1051"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyspark.ml.clustering.LDA.getOptimizer" title="Permalink to this definition">¶</a></dt>
<dd><p>Gets the value of <code class="xref py py-attr docutils literal notranslate"><span class="pre">optimizer</span></code> or its default value.</p>
<div class="versionadded">
<p><span class="versionmodified added">New in version 2.0.0.</span></p>
</div>
</dd></dl>

<dl class="py method">
<dt id="pyspark.ml.clustering.LDA.getSubsamplingRate">
<code class="sig-name descname">getSubsamplingRate</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference external" href="https://github.com/runawayhorse001/LearningApacheSpark/blob/master/pyspark/ml/clustering.py#L1100-L1105"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyspark.ml.clustering.LDA.getSubsamplingRate" title="Permalink to this definition">¶</a></dt>
<dd><p>Gets the value of <code class="xref py py-attr docutils literal notranslate"><span class="pre">subsamplingRate</span></code> or its default value.</p>
<div class="versionadded">
<p><span class="versionmodified added">New in version 2.0.0.</span></p>
</div>
</dd></dl>

<dl class="py method">
<dt id="pyspark.ml.clustering.LDA.getTopicConcentration">
<code class="sig-name descname">getTopicConcentration</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference external" href="https://github.com/runawayhorse001/LearningApacheSpark/blob/master/pyspark/ml/clustering.py#L1154-L1159"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyspark.ml.clustering.LDA.getTopicConcentration" title="Permalink to this definition">¶</a></dt>
<dd><p>Gets the value of <code class="xref py py-attr docutils literal notranslate"><span class="pre">topicConcentration</span></code> or its default value.</p>
<div class="versionadded">
<p><span class="versionmodified added">New in version 2.0.0.</span></p>
</div>
</dd></dl>

<dl class="py method">
<dt id="pyspark.ml.clustering.LDA.getTopicDistributionCol">
<code class="sig-name descname">getTopicDistributionCol</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference external" href="https://github.com/runawayhorse001/LearningApacheSpark/blob/master/pyspark/ml/clustering.py#L1172-L1177"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyspark.ml.clustering.LDA.getTopicDistributionCol" title="Permalink to this definition">¶</a></dt>
<dd><p>Gets the value of <code class="xref py py-attr docutils literal notranslate"><span class="pre">topicDistributionCol</span></code> or its default value.</p>
<div class="versionadded">
<p><span class="versionmodified added">New in version 2.0.0.</span></p>
</div>
</dd></dl>

<dl class="py method">
<dt id="pyspark.ml.clustering.LDA.setDocConcentration">
<code class="sig-name descname">setDocConcentration</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">value</span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/runawayhorse001/LearningApacheSpark/blob/master/pyspark/ml/clustering.py#L1125-L1134"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyspark.ml.clustering.LDA.setDocConcentration" title="Permalink to this definition">¶</a></dt>
<dd><p>Sets the value of <code class="xref py py-attr docutils literal notranslate"><span class="pre">docConcentration</span></code>.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">algo</span> <span class="o">=</span> <span class="n">LDA</span><span class="p">()</span><span class="o">.</span><span class="n">setDocConcentration</span><span class="p">([</span><span class="mf">0.1</span><span class="p">,</span> <span class="mf">0.2</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">algo</span><span class="o">.</span><span class="n">getDocConcentration</span><span class="p">()</span>
<span class="go">[0.1..., 0.2...]</span>
</pre></div>
</div>
<div class="versionadded">
<p><span class="versionmodified added">New in version 2.0.0.</span></p>
</div>
</dd></dl>

<dl class="py method">
<dt id="pyspark.ml.clustering.LDA.setK">
<code class="sig-name descname">setK</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">value</span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/runawayhorse001/LearningApacheSpark/blob/master/pyspark/ml/clustering.py#L1016-L1025"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyspark.ml.clustering.LDA.setK" title="Permalink to this definition">¶</a></dt>
<dd><p>Sets the value of <code class="xref py py-attr docutils literal notranslate"><span class="pre">k</span></code>.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">algo</span> <span class="o">=</span> <span class="n">LDA</span><span class="p">()</span><span class="o">.</span><span class="n">setK</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">algo</span><span class="o">.</span><span class="n">getK</span><span class="p">()</span>
<span class="go">10</span>
</pre></div>
</div>
<div class="versionadded">
<p><span class="versionmodified added">New in version 2.0.0.</span></p>
</div>
</dd></dl>

<dl class="py method">
<dt id="pyspark.ml.clustering.LDA.setKeepLastCheckpoint">
<code class="sig-name descname">setKeepLastCheckpoint</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">value</span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/runawayhorse001/LearningApacheSpark/blob/master/pyspark/ml/clustering.py#L1179-L1188"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyspark.ml.clustering.LDA.setKeepLastCheckpoint" title="Permalink to this definition">¶</a></dt>
<dd><p>Sets the value of <code class="xref py py-attr docutils literal notranslate"><span class="pre">keepLastCheckpoint</span></code>.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">algo</span> <span class="o">=</span> <span class="n">LDA</span><span class="p">()</span><span class="o">.</span><span class="n">setKeepLastCheckpoint</span><span class="p">(</span><span class="kc">False</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">algo</span><span class="o">.</span><span class="n">getKeepLastCheckpoint</span><span class="p">()</span>
<span class="go">False</span>
</pre></div>
</div>
<div class="versionadded">
<p><span class="versionmodified added">New in version 2.0.0.</span></p>
</div>
</dd></dl>

<dl class="py method">
<dt id="pyspark.ml.clustering.LDA.setLearningDecay">
<code class="sig-name descname">setLearningDecay</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">value</span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/runawayhorse001/LearningApacheSpark/blob/master/pyspark/ml/clustering.py#L1071-L1080"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyspark.ml.clustering.LDA.setLearningDecay" title="Permalink to this definition">¶</a></dt>
<dd><p>Sets the value of <code class="xref py py-attr docutils literal notranslate"><span class="pre">learningDecay</span></code>.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">algo</span> <span class="o">=</span> <span class="n">LDA</span><span class="p">()</span><span class="o">.</span><span class="n">setLearningDecay</span><span class="p">(</span><span class="mf">0.1</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">algo</span><span class="o">.</span><span class="n">getLearningDecay</span><span class="p">()</span>
<span class="go">0.1...</span>
</pre></div>
</div>
<div class="versionadded">
<p><span class="versionmodified added">New in version 2.0.0.</span></p>
</div>
</dd></dl>

<dl class="py method">
<dt id="pyspark.ml.clustering.LDA.setLearningOffset">
<code class="sig-name descname">setLearningOffset</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">value</span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/runawayhorse001/LearningApacheSpark/blob/master/pyspark/ml/clustering.py#L1053-L1062"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyspark.ml.clustering.LDA.setLearningOffset" title="Permalink to this definition">¶</a></dt>
<dd><p>Sets the value of <code class="xref py py-attr docutils literal notranslate"><span class="pre">learningOffset</span></code>.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">algo</span> <span class="o">=</span> <span class="n">LDA</span><span class="p">()</span><span class="o">.</span><span class="n">setLearningOffset</span><span class="p">(</span><span class="mi">100</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">algo</span><span class="o">.</span><span class="n">getLearningOffset</span><span class="p">()</span>
<span class="go">100.0</span>
</pre></div>
</div>
<div class="versionadded">
<p><span class="versionmodified added">New in version 2.0.0.</span></p>
</div>
</dd></dl>

<dl class="py method">
<dt id="pyspark.ml.clustering.LDA.setOptimizeDocConcentration">
<code class="sig-name descname">setOptimizeDocConcentration</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">value</span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/runawayhorse001/LearningApacheSpark/blob/master/pyspark/ml/clustering.py#L1107-L1116"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyspark.ml.clustering.LDA.setOptimizeDocConcentration" title="Permalink to this definition">¶</a></dt>
<dd><p>Sets the value of <code class="xref py py-attr docutils literal notranslate"><span class="pre">optimizeDocConcentration</span></code>.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">algo</span> <span class="o">=</span> <span class="n">LDA</span><span class="p">()</span><span class="o">.</span><span class="n">setOptimizeDocConcentration</span><span class="p">(</span><span class="kc">True</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">algo</span><span class="o">.</span><span class="n">getOptimizeDocConcentration</span><span class="p">()</span>
<span class="go">True</span>
</pre></div>
</div>
<div class="versionadded">
<p><span class="versionmodified added">New in version 2.0.0.</span></p>
</div>
</dd></dl>

<dl class="py method">
<dt id="pyspark.ml.clustering.LDA.setOptimizer">
<code class="sig-name descname">setOptimizer</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">value</span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/runawayhorse001/LearningApacheSpark/blob/master/pyspark/ml/clustering.py#L1034-L1044"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyspark.ml.clustering.LDA.setOptimizer" title="Permalink to this definition">¶</a></dt>
<dd><p>Sets the value of <code class="xref py py-attr docutils literal notranslate"><span class="pre">optimizer</span></code>.
Currently only support ‘em’ and ‘online’.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">algo</span> <span class="o">=</span> <span class="n">LDA</span><span class="p">()</span><span class="o">.</span><span class="n">setOptimizer</span><span class="p">(</span><span class="s2">&quot;em&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">algo</span><span class="o">.</span><span class="n">getOptimizer</span><span class="p">()</span>
<span class="go">&#39;em&#39;</span>
</pre></div>
</div>
<div class="versionadded">
<p><span class="versionmodified added">New in version 2.0.0.</span></p>
</div>
</dd></dl>

<dl class="py method">
<dt id="pyspark.ml.clustering.LDA.setParams">
<code class="sig-name descname">setParams</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">self</span></em>, <em class="sig-param"><span class="n">featuresCol</span><span class="o">=</span><span class="default_value">'features'</span></em>, <em class="sig-param"><span class="n">maxIter</span><span class="o">=</span><span class="default_value">20</span></em>, <em class="sig-param"><span class="n">seed</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">checkpointInterval</span><span class="o">=</span><span class="default_value">10</span></em>, <em class="sig-param"><span class="n">k</span><span class="o">=</span><span class="default_value">10</span></em>, <em class="sig-param"><span class="n">optimizer</span><span class="o">=</span><span class="default_value">'online'</span></em>, <em class="sig-param"><span class="n">learningOffset</span><span class="o">=</span><span class="default_value">1024.0</span></em>, <em class="sig-param"><span class="n">learningDecay</span><span class="o">=</span><span class="default_value">0.51</span></em>, <em class="sig-param"><span class="n">subsamplingRate</span><span class="o">=</span><span class="default_value">0.05</span></em>, <em class="sig-param"><span class="n">optimizeDocConcentration</span><span class="o">=</span><span class="default_value">True</span></em>, <em class="sig-param"><span class="n">docConcentration</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">topicConcentration</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">topicDistributionCol</span><span class="o">=</span><span class="default_value">'topicDistribution'</span></em>, <em class="sig-param"><span class="n">keepLastCheckpoint</span><span class="o">=</span><span class="default_value">True</span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/runawayhorse001/LearningApacheSpark/blob/master/pyspark/__init__.py#L997-L1014"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyspark.ml.clustering.LDA.setParams" title="Permalink to this definition">¶</a></dt>
<dd><p>Sets params for LDA.</p>
<div class="versionadded">
<p><span class="versionmodified added">New in version 2.0.0.</span></p>
</div>
</dd></dl>

<dl class="py method">
<dt id="pyspark.ml.clustering.LDA.setSubsamplingRate">
<code class="sig-name descname">setSubsamplingRate</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">value</span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/runawayhorse001/LearningApacheSpark/blob/master/pyspark/ml/clustering.py#L1089-L1098"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyspark.ml.clustering.LDA.setSubsamplingRate" title="Permalink to this definition">¶</a></dt>
<dd><p>Sets the value of <code class="xref py py-attr docutils literal notranslate"><span class="pre">subsamplingRate</span></code>.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">algo</span> <span class="o">=</span> <span class="n">LDA</span><span class="p">()</span><span class="o">.</span><span class="n">setSubsamplingRate</span><span class="p">(</span><span class="mf">0.1</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">algo</span><span class="o">.</span><span class="n">getSubsamplingRate</span><span class="p">()</span>
<span class="go">0.1...</span>
</pre></div>
</div>
<div class="versionadded">
<p><span class="versionmodified added">New in version 2.0.0.</span></p>
</div>
</dd></dl>

<dl class="py method">
<dt id="pyspark.ml.clustering.LDA.setTopicConcentration">
<code class="sig-name descname">setTopicConcentration</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">value</span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/runawayhorse001/LearningApacheSpark/blob/master/pyspark/ml/clustering.py#L1143-L1152"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyspark.ml.clustering.LDA.setTopicConcentration" title="Permalink to this definition">¶</a></dt>
<dd><p>Sets the value of <code class="xref py py-attr docutils literal notranslate"><span class="pre">topicConcentration</span></code>.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">algo</span> <span class="o">=</span> <span class="n">LDA</span><span class="p">()</span><span class="o">.</span><span class="n">setTopicConcentration</span><span class="p">(</span><span class="mf">0.5</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">algo</span><span class="o">.</span><span class="n">getTopicConcentration</span><span class="p">()</span>
<span class="go">0.5...</span>
</pre></div>
</div>
<div class="versionadded">
<p><span class="versionmodified added">New in version 2.0.0.</span></p>
</div>
</dd></dl>

<dl class="py method">
<dt id="pyspark.ml.clustering.LDA.setTopicDistributionCol">
<code class="sig-name descname">setTopicDistributionCol</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">value</span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/runawayhorse001/LearningApacheSpark/blob/master/pyspark/ml/clustering.py#L1161-L1170"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyspark.ml.clustering.LDA.setTopicDistributionCol" title="Permalink to this definition">¶</a></dt>
<dd><p>Sets the value of <code class="xref py py-attr docutils literal notranslate"><span class="pre">topicDistributionCol</span></code>.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">algo</span> <span class="o">=</span> <span class="n">LDA</span><span class="p">()</span><span class="o">.</span><span class="n">setTopicDistributionCol</span><span class="p">(</span><span class="s2">&quot;topicDistributionCol&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">algo</span><span class="o">.</span><span class="n">getTopicDistributionCol</span><span class="p">()</span>
<span class="go">&#39;topicDistributionCol&#39;</span>
</pre></div>
</div>
<div class="versionadded">
<p><span class="versionmodified added">New in version 2.0.0.</span></p>
</div>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt id="pyspark.ml.clustering.LDAModel">
<em class="property">class </em><code class="sig-prename descclassname">pyspark.ml.clustering.</code><code class="sig-name descname">LDAModel</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">java_model</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/runawayhorse001/LearningApacheSpark/blob/master/pyspark/ml/clustering.py#L716-L788"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyspark.ml.clustering.LDAModel" title="Permalink to this definition">¶</a></dt>
<dd><p>Latent Dirichlet Allocation (LDA) model.
This abstraction permits for different underlying representations,
including local and distributed data structures.</p>
<div class="versionadded">
<p><span class="versionmodified added">New in version 2.0.0.</span></p>
</div>
<dl class="py method">
<dt id="pyspark.ml.clustering.LDAModel.describeTopics">
<code class="sig-name descname">describeTopics</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">maxTermsPerTopic</span><span class="o">=</span><span class="default_value">10</span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/runawayhorse001/LearningApacheSpark/blob/master/pyspark/ml/clustering.py#L774-L779"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyspark.ml.clustering.LDAModel.describeTopics" title="Permalink to this definition">¶</a></dt>
<dd><p>Return the topics described by their top-weighted terms.</p>
<div class="versionadded">
<p><span class="versionmodified added">New in version 2.0.0.</span></p>
</div>
</dd></dl>

<dl class="py method">
<dt id="pyspark.ml.clustering.LDAModel.estimatedDocConcentration">
<code class="sig-name descname">estimatedDocConcentration</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference external" href="https://github.com/runawayhorse001/LearningApacheSpark/blob/master/pyspark/ml/clustering.py#L781-L788"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyspark.ml.clustering.LDAModel.estimatedDocConcentration" title="Permalink to this definition">¶</a></dt>
<dd><p>Value for <code class="xref py py-attr docutils literal notranslate"><span class="pre">LDA.docConcentration</span></code> estimated from data.
If Online LDA was used and <code class="xref py py-attr docutils literal notranslate"><span class="pre">LDA.optimizeDocConcentration</span></code> was set to false,
then this returns the fixed (given) value for the <code class="xref py py-attr docutils literal notranslate"><span class="pre">LDA.docConcentration</span></code> parameter.</p>
<div class="versionadded">
<p><span class="versionmodified added">New in version 2.0.0.</span></p>
</div>
</dd></dl>

<dl class="py method">
<dt id="pyspark.ml.clustering.LDAModel.isDistributed">
<code class="sig-name descname">isDistributed</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference external" href="https://github.com/runawayhorse001/LearningApacheSpark/blob/master/pyspark/ml/clustering.py#L725-L730"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyspark.ml.clustering.LDAModel.isDistributed" title="Permalink to this definition">¶</a></dt>
<dd><p>Indicates whether this instance is of type DistributedLDAModel</p>
<div class="versionadded">
<p><span class="versionmodified added">New in version 2.0.0.</span></p>
</div>
</dd></dl>

<dl class="py method">
<dt id="pyspark.ml.clustering.LDAModel.logLikelihood">
<code class="sig-name descname">logLikelihood</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">dataset</span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/runawayhorse001/LearningApacheSpark/blob/master/pyspark/ml/clustering.py#L750-L760"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyspark.ml.clustering.LDAModel.logLikelihood" title="Permalink to this definition">¶</a></dt>
<dd><p>Calculates a lower bound on the log likelihood of the entire corpus.
See Equation (16) in the Online LDA paper (Hoffman et al., 2010).</p>
<p>WARNING: If this model is an instance of <a class="reference internal" href="#pyspark.ml.clustering.DistributedLDAModel" title="pyspark.ml.clustering.DistributedLDAModel"><code class="xref py py-class docutils literal notranslate"><span class="pre">DistributedLDAModel</span></code></a> (produced when
<code class="xref py py-attr docutils literal notranslate"><span class="pre">optimizer</span></code> is set to “em”), this involves collecting a large
<a class="reference internal" href="#pyspark.ml.clustering.LDAModel.topicsMatrix" title="pyspark.ml.clustering.LDAModel.topicsMatrix"><code class="xref py py-func docutils literal notranslate"><span class="pre">topicsMatrix()</span></code></a> to the driver. This implementation may be changed in the future.</p>
<div class="versionadded">
<p><span class="versionmodified added">New in version 2.0.0.</span></p>
</div>
</dd></dl>

<dl class="py method">
<dt id="pyspark.ml.clustering.LDAModel.logPerplexity">
<code class="sig-name descname">logPerplexity</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">dataset</span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/runawayhorse001/LearningApacheSpark/blob/master/pyspark/ml/clustering.py#L762-L772"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyspark.ml.clustering.LDAModel.logPerplexity" title="Permalink to this definition">¶</a></dt>
<dd><p>Calculate an upper bound on perplexity.  (Lower is better.)
See Equation (16) in the Online LDA paper (Hoffman et al., 2010).</p>
<p>WARNING: If this model is an instance of <a class="reference internal" href="#pyspark.ml.clustering.DistributedLDAModel" title="pyspark.ml.clustering.DistributedLDAModel"><code class="xref py py-class docutils literal notranslate"><span class="pre">DistributedLDAModel</span></code></a> (produced when
<code class="xref py py-attr docutils literal notranslate"><span class="pre">optimizer</span></code> is set to “em”), this involves collecting a large
<a class="reference internal" href="#pyspark.ml.clustering.LDAModel.topicsMatrix" title="pyspark.ml.clustering.LDAModel.topicsMatrix"><code class="xref py py-func docutils literal notranslate"><span class="pre">topicsMatrix()</span></code></a> to the driver. This implementation may be changed in the future.</p>
<div class="versionadded">
<p><span class="versionmodified added">New in version 2.0.0.</span></p>
</div>
</dd></dl>

<dl class="py method">
<dt id="pyspark.ml.clustering.LDAModel.topicsMatrix">
<code class="sig-name descname">topicsMatrix</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference external" href="https://github.com/runawayhorse001/LearningApacheSpark/blob/master/pyspark/ml/clustering.py#L737-L748"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyspark.ml.clustering.LDAModel.topicsMatrix" title="Permalink to this definition">¶</a></dt>
<dd><p>Inferred topics, where each topic is represented by a distribution over terms.
This is a matrix of size vocabSize x k, where each column is a topic.
No guarantees are given about the ordering of the topics.</p>
<p>WARNING: If this model is actually a <a class="reference internal" href="#pyspark.ml.clustering.DistributedLDAModel" title="pyspark.ml.clustering.DistributedLDAModel"><code class="xref py py-class docutils literal notranslate"><span class="pre">DistributedLDAModel</span></code></a> instance produced by
the Expectation-Maximization (“em”) <img class="math" src="_images/math/a7fb5acc83208d263cbcebc1fd0e2280c6708cac.png" alt="optimizer"/>, then this method could involve
collecting a large amount of data to the driver (on the order of vocabSize x k).</p>
<div class="versionadded">
<p><span class="versionmodified added">New in version 2.0.0.</span></p>
</div>
</dd></dl>

<dl class="py method">
<dt id="pyspark.ml.clustering.LDAModel.vocabSize">
<code class="sig-name descname">vocabSize</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference external" href="https://github.com/runawayhorse001/LearningApacheSpark/blob/master/pyspark/ml/clustering.py#L732-L735"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyspark.ml.clustering.LDAModel.vocabSize" title="Permalink to this definition">¶</a></dt>
<dd><p>Vocabulary size (number of terms or words in the vocabulary)</p>
<div class="versionadded">
<p><span class="versionmodified added">New in version 2.0.0.</span></p>
</div>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt id="pyspark.ml.clustering.LocalLDAModel">
<em class="property">class </em><code class="sig-prename descclassname">pyspark.ml.clustering.</code><code class="sig-name descname">LocalLDAModel</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">java_model</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/runawayhorse001/LearningApacheSpark/blob/master/pyspark/ml/clustering.py#L860-L867"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyspark.ml.clustering.LocalLDAModel" title="Permalink to this definition">¶</a></dt>
<dd><p>Local (non-distributed) model fitted by <a class="reference internal" href="#pyspark.ml.clustering.LDA" title="pyspark.ml.clustering.LDA"><code class="xref py py-class docutils literal notranslate"><span class="pre">LDA</span></code></a>.
This model stores the inferred topics only; it does not store info about the training dataset.</p>
<div class="versionadded">
<p><span class="versionmodified added">New in version 2.0.0.</span></p>
</div>
</dd></dl>

<dl class="py class">
<dt id="pyspark.ml.clustering.PowerIterationClustering">
<em class="property">class </em><code class="sig-prename descclassname">pyspark.ml.clustering.</code><code class="sig-name descname">PowerIterationClustering</code><span class="sig-paren">(</span><em class="sig-param"><span class="o">*</span><span class="n">args</span></em>, <em class="sig-param"><span class="o">**</span><span class="n">kwargs</span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/runawayhorse001/LearningApacheSpark/blob/master/pyspark/ml/clustering.py#L1199-L1368"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyspark.ml.clustering.PowerIterationClustering" title="Permalink to this definition">¶</a></dt>
<dd><div class="admonition note">
<p class="admonition-title">Note</p>
<p>Experimental</p>
</div>
<p>Power Iteration Clustering (PIC), a scalable graph clustering algorithm developed by
<a class="reference external" href="http://www.icml2010.org/papers/387.pdf">Lin and Cohen</a>. From the abstract:
PIC finds a very low-dimensional embedding of a dataset using truncated power
iteration on a normalized pair-wise similarity matrix of the data.</p>
<p>This class is not yet an Estimator/Transformer, use <a class="reference internal" href="#pyspark.ml.clustering.PowerIterationClustering.assignClusters" title="pyspark.ml.clustering.PowerIterationClustering.assignClusters"><code class="xref py py-func docutils literal notranslate"><span class="pre">assignClusters()</span></code></a> method
to run the PowerIterationClustering algorithm.</p>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference external" href="http://en.wikipedia.org/wiki/Spectral_clustering">Wikipedia on Spectral clustering</a></p>
</div>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">data</span> <span class="o">=</span> <span class="p">[(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mf">0.5</span><span class="p">),</span>
<span class="gp">... </span>        <span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mf">0.5</span><span class="p">),</span> <span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mf">0.7</span><span class="p">),</span>
<span class="gp">... </span>        <span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mf">0.5</span><span class="p">),</span> <span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mf">0.7</span><span class="p">),</span> <span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mf">0.9</span><span class="p">),</span>
<span class="gp">... </span>        <span class="p">(</span><span class="mi">4</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mf">0.5</span><span class="p">),</span> <span class="p">(</span><span class="mi">4</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mf">0.7</span><span class="p">),</span> <span class="p">(</span><span class="mi">4</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mf">0.9</span><span class="p">),</span> <span class="p">(</span><span class="mi">4</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mf">1.1</span><span class="p">),</span>
<span class="gp">... </span>        <span class="p">(</span><span class="mi">5</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mf">0.5</span><span class="p">),</span> <span class="p">(</span><span class="mi">5</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mf">0.7</span><span class="p">),</span> <span class="p">(</span><span class="mi">5</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mf">0.9</span><span class="p">),</span> <span class="p">(</span><span class="mi">5</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mf">1.1</span><span class="p">),</span> <span class="p">(</span><span class="mi">5</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mf">1.3</span><span class="p">)]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">df</span> <span class="o">=</span> <span class="n">spark</span><span class="o">.</span><span class="n">createDataFrame</span><span class="p">(</span><span class="n">data</span><span class="p">)</span><span class="o">.</span><span class="n">toDF</span><span class="p">(</span><span class="s2">&quot;src&quot;</span><span class="p">,</span> <span class="s2">&quot;dst&quot;</span><span class="p">,</span> <span class="s2">&quot;weight&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">pic</span> <span class="o">=</span> <span class="n">PowerIterationClustering</span><span class="p">(</span><span class="n">k</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">maxIter</span><span class="o">=</span><span class="mi">40</span><span class="p">,</span> <span class="n">weightCol</span><span class="o">=</span><span class="s2">&quot;weight&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">assignments</span> <span class="o">=</span> <span class="n">pic</span><span class="o">.</span><span class="n">assignClusters</span><span class="p">(</span><span class="n">df</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">assignments</span><span class="o">.</span><span class="n">sort</span><span class="p">(</span><span class="n">assignments</span><span class="o">.</span><span class="n">id</span><span class="p">)</span><span class="o">.</span><span class="n">show</span><span class="p">(</span><span class="n">truncate</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
<span class="go">+---+-------+</span>
<span class="go">|id |cluster|</span>
<span class="go">+---+-------+</span>
<span class="go">|0  |1      |</span>
<span class="go">|1  |1      |</span>
<span class="go">|2  |1      |</span>
<span class="go">|3  |1      |</span>
<span class="go">|4  |1      |</span>
<span class="go">|5  |0      |</span>
<span class="go">+---+-------+</span>
<span class="gp">...</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">pic_path</span> <span class="o">=</span> <span class="n">temp_path</span> <span class="o">+</span> <span class="s2">&quot;/pic&quot;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">pic</span><span class="o">.</span><span class="n">save</span><span class="p">(</span><span class="n">pic_path</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">pic2</span> <span class="o">=</span> <span class="n">PowerIterationClustering</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="n">pic_path</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">pic2</span><span class="o">.</span><span class="n">getK</span><span class="p">()</span>
<span class="go">2</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">pic2</span><span class="o">.</span><span class="n">getMaxIter</span><span class="p">()</span>
<span class="go">40</span>
</pre></div>
</div>
<div class="versionadded">
<p><span class="versionmodified added">New in version 2.4.0.</span></p>
</div>
<dl class="py method">
<dt id="pyspark.ml.clustering.PowerIterationClustering.assignClusters">
<code class="sig-name descname">assignClusters</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">dataset</span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/runawayhorse001/LearningApacheSpark/blob/master/pyspark/ml/clustering.py#L1344-L1368"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyspark.ml.clustering.PowerIterationClustering.assignClusters" title="Permalink to this definition">¶</a></dt>
<dd><p>Run the PIC algorithm and returns a cluster assignment for each input vertex.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>dataset</strong> – A dataset with columns src, dst, weight representing the affinity matrix,
which is the matrix A in the PIC paper. Suppose the src column value is i,
the dst column value is j, the weight column value is similarity s,,ij,,
which must be nonnegative. This is a symmetric matrix and hence
s,,ij,, = s,,ji,,. For any (i, j) with nonzero similarity, there should be
either (i, j, s,,ij,,) or (j, i, s,,ji,,) in the input. Rows with i = j are
ignored, because we assume s,,ij,, = 0.0.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>A dataset that contains columns of vertex id and the corresponding cluster for
the id. The schema of it will be:
- id: Long
- cluster: Int</p>
</dd>
</dl>
<div class="versionadded">
<p><span class="versionmodified added">New in version 2.4.0.</span></p>
</div>
<div class="versionadded">
<p><span class="versionmodified added">New in version 2.4.0.</span></p>
</div>
</dd></dl>

<dl class="py method">
<dt id="pyspark.ml.clustering.PowerIterationClustering.getDstCol">
<code class="sig-name descname">getDstCol</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference external" href="https://github.com/runawayhorse001/LearningApacheSpark/blob/master/pyspark/ml/clustering.py#L1337-L1342"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyspark.ml.clustering.PowerIterationClustering.getDstCol" title="Permalink to this definition">¶</a></dt>
<dd><p>Gets the value of <code class="xref py py-attr docutils literal notranslate"><span class="pre">dstCol</span></code> or its default value.</p>
<div class="versionadded">
<p><span class="versionmodified added">New in version 2.4.0.</span></p>
</div>
</dd></dl>

<dl class="py method">
<dt id="pyspark.ml.clustering.PowerIterationClustering.getInitMode">
<code class="sig-name descname">getInitMode</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference external" href="https://github.com/runawayhorse001/LearningApacheSpark/blob/master/pyspark/ml/clustering.py#L1309-L1314"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyspark.ml.clustering.PowerIterationClustering.getInitMode" title="Permalink to this definition">¶</a></dt>
<dd><p>Gets the value of <code class="xref py py-attr docutils literal notranslate"><span class="pre">initMode</span></code> or its default value.</p>
<div class="versionadded">
<p><span class="versionmodified added">New in version 2.4.0.</span></p>
</div>
</dd></dl>

<dl class="py method">
<dt id="pyspark.ml.clustering.PowerIterationClustering.getK">
<code class="sig-name descname">getK</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference external" href="https://github.com/runawayhorse001/LearningApacheSpark/blob/master/pyspark/ml/clustering.py#L1295-L1300"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyspark.ml.clustering.PowerIterationClustering.getK" title="Permalink to this definition">¶</a></dt>
<dd><p>Gets the value of <code class="xref py py-attr docutils literal notranslate"><span class="pre">k</span></code> or its default value.</p>
<div class="versionadded">
<p><span class="versionmodified added">New in version 2.4.0.</span></p>
</div>
</dd></dl>

<dl class="py method">
<dt id="pyspark.ml.clustering.PowerIterationClustering.getSrcCol">
<code class="sig-name descname">getSrcCol</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference external" href="https://github.com/runawayhorse001/LearningApacheSpark/blob/master/pyspark/ml/clustering.py#L1323-L1328"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyspark.ml.clustering.PowerIterationClustering.getSrcCol" title="Permalink to this definition">¶</a></dt>
<dd><p>Gets the value of <code class="xref py py-attr docutils literal notranslate"><span class="pre">srcCol</span></code> or its default value.</p>
<div class="versionadded">
<p><span class="versionmodified added">New in version 2.4.0.</span></p>
</div>
</dd></dl>

<dl class="py method">
<dt id="pyspark.ml.clustering.PowerIterationClustering.setDstCol">
<code class="sig-name descname">setDstCol</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">value</span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/runawayhorse001/LearningApacheSpark/blob/master/pyspark/ml/clustering.py#L1330-L1335"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyspark.ml.clustering.PowerIterationClustering.setDstCol" title="Permalink to this definition">¶</a></dt>
<dd><p>Sets the value of <code class="xref py py-attr docutils literal notranslate"><span class="pre">dstCol</span></code>.</p>
<div class="versionadded">
<p><span class="versionmodified added">New in version 2.4.0.</span></p>
</div>
</dd></dl>

<dl class="py method">
<dt id="pyspark.ml.clustering.PowerIterationClustering.setInitMode">
<code class="sig-name descname">setInitMode</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">value</span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/runawayhorse001/LearningApacheSpark/blob/master/pyspark/ml/clustering.py#L1302-L1307"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyspark.ml.clustering.PowerIterationClustering.setInitMode" title="Permalink to this definition">¶</a></dt>
<dd><p>Sets the value of <code class="xref py py-attr docutils literal notranslate"><span class="pre">initMode</span></code>.</p>
<div class="versionadded">
<p><span class="versionmodified added">New in version 2.4.0.</span></p>
</div>
</dd></dl>

<dl class="py method">
<dt id="pyspark.ml.clustering.PowerIterationClustering.setK">
<code class="sig-name descname">setK</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">value</span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/runawayhorse001/LearningApacheSpark/blob/master/pyspark/ml/clustering.py#L1288-L1293"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyspark.ml.clustering.PowerIterationClustering.setK" title="Permalink to this definition">¶</a></dt>
<dd><p>Sets the value of <code class="xref py py-attr docutils literal notranslate"><span class="pre">k</span></code>.</p>
<div class="versionadded">
<p><span class="versionmodified added">New in version 2.4.0.</span></p>
</div>
</dd></dl>

<dl class="py method">
<dt id="pyspark.ml.clustering.PowerIterationClustering.setParams">
<code class="sig-name descname">setParams</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">self</span></em>, <em class="sig-param"><span class="n">k</span><span class="o">=</span><span class="default_value">2</span></em>, <em class="sig-param"><span class="n">maxIter</span><span class="o">=</span><span class="default_value">20</span></em>, <em class="sig-param"><span class="n">initMode</span><span class="o">=</span><span class="default_value">'random'</span></em>, <em class="sig-param"><span class="n">srcCol</span><span class="o">=</span><span class="default_value">'src'</span></em>, <em class="sig-param"><span class="n">dstCol</span><span class="o">=</span><span class="default_value">'dst'</span></em>, <em class="sig-param"><span class="n">weightCol</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/runawayhorse001/LearningApacheSpark/blob/master/pyspark/__init__.py#L1276-L1286"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyspark.ml.clustering.PowerIterationClustering.setParams" title="Permalink to this definition">¶</a></dt>
<dd><p>Sets params for PowerIterationClustering.</p>
<div class="versionadded">
<p><span class="versionmodified added">New in version 2.4.0.</span></p>
</div>
</dd></dl>

<dl class="py method">
<dt id="pyspark.ml.clustering.PowerIterationClustering.setSrcCol">
<code class="sig-name descname">setSrcCol</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">value</span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/runawayhorse001/LearningApacheSpark/blob/master/pyspark/ml/clustering.py#L1316-L1321"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyspark.ml.clustering.PowerIterationClustering.setSrcCol" title="Permalink to this definition">¶</a></dt>
<dd><p>Sets the value of <code class="xref py py-attr docutils literal notranslate"><span class="pre">srcCol</span></code>.</p>
<div class="versionadded">
<p><span class="versionmodified added">New in version 2.4.0.</span></p>
</div>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="module-pyspark.ml.recommendation">
<span id="recommendation-api"></span><h2><span class="section-number">27.5. </span>Recommendation API<a class="headerlink" href="#module-pyspark.ml.recommendation" title="Permalink to this headline">¶</a></h2>
<dl class="py class">
<dt id="pyspark.ml.recommendation.ALS">
<em class="property">class </em><code class="sig-prename descclassname">pyspark.ml.recommendation.</code><code class="sig-name descname">ALS</code><span class="sig-paren">(</span><em class="sig-param"><span class="o">*</span><span class="n">args</span></em>, <em class="sig-param"><span class="o">**</span><span class="n">kwargs</span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/runawayhorse001/LearningApacheSpark/blob/master/pyspark/ml/recommendation.py#L31-L371"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyspark.ml.recommendation.ALS" title="Permalink to this definition">¶</a></dt>
<dd><p>Alternating Least Squares (ALS) matrix factorization.</p>
<p>ALS attempts to estimate the ratings matrix <img class="math" src="_images/math/bd42864235372371ea05d207c0ca758e625f45ab.png" alt="R"/> as the product of
two lower-rank matrices, <img class="math" src="_images/math/f140f9607eca04b135a2a33874c58c52bb3ca259.png" alt="X"/> and <img class="math" src="_images/math/bc3fd0c4eb86f1d6fcc98efc5541df03708d84d7.png" alt="Y"/>, i.e. <img class="math" src="_images/math/c9649cd731a549cdaf5ba7f5333d4cc178ff94e3.png" alt="X * Yt = R"/>. Typically
these approximations are called ‘factor’ matrices. The general
approach is iterative. During each iteration, one of the factor
matrices is held constant, while the other is solved for using least
squares. The newly-solved factor matrix is then held constant while
solving for the other factor matrix.</p>
<p>This is a blocked implementation of the ALS factorization algorithm
that groups the two sets of factors (referred to as “users” and
“products”) into blocks and reduces communication by only sending
one copy of each user vector to each product block on each
iteration, and only for the product blocks that need that user’s
feature vector. This is achieved by pre-computing some information
about the ratings matrix to determine the “out-links” of each user
(which blocks of products it will contribute to) and “in-link”
information for each product (which of the feature vectors it
receives from each user block it will depend on). This allows us to
send only an array of feature vectors between each user block and
product block, and have the product block find the users’ ratings
and update the products based on these messages.</p>
<p>For implicit preference data, the algorithm used is based on
<a class="reference external" href="http://dx.doi.org/10.1109/ICDM.2008.22">“Collaborative Filtering for Implicit Feedback Datasets”,</a>, adapted for the blocked
approach used here.</p>
<p>Essentially instead of finding the low-rank approximations to the
rating matrix <img class="math" src="_images/math/bd42864235372371ea05d207c0ca758e625f45ab.png" alt="R"/>, this finds the approximations for a preference
matrix <img class="math" src="_images/math/cf2d4d83a90307e73bcf7634e407fa6c19c429e4.png" alt="P"/> where the elements of <img class="math" src="_images/math/cf2d4d83a90307e73bcf7634e407fa6c19c429e4.png" alt="P"/> are 1 if r &gt; 0 and 0 if r &lt;= 0.
The ratings then act as ‘confidence’ values related to strength of
indicated user preferences rather than explicit ratings given to
items.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">df</span> <span class="o">=</span> <span class="n">spark</span><span class="o">.</span><span class="n">createDataFrame</span><span class="p">(</span>
<span class="gp">... </span>    <span class="p">[(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mf">4.0</span><span class="p">),</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mf">2.0</span><span class="p">),</span> <span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mf">3.0</span><span class="p">),</span> <span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mf">4.0</span><span class="p">),</span> <span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">),</span> <span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mf">5.0</span><span class="p">)],</span>
<span class="gp">... </span>    <span class="p">[</span><span class="s2">&quot;user&quot;</span><span class="p">,</span> <span class="s2">&quot;item&quot;</span><span class="p">,</span> <span class="s2">&quot;rating&quot;</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">als</span> <span class="o">=</span> <span class="n">ALS</span><span class="p">(</span><span class="n">rank</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">maxIter</span><span class="o">=</span><span class="mi">5</span><span class="p">,</span> <span class="n">seed</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">model</span> <span class="o">=</span> <span class="n">als</span><span class="o">.</span><span class="n">fit</span><span class="p">(</span><span class="n">df</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">model</span><span class="o">.</span><span class="n">rank</span>
<span class="go">10</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">model</span><span class="o">.</span><span class="n">userFactors</span><span class="o">.</span><span class="n">orderBy</span><span class="p">(</span><span class="s2">&quot;id&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">collect</span><span class="p">()</span>
<span class="go">[Row(id=0, features=[...]), Row(id=1, ...), Row(id=2, ...)]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">test</span> <span class="o">=</span> <span class="n">spark</span><span class="o">.</span><span class="n">createDataFrame</span><span class="p">([(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">2</span><span class="p">),</span> <span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span> <span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">0</span><span class="p">)],</span> <span class="p">[</span><span class="s2">&quot;user&quot;</span><span class="p">,</span> <span class="s2">&quot;item&quot;</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">predictions</span> <span class="o">=</span> <span class="nb">sorted</span><span class="p">(</span><span class="n">model</span><span class="o">.</span><span class="n">transform</span><span class="p">(</span><span class="n">test</span><span class="p">)</span><span class="o">.</span><span class="n">collect</span><span class="p">(),</span> <span class="n">key</span><span class="o">=</span><span class="k">lambda</span> <span class="n">r</span><span class="p">:</span> <span class="n">r</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">predictions</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
<span class="go">Row(user=0, item=2, prediction=-0.13807615637779236)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">predictions</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
<span class="go">Row(user=1, item=0, prediction=2.6258413791656494)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">predictions</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span>
<span class="go">Row(user=2, item=0, prediction=-1.5018409490585327)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">user_recs</span> <span class="o">=</span> <span class="n">model</span><span class="o">.</span><span class="n">recommendForAllUsers</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">user_recs</span><span class="o">.</span><span class="n">where</span><span class="p">(</span><span class="n">user_recs</span><span class="o">.</span><span class="n">user</span> <span class="o">==</span> <span class="mi">0</span><span class="p">)</span>        <span class="o">.</span><span class="n">select</span><span class="p">(</span><span class="s2">&quot;recommendations.item&quot;</span><span class="p">,</span> <span class="s2">&quot;recommendations.rating&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">collect</span><span class="p">()</span>
<span class="go">[Row(item=[0, 1, 2], rating=[3.910..., 1.992..., -0.138...])]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">item_recs</span> <span class="o">=</span> <span class="n">model</span><span class="o">.</span><span class="n">recommendForAllItems</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">item_recs</span><span class="o">.</span><span class="n">where</span><span class="p">(</span><span class="n">item_recs</span><span class="o">.</span><span class="n">item</span> <span class="o">==</span> <span class="mi">2</span><span class="p">)</span>        <span class="o">.</span><span class="n">select</span><span class="p">(</span><span class="s2">&quot;recommendations.user&quot;</span><span class="p">,</span> <span class="s2">&quot;recommendations.rating&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">collect</span><span class="p">()</span>
<span class="go">[Row(user=[2, 1, 0], rating=[4.901..., 3.981..., -0.138...])]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">user_subset</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">where</span><span class="p">(</span><span class="n">df</span><span class="o">.</span><span class="n">user</span> <span class="o">==</span> <span class="mi">2</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">user_subset_recs</span> <span class="o">=</span> <span class="n">model</span><span class="o">.</span><span class="n">recommendForUserSubset</span><span class="p">(</span><span class="n">user_subset</span><span class="p">,</span> <span class="mi">3</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">user_subset_recs</span><span class="o">.</span><span class="n">select</span><span class="p">(</span><span class="s2">&quot;recommendations.item&quot;</span><span class="p">,</span> <span class="s2">&quot;recommendations.rating&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">first</span><span class="p">()</span>
<span class="go">Row(item=[2, 1, 0], rating=[4.901..., 1.056..., -1.501...])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">item_subset</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">where</span><span class="p">(</span><span class="n">df</span><span class="o">.</span><span class="n">item</span> <span class="o">==</span> <span class="mi">0</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">item_subset_recs</span> <span class="o">=</span> <span class="n">model</span><span class="o">.</span><span class="n">recommendForItemSubset</span><span class="p">(</span><span class="n">item_subset</span><span class="p">,</span> <span class="mi">3</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">item_subset_recs</span><span class="o">.</span><span class="n">select</span><span class="p">(</span><span class="s2">&quot;recommendations.user&quot;</span><span class="p">,</span> <span class="s2">&quot;recommendations.rating&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">first</span><span class="p">()</span>
<span class="go">Row(user=[0, 1, 2], rating=[3.910..., 2.625..., -1.501...])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">als_path</span> <span class="o">=</span> <span class="n">temp_path</span> <span class="o">+</span> <span class="s2">&quot;/als&quot;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">als</span><span class="o">.</span><span class="n">save</span><span class="p">(</span><span class="n">als_path</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">als2</span> <span class="o">=</span> <span class="n">ALS</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="n">als_path</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">als</span><span class="o">.</span><span class="n">getMaxIter</span><span class="p">()</span>
<span class="go">5</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">model_path</span> <span class="o">=</span> <span class="n">temp_path</span> <span class="o">+</span> <span class="s2">&quot;/als_model&quot;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">model</span><span class="o">.</span><span class="n">save</span><span class="p">(</span><span class="n">model_path</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">model2</span> <span class="o">=</span> <span class="n">ALSModel</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="n">model_path</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">model</span><span class="o">.</span><span class="n">rank</span> <span class="o">==</span> <span class="n">model2</span><span class="o">.</span><span class="n">rank</span>
<span class="go">True</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">sorted</span><span class="p">(</span><span class="n">model</span><span class="o">.</span><span class="n">userFactors</span><span class="o">.</span><span class="n">collect</span><span class="p">())</span> <span class="o">==</span> <span class="nb">sorted</span><span class="p">(</span><span class="n">model2</span><span class="o">.</span><span class="n">userFactors</span><span class="o">.</span><span class="n">collect</span><span class="p">())</span>
<span class="go">True</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">sorted</span><span class="p">(</span><span class="n">model</span><span class="o">.</span><span class="n">itemFactors</span><span class="o">.</span><span class="n">collect</span><span class="p">())</span> <span class="o">==</span> <span class="nb">sorted</span><span class="p">(</span><span class="n">model2</span><span class="o">.</span><span class="n">itemFactors</span><span class="o">.</span><span class="n">collect</span><span class="p">())</span>
<span class="go">True</span>
</pre></div>
</div>
<div class="versionadded">
<p><span class="versionmodified added">New in version 1.4.0.</span></p>
</div>
<dl class="py method">
<dt id="pyspark.ml.recommendation.ALS.getAlpha">
<code class="sig-name descname">getAlpha</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference external" href="https://github.com/runawayhorse001/LearningApacheSpark/blob/master/pyspark/ml/recommendation.py#L268-L273"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyspark.ml.recommendation.ALS.getAlpha" title="Permalink to this definition">¶</a></dt>
<dd><p>Gets the value of alpha or its default value.</p>
<div class="versionadded">
<p><span class="versionmodified added">New in version 1.4.0.</span></p>
</div>
</dd></dl>

<dl class="py method">
<dt id="pyspark.ml.recommendation.ALS.getColdStartStrategy">
<code class="sig-name descname">getColdStartStrategy</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference external" href="https://github.com/runawayhorse001/LearningApacheSpark/blob/master/pyspark/ml/recommendation.py#L366-L371"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyspark.ml.recommendation.ALS.getColdStartStrategy" title="Permalink to this definition">¶</a></dt>
<dd><p>Gets the value of coldStartStrategy or its default value.</p>
<div class="versionadded">
<p><span class="versionmodified added">New in version 2.2.0.</span></p>
</div>
</dd></dl>

<dl class="py method">
<dt id="pyspark.ml.recommendation.ALS.getFinalStorageLevel">
<code class="sig-name descname">getFinalStorageLevel</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference external" href="https://github.com/runawayhorse001/LearningApacheSpark/blob/master/pyspark/ml/recommendation.py#L352-L357"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyspark.ml.recommendation.ALS.getFinalStorageLevel" title="Permalink to this definition">¶</a></dt>
<dd><p>Gets the value of finalStorageLevel or its default value.</p>
<div class="versionadded">
<p><span class="versionmodified added">New in version 2.0.0.</span></p>
</div>
</dd></dl>

<dl class="py method">
<dt id="pyspark.ml.recommendation.ALS.getImplicitPrefs">
<code class="sig-name descname">getImplicitPrefs</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference external" href="https://github.com/runawayhorse001/LearningApacheSpark/blob/master/pyspark/ml/recommendation.py#L254-L259"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyspark.ml.recommendation.ALS.getImplicitPrefs" title="Permalink to this definition">¶</a></dt>
<dd><p>Gets the value of implicitPrefs or its default value.</p>
<div class="versionadded">
<p><span class="versionmodified added">New in version 1.4.0.</span></p>
</div>
</dd></dl>

<dl class="py method">
<dt id="pyspark.ml.recommendation.ALS.getIntermediateStorageLevel">
<code class="sig-name descname">getIntermediateStorageLevel</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference external" href="https://github.com/runawayhorse001/LearningApacheSpark/blob/master/pyspark/ml/recommendation.py#L338-L343"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyspark.ml.recommendation.ALS.getIntermediateStorageLevel" title="Permalink to this definition">¶</a></dt>
<dd><p>Gets the value of intermediateStorageLevel or its default value.</p>
<div class="versionadded">
<p><span class="versionmodified added">New in version 2.0.0.</span></p>
</div>
</dd></dl>

<dl class="py method">
<dt id="pyspark.ml.recommendation.ALS.getItemCol">
<code class="sig-name descname">getItemCol</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference external" href="https://github.com/runawayhorse001/LearningApacheSpark/blob/master/pyspark/ml/recommendation.py#L296-L301"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyspark.ml.recommendation.ALS.getItemCol" title="Permalink to this definition">¶</a></dt>
<dd><p>Gets the value of itemCol or its default value.</p>
<div class="versionadded">
<p><span class="versionmodified added">New in version 1.4.0.</span></p>
</div>
</dd></dl>

<dl class="py method">
<dt id="pyspark.ml.recommendation.ALS.getNonnegative">
<code class="sig-name descname">getNonnegative</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference external" href="https://github.com/runawayhorse001/LearningApacheSpark/blob/master/pyspark/ml/recommendation.py#L324-L329"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyspark.ml.recommendation.ALS.getNonnegative" title="Permalink to this definition">¶</a></dt>
<dd><p>Gets the value of nonnegative or its default value.</p>
<div class="versionadded">
<p><span class="versionmodified added">New in version 1.4.0.</span></p>
</div>
</dd></dl>

<dl class="py method">
<dt id="pyspark.ml.recommendation.ALS.getNumItemBlocks">
<code class="sig-name descname">getNumItemBlocks</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference external" href="https://github.com/runawayhorse001/LearningApacheSpark/blob/master/pyspark/ml/recommendation.py#L232-L237"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyspark.ml.recommendation.ALS.getNumItemBlocks" title="Permalink to this definition">¶</a></dt>
<dd><p>Gets the value of numItemBlocks or its default value.</p>
<div class="versionadded">
<p><span class="versionmodified added">New in version 1.4.0.</span></p>
</div>
</dd></dl>

<dl class="py method">
<dt id="pyspark.ml.recommendation.ALS.getNumUserBlocks">
<code class="sig-name descname">getNumUserBlocks</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference external" href="https://github.com/runawayhorse001/LearningApacheSpark/blob/master/pyspark/ml/recommendation.py#L218-L223"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyspark.ml.recommendation.ALS.getNumUserBlocks" title="Permalink to this definition">¶</a></dt>
<dd><p>Gets the value of numUserBlocks or its default value.</p>
<div class="versionadded">
<p><span class="versionmodified added">New in version 1.4.0.</span></p>
</div>
</dd></dl>

<dl class="py method">
<dt id="pyspark.ml.recommendation.ALS.getRank">
<code class="sig-name descname">getRank</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference external" href="https://github.com/runawayhorse001/LearningApacheSpark/blob/master/pyspark/ml/recommendation.py#L204-L209"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyspark.ml.recommendation.ALS.getRank" title="Permalink to this definition">¶</a></dt>
<dd><p>Gets the value of rank or its default value.</p>
<div class="versionadded">
<p><span class="versionmodified added">New in version 1.4.0.</span></p>
</div>
</dd></dl>

<dl class="py method">
<dt id="pyspark.ml.recommendation.ALS.getRatingCol">
<code class="sig-name descname">getRatingCol</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference external" href="https://github.com/runawayhorse001/LearningApacheSpark/blob/master/pyspark/ml/recommendation.py#L310-L315"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyspark.ml.recommendation.ALS.getRatingCol" title="Permalink to this definition">¶</a></dt>
<dd><p>Gets the value of ratingCol or its default value.</p>
<div class="versionadded">
<p><span class="versionmodified added">New in version 1.4.0.</span></p>
</div>
</dd></dl>

<dl class="py method">
<dt id="pyspark.ml.recommendation.ALS.getUserCol">
<code class="sig-name descname">getUserCol</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference external" href="https://github.com/runawayhorse001/LearningApacheSpark/blob/master/pyspark/ml/recommendation.py#L282-L287"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyspark.ml.recommendation.ALS.getUserCol" title="Permalink to this definition">¶</a></dt>
<dd><p>Gets the value of userCol or its default value.</p>
<div class="versionadded">
<p><span class="versionmodified added">New in version 1.4.0.</span></p>
</div>
</dd></dl>

<dl class="py method">
<dt id="pyspark.ml.recommendation.ALS.setAlpha">
<code class="sig-name descname">setAlpha</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">value</span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/runawayhorse001/LearningApacheSpark/blob/master/pyspark/ml/recommendation.py#L261-L266"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyspark.ml.recommendation.ALS.setAlpha" title="Permalink to this definition">¶</a></dt>
<dd><p>Sets the value of <code class="xref py py-attr docutils literal notranslate"><span class="pre">alpha</span></code>.</p>
<div class="versionadded">
<p><span class="versionmodified added">New in version 1.4.0.</span></p>
</div>
</dd></dl>

<dl class="py method">
<dt id="pyspark.ml.recommendation.ALS.setColdStartStrategy">
<code class="sig-name descname">setColdStartStrategy</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">value</span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/runawayhorse001/LearningApacheSpark/blob/master/pyspark/ml/recommendation.py#L359-L364"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyspark.ml.recommendation.ALS.setColdStartStrategy" title="Permalink to this definition">¶</a></dt>
<dd><p>Sets the value of <code class="xref py py-attr docutils literal notranslate"><span class="pre">coldStartStrategy</span></code>.</p>
<div class="versionadded">
<p><span class="versionmodified added">New in version 2.2.0.</span></p>
</div>
</dd></dl>

<dl class="py method">
<dt id="pyspark.ml.recommendation.ALS.setFinalStorageLevel">
<code class="sig-name descname">setFinalStorageLevel</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">value</span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/runawayhorse001/LearningApacheSpark/blob/master/pyspark/ml/recommendation.py#L345-L350"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyspark.ml.recommendation.ALS.setFinalStorageLevel" title="Permalink to this definition">¶</a></dt>
<dd><p>Sets the value of <code class="xref py py-attr docutils literal notranslate"><span class="pre">finalStorageLevel</span></code>.</p>
<div class="versionadded">
<p><span class="versionmodified added">New in version 2.0.0.</span></p>
</div>
</dd></dl>

<dl class="py method">
<dt id="pyspark.ml.recommendation.ALS.setImplicitPrefs">
<code class="sig-name descname">setImplicitPrefs</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">value</span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/runawayhorse001/LearningApacheSpark/blob/master/pyspark/ml/recommendation.py#L247-L252"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyspark.ml.recommendation.ALS.setImplicitPrefs" title="Permalink to this definition">¶</a></dt>
<dd><p>Sets the value of <code class="xref py py-attr docutils literal notranslate"><span class="pre">implicitPrefs</span></code>.</p>
<div class="versionadded">
<p><span class="versionmodified added">New in version 1.4.0.</span></p>
</div>
</dd></dl>

<dl class="py method">
<dt id="pyspark.ml.recommendation.ALS.setIntermediateStorageLevel">
<code class="sig-name descname">setIntermediateStorageLevel</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">value</span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/runawayhorse001/LearningApacheSpark/blob/master/pyspark/ml/recommendation.py#L331-L336"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyspark.ml.recommendation.ALS.setIntermediateStorageLevel" title="Permalink to this definition">¶</a></dt>
<dd><p>Sets the value of <code class="xref py py-attr docutils literal notranslate"><span class="pre">intermediateStorageLevel</span></code>.</p>
<div class="versionadded">
<p><span class="versionmodified added">New in version 2.0.0.</span></p>
</div>
</dd></dl>

<dl class="py method">
<dt id="pyspark.ml.recommendation.ALS.setItemCol">
<code class="sig-name descname">setItemCol</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">value</span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/runawayhorse001/LearningApacheSpark/blob/master/pyspark/ml/recommendation.py#L289-L294"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyspark.ml.recommendation.ALS.setItemCol" title="Permalink to this definition">¶</a></dt>
<dd><p>Sets the value of <code class="xref py py-attr docutils literal notranslate"><span class="pre">itemCol</span></code>.</p>
<div class="versionadded">
<p><span class="versionmodified added">New in version 1.4.0.</span></p>
</div>
</dd></dl>

<dl class="py method">
<dt id="pyspark.ml.recommendation.ALS.setNonnegative">
<code class="sig-name descname">setNonnegative</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">value</span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/runawayhorse001/LearningApacheSpark/blob/master/pyspark/ml/recommendation.py#L317-L322"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyspark.ml.recommendation.ALS.setNonnegative" title="Permalink to this definition">¶</a></dt>
<dd><p>Sets the value of <code class="xref py py-attr docutils literal notranslate"><span class="pre">nonnegative</span></code>.</p>
<div class="versionadded">
<p><span class="versionmodified added">New in version 1.4.0.</span></p>
</div>
</dd></dl>

<dl class="py method">
<dt id="pyspark.ml.recommendation.ALS.setNumBlocks">
<code class="sig-name descname">setNumBlocks</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">value</span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/runawayhorse001/LearningApacheSpark/blob/master/pyspark/ml/recommendation.py#L239-L245"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyspark.ml.recommendation.ALS.setNumBlocks" title="Permalink to this definition">¶</a></dt>
<dd><p>Sets both <code class="xref py py-attr docutils literal notranslate"><span class="pre">numUserBlocks</span></code> and <code class="xref py py-attr docutils literal notranslate"><span class="pre">numItemBlocks</span></code> to the specific value.</p>
<div class="versionadded">
<p><span class="versionmodified added">New in version 1.4.0.</span></p>
</div>
</dd></dl>

<dl class="py method">
<dt id="pyspark.ml.recommendation.ALS.setNumItemBlocks">
<code class="sig-name descname">setNumItemBlocks</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">value</span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/runawayhorse001/LearningApacheSpark/blob/master/pyspark/ml/recommendation.py#L225-L230"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyspark.ml.recommendation.ALS.setNumItemBlocks" title="Permalink to this definition">¶</a></dt>
<dd><p>Sets the value of <code class="xref py py-attr docutils literal notranslate"><span class="pre">numItemBlocks</span></code>.</p>
<div class="versionadded">
<p><span class="versionmodified added">New in version 1.4.0.</span></p>
</div>
</dd></dl>

<dl class="py method">
<dt id="pyspark.ml.recommendation.ALS.setNumUserBlocks">
<code class="sig-name descname">setNumUserBlocks</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">value</span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/runawayhorse001/LearningApacheSpark/blob/master/pyspark/ml/recommendation.py#L211-L216"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyspark.ml.recommendation.ALS.setNumUserBlocks" title="Permalink to this definition">¶</a></dt>
<dd><p>Sets the value of <code class="xref py py-attr docutils literal notranslate"><span class="pre">numUserBlocks</span></code>.</p>
<div class="versionadded">
<p><span class="versionmodified added">New in version 1.4.0.</span></p>
</div>
</dd></dl>

<dl class="py method">
<dt id="pyspark.ml.recommendation.ALS.setParams">
<code class="sig-name descname">setParams</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">self</span></em>, <em class="sig-param"><span class="n">rank</span><span class="o">=</span><span class="default_value">10</span></em>, <em class="sig-param"><span class="n">maxIter</span><span class="o">=</span><span class="default_value">10</span></em>, <em class="sig-param"><span class="n">regParam</span><span class="o">=</span><span class="default_value">0.1</span></em>, <em class="sig-param"><span class="n">numUserBlocks</span><span class="o">=</span><span class="default_value">10</span></em>, <em class="sig-param"><span class="n">numItemBlocks</span><span class="o">=</span><span class="default_value">10</span></em>, <em class="sig-param"><span class="n">implicitPrefs</span><span class="o">=</span><span class="default_value">False</span></em>, <em class="sig-param"><span class="n">alpha</span><span class="o">=</span><span class="default_value">1.0</span></em>, <em class="sig-param"><span class="n">userCol</span><span class="o">=</span><span class="default_value">'user'</span></em>, <em class="sig-param"><span class="n">itemCol</span><span class="o">=</span><span class="default_value">'item'</span></em>, <em class="sig-param"><span class="n">seed</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">ratingCol</span><span class="o">=</span><span class="default_value">'rating'</span></em>, <em class="sig-param"><span class="n">nonnegative</span><span class="o">=</span><span class="default_value">False</span></em>, <em class="sig-param"><span class="n">checkpointInterval</span><span class="o">=</span><span class="default_value">10</span></em>, <em class="sig-param"><span class="n">intermediateStorageLevel</span><span class="o">=</span><span class="default_value">'MEMORY_AND_DISK'</span></em>, <em class="sig-param"><span class="n">finalStorageLevel</span><span class="o">=</span><span class="default_value">'MEMORY_AND_DISK'</span></em>, <em class="sig-param"><span class="n">coldStartStrategy</span><span class="o">=</span><span class="default_value">'nan'</span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/runawayhorse001/LearningApacheSpark/blob/master/pyspark/__init__.py#L176-L192"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyspark.ml.recommendation.ALS.setParams" title="Permalink to this definition">¶</a></dt>
<dd><p>Sets params for ALS.</p>
<div class="versionadded">
<p><span class="versionmodified added">New in version 1.4.0.</span></p>
</div>
</dd></dl>

<dl class="py method">
<dt id="pyspark.ml.recommendation.ALS.setRank">
<code class="sig-name descname">setRank</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">value</span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/runawayhorse001/LearningApacheSpark/blob/master/pyspark/ml/recommendation.py#L197-L202"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyspark.ml.recommendation.ALS.setRank" title="Permalink to this definition">¶</a></dt>
<dd><p>Sets the value of <code class="xref py py-attr docutils literal notranslate"><span class="pre">rank</span></code>.</p>
<div class="versionadded">
<p><span class="versionmodified added">New in version 1.4.0.</span></p>
</div>
</dd></dl>

<dl class="py method">
<dt id="pyspark.ml.recommendation.ALS.setRatingCol">
<code class="sig-name descname">setRatingCol</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">value</span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/runawayhorse001/LearningApacheSpark/blob/master/pyspark/ml/recommendation.py#L303-L308"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyspark.ml.recommendation.ALS.setRatingCol" title="Permalink to this definition">¶</a></dt>
<dd><p>Sets the value of <code class="xref py py-attr docutils literal notranslate"><span class="pre">ratingCol</span></code>.</p>
<div class="versionadded">
<p><span class="versionmodified added">New in version 1.4.0.</span></p>
</div>
</dd></dl>

<dl class="py method">
<dt id="pyspark.ml.recommendation.ALS.setUserCol">
<code class="sig-name descname">setUserCol</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">value</span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/runawayhorse001/LearningApacheSpark/blob/master/pyspark/ml/recommendation.py#L275-L280"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyspark.ml.recommendation.ALS.setUserCol" title="Permalink to this definition">¶</a></dt>
<dd><p>Sets the value of <code class="xref py py-attr docutils literal notranslate"><span class="pre">userCol</span></code>.</p>
<div class="versionadded">
<p><span class="versionmodified added">New in version 1.4.0.</span></p>
</div>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt id="pyspark.ml.recommendation.ALSModel">
<em class="property">class </em><code class="sig-prename descclassname">pyspark.ml.recommendation.</code><code class="sig-name descname">ALSModel</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">java_model</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/runawayhorse001/LearningApacheSpark/blob/master/pyspark/ml/recommendation.py#L374-L455"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyspark.ml.recommendation.ALSModel" title="Permalink to this definition">¶</a></dt>
<dd><p>Model fitted by ALS.</p>
<div class="versionadded">
<p><span class="versionmodified added">New in version 1.4.0.</span></p>
</div>
<dl class="py method">
<dt id="pyspark.ml.recommendation.ALSModel.itemFactors">
<em class="property">property </em><code class="sig-name descname">itemFactors</code><a class="reference external" href="https://github.com/runawayhorse001/LearningApacheSpark/blob/master/pyspark/ml/recommendation.py"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyspark.ml.recommendation.ALSModel.itemFactors" title="Permalink to this definition">¶</a></dt>
<dd><p><img class="math" src="_images/math/49f27c1e233761c607a96be8d5644c6cb5145f60.png" alt="id"/> and
<img class="math" src="_images/math/09b437b2c922810104c159162745c65e1c414fea.png" alt="features"/></p>
<div class="versionadded">
<p><span class="versionmodified added">New in version 1.4.0.</span></p>
</div>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p>a DataFrame that stores item factors in two columns</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="pyspark.ml.recommendation.ALSModel.rank">
<em class="property">property </em><code class="sig-name descname">rank</code><a class="reference external" href="https://github.com/runawayhorse001/LearningApacheSpark/blob/master/pyspark/ml/recommendation.py"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyspark.ml.recommendation.ALSModel.rank" title="Permalink to this definition">¶</a></dt>
<dd><p>rank of the matrix factorization model</p>
<div class="versionadded">
<p><span class="versionmodified added">New in version 1.4.0.</span></p>
</div>
</dd></dl>

<dl class="py method">
<dt id="pyspark.ml.recommendation.ALSModel.recommendForAllItems">
<code class="sig-name descname">recommendForAllItems</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">numUsers</span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/runawayhorse001/LearningApacheSpark/blob/master/pyspark/ml/recommendation.py#L416-L425"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyspark.ml.recommendation.ALSModel.recommendForAllItems" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns top <img class="math" src="_images/math/563052b64e65c0fc00257ca176606a123758c347.png" alt="numUsers"/> users recommended for each item, for all items.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>numUsers</strong> – max number of recommendations for each item</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>a DataFrame of (itemCol, recommendations), where recommendations are
stored as an array of (userCol, rating) Rows.</p>
</dd>
</dl>
<div class="versionadded">
<p><span class="versionmodified added">New in version 2.2.0.</span></p>
</div>
</dd></dl>

<dl class="py method">
<dt id="pyspark.ml.recommendation.ALSModel.recommendForAllUsers">
<code class="sig-name descname">recommendForAllUsers</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">numItems</span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/runawayhorse001/LearningApacheSpark/blob/master/pyspark/ml/recommendation.py#L405-L414"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyspark.ml.recommendation.ALSModel.recommendForAllUsers" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns top <img class="math" src="_images/math/0be313b5df0d1bb2cb7736604e88317534d0e7a6.png" alt="numItems"/> items recommended for each user, for all users.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>numItems</strong> – max number of recommendations for each user</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>a DataFrame of (userCol, recommendations), where recommendations are
stored as an array of (itemCol, rating) Rows.</p>
</dd>
</dl>
<div class="versionadded">
<p><span class="versionmodified added">New in version 2.2.0.</span></p>
</div>
</dd></dl>

<dl class="py method">
<dt id="pyspark.ml.recommendation.ALSModel.recommendForItemSubset">
<code class="sig-name descname">recommendForItemSubset</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">dataset</span></em>, <em class="sig-param"><span class="n">numUsers</span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/runawayhorse001/LearningApacheSpark/blob/master/pyspark/ml/recommendation.py#L442-L455"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyspark.ml.recommendation.ALSModel.recommendForItemSubset" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns top <img class="math" src="_images/math/563052b64e65c0fc00257ca176606a123758c347.png" alt="numUsers"/> users recommended for each item id in the input data set. Note that
if there are duplicate ids in the input dataset, only one set of recommendations per unique
id will be returned.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>dataset</strong> – a Dataset containing a column of item ids. The column name must match
<img class="math" src="_images/math/8b383b0905a40ad40638ff0ad01d847c70f16ca3.png" alt="itemCol"/>.</p></li>
<li><p><strong>numUsers</strong> – max number of recommendations for each item</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>a DataFrame of (itemCol, recommendations), where recommendations are
stored as an array of (userCol, rating) Rows.</p>
</dd>
</dl>
<div class="versionadded">
<p><span class="versionmodified added">New in version 2.3.0.</span></p>
</div>
</dd></dl>

<dl class="py method">
<dt id="pyspark.ml.recommendation.ALSModel.recommendForUserSubset">
<code class="sig-name descname">recommendForUserSubset</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">dataset</span></em>, <em class="sig-param"><span class="n">numItems</span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/runawayhorse001/LearningApacheSpark/blob/master/pyspark/ml/recommendation.py#L427-L440"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyspark.ml.recommendation.ALSModel.recommendForUserSubset" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns top <img class="math" src="_images/math/0be313b5df0d1bb2cb7736604e88317534d0e7a6.png" alt="numItems"/> items recommended for each user id in the input data set. Note that
if there are duplicate ids in the input dataset, only one set of recommendations per unique
id will be returned.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>dataset</strong> – a Dataset containing a column of user ids. The column name must match
<img class="math" src="_images/math/5fc38e0066607b73c119c37003fc4743c0aff216.png" alt="userCol"/>.</p></li>
<li><p><strong>numItems</strong> – max number of recommendations for each user</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>a DataFrame of (userCol, recommendations), where recommendations are
stored as an array of (itemCol, rating) Rows.</p>
</dd>
</dl>
<div class="versionadded">
<p><span class="versionmodified added">New in version 2.3.0.</span></p>
</div>
</dd></dl>

<dl class="py method">
<dt id="pyspark.ml.recommendation.ALSModel.userFactors">
<em class="property">property </em><code class="sig-name descname">userFactors</code><a class="reference external" href="https://github.com/runawayhorse001/LearningApacheSpark/blob/master/pyspark/ml/recommendation.py"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyspark.ml.recommendation.ALSModel.userFactors" title="Permalink to this definition">¶</a></dt>
<dd><p><img class="math" src="_images/math/49f27c1e233761c607a96be8d5644c6cb5145f60.png" alt="id"/> and
<img class="math" src="_images/math/09b437b2c922810104c159162745c65e1c414fea.png" alt="features"/></p>
<div class="versionadded">
<p><span class="versionmodified added">New in version 1.4.0.</span></p>
</div>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p>a DataFrame that stores user factors in two columns</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="module-pyspark.ml.pipeline">
<span id="pipeline-api"></span><h2><span class="section-number">27.6. </span>Pipeline API<a class="headerlink" href="#module-pyspark.ml.pipeline" title="Permalink to this headline">¶</a></h2>
<dl class="py class">
<dt id="pyspark.ml.pipeline.Pipeline">
<em class="property">class </em><code class="sig-prename descclassname">pyspark.ml.pipeline.</code><code class="sig-name descname">Pipeline</code><span class="sig-paren">(</span><em class="sig-param"><span class="o">*</span><span class="n">args</span></em>, <em class="sig-param"><span class="o">**</span><span class="n">kwargs</span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/runawayhorse001/LearningApacheSpark/blob/master/pyspark/ml/pipeline.py#L33-L175"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyspark.ml.pipeline.Pipeline" title="Permalink to this definition">¶</a></dt>
<dd><p>A simple pipeline, which acts as an estimator. A Pipeline consists
of a sequence of stages, each of which is either an
<code class="xref py py-class docutils literal notranslate"><span class="pre">Estimator</span></code> or a <code class="xref py py-class docutils literal notranslate"><span class="pre">Transformer</span></code>. When
<code class="xref py py-meth docutils literal notranslate"><span class="pre">Pipeline.fit()</span></code> is called, the stages are executed in
order. If a stage is an <code class="xref py py-class docutils literal notranslate"><span class="pre">Estimator</span></code>, its
<code class="xref py py-meth docutils literal notranslate"><span class="pre">Estimator.fit()</span></code> method will be called on the input
dataset to fit a model. Then the model, which is a transformer,
will be used to transform the dataset as the input to the next
stage. If a stage is a <code class="xref py py-class docutils literal notranslate"><span class="pre">Transformer</span></code>, its
<code class="xref py py-meth docutils literal notranslate"><span class="pre">Transformer.transform()</span></code> method will be called to produce
the dataset for the next stage. The fitted model from a
<a class="reference internal" href="#pyspark.ml.pipeline.Pipeline" title="pyspark.ml.pipeline.Pipeline"><code class="xref py py-class docutils literal notranslate"><span class="pre">Pipeline</span></code></a> is a <a class="reference internal" href="#pyspark.ml.pipeline.PipelineModel" title="pyspark.ml.pipeline.PipelineModel"><code class="xref py py-class docutils literal notranslate"><span class="pre">PipelineModel</span></code></a>, which
consists of fitted models and transformers, corresponding to the
pipeline stages. If stages is an empty list, the pipeline acts as an
identity transformer.</p>
<div class="versionadded">
<p><span class="versionmodified added">New in version 1.3.0.</span></p>
</div>
<dl class="py method">
<dt id="pyspark.ml.pipeline.Pipeline.copy">
<code class="sig-name descname">copy</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">extra</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/runawayhorse001/LearningApacheSpark/blob/master/pyspark/ml/pipeline.py#L117-L129"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyspark.ml.pipeline.Pipeline.copy" title="Permalink to this definition">¶</a></dt>
<dd><p>Creates a copy of this instance.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>extra</strong> – extra parameters</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>new instance</p>
</dd>
</dl>
<div class="versionadded">
<p><span class="versionmodified added">New in version 1.4.0.</span></p>
</div>
</dd></dl>

<dl class="py method">
<dt id="pyspark.ml.pipeline.Pipeline.getStages">
<code class="sig-name descname">getStages</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference external" href="https://github.com/runawayhorse001/LearningApacheSpark/blob/master/pyspark/ml/pipeline.py#L75-L80"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyspark.ml.pipeline.Pipeline.getStages" title="Permalink to this definition">¶</a></dt>
<dd><p>Get pipeline stages.</p>
<div class="versionadded">
<p><span class="versionmodified added">New in version 1.3.0.</span></p>
</div>
</dd></dl>

<dl class="py method">
<dt id="pyspark.ml.pipeline.Pipeline.read">
<em class="property">classmethod </em><code class="sig-name descname">read</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference external" href="https://github.com/runawayhorse001/LearningApacheSpark/blob/master/pyspark/ml/pipeline.py#L139-L143"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyspark.ml.pipeline.Pipeline.read" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns an MLReader instance for this class.</p>
<div class="versionadded">
<p><span class="versionmodified added">New in version 2.0.0.</span></p>
</div>
</dd></dl>

<dl class="py method">
<dt id="pyspark.ml.pipeline.Pipeline.setParams">
<code class="sig-name descname">setParams</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">self</span></em>, <em class="sig-param"><span class="n">stages</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/runawayhorse001/LearningApacheSpark/blob/master/pyspark/__init__.py#L82-L90"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyspark.ml.pipeline.Pipeline.setParams" title="Permalink to this definition">¶</a></dt>
<dd><p>Sets params for Pipeline.</p>
<div class="versionadded">
<p><span class="versionmodified added">New in version 1.3.0.</span></p>
</div>
</dd></dl>

<dl class="py method">
<dt id="pyspark.ml.pipeline.Pipeline.setStages">
<code class="sig-name descname">setStages</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">value</span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/runawayhorse001/LearningApacheSpark/blob/master/pyspark/ml/pipeline.py#L65-L73"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyspark.ml.pipeline.Pipeline.setStages" title="Permalink to this definition">¶</a></dt>
<dd><p>Set pipeline stages.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>value</strong> – a list of transformers or estimators</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>the pipeline instance</p>
</dd>
</dl>
<div class="versionadded">
<p><span class="versionmodified added">New in version 1.3.0.</span></p>
</div>
</dd></dl>

<dl class="py method">
<dt id="pyspark.ml.pipeline.Pipeline.write">
<code class="sig-name descname">write</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference external" href="https://github.com/runawayhorse001/LearningApacheSpark/blob/master/pyspark/ml/pipeline.py#L131-L137"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyspark.ml.pipeline.Pipeline.write" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns an MLWriter instance for this ML instance.</p>
<div class="versionadded">
<p><span class="versionmodified added">New in version 2.0.0.</span></p>
</div>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt id="pyspark.ml.pipeline.PipelineModel">
<em class="property">class </em><code class="sig-prename descclassname">pyspark.ml.pipeline.</code><code class="sig-name descname">PipelineModel</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">stages</span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/runawayhorse001/LearningApacheSpark/blob/master/pyspark/ml/pipeline.py#L249-L321"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyspark.ml.pipeline.PipelineModel" title="Permalink to this definition">¶</a></dt>
<dd><p>Represents a compiled pipeline with transformers and fitted models.</p>
<div class="versionadded">
<p><span class="versionmodified added">New in version 1.3.0.</span></p>
</div>
<dl class="py method">
<dt id="pyspark.ml.pipeline.PipelineModel.copy">
<code class="sig-name descname">copy</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">extra</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/runawayhorse001/LearningApacheSpark/blob/master/pyspark/ml/pipeline.py#L265-L276"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyspark.ml.pipeline.PipelineModel.copy" title="Permalink to this definition">¶</a></dt>
<dd><p>Creates a copy of this instance.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>extra</strong> – extra parameters</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>new instance</p>
</dd>
</dl>
<div class="versionadded">
<p><span class="versionmodified added">New in version 1.4.0.</span></p>
</div>
</dd></dl>

<dl class="py method">
<dt id="pyspark.ml.pipeline.PipelineModel.read">
<em class="property">classmethod </em><code class="sig-name descname">read</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference external" href="https://github.com/runawayhorse001/LearningApacheSpark/blob/master/pyspark/ml/pipeline.py#L286-L290"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyspark.ml.pipeline.PipelineModel.read" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns an MLReader instance for this class.</p>
<div class="versionadded">
<p><span class="versionmodified added">New in version 2.0.0.</span></p>
</div>
</dd></dl>

<dl class="py method">
<dt id="pyspark.ml.pipeline.PipelineModel.write">
<code class="sig-name descname">write</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference external" href="https://github.com/runawayhorse001/LearningApacheSpark/blob/master/pyspark/ml/pipeline.py#L278-L284"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyspark.ml.pipeline.PipelineModel.write" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns an MLWriter instance for this ML instance.</p>
<div class="versionadded">
<p><span class="versionmodified added">New in version 2.0.0.</span></p>
</div>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt id="pyspark.ml.pipeline.PipelineModelReader">
<em class="property">class </em><code class="sig-prename descclassname">pyspark.ml.pipeline.</code><code class="sig-name descname">PipelineModelReader</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">cls</span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/runawayhorse001/LearningApacheSpark/blob/master/pyspark/ml/pipeline.py#L230-L245"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyspark.ml.pipeline.PipelineModelReader" title="Permalink to this definition">¶</a></dt>
<dd><p>(Private) Specialization of <code class="xref py py-class docutils literal notranslate"><span class="pre">MLReader</span></code> for <a class="reference internal" href="#pyspark.ml.pipeline.PipelineModel" title="pyspark.ml.pipeline.PipelineModel"><code class="xref py py-class docutils literal notranslate"><span class="pre">PipelineModel</span></code></a> types</p>
<dl class="py method">
<dt id="pyspark.ml.pipeline.PipelineModelReader.load">
<code class="sig-name descname">load</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">path</span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/runawayhorse001/LearningApacheSpark/blob/master/pyspark/ml/pipeline.py#L239-L245"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyspark.ml.pipeline.PipelineModelReader.load" title="Permalink to this definition">¶</a></dt>
<dd><p>Load the ML instance from the input path.</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt id="pyspark.ml.pipeline.PipelineModelWriter">
<em class="property">class </em><code class="sig-prename descclassname">pyspark.ml.pipeline.</code><code class="sig-name descname">PipelineModelWriter</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">instance</span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/runawayhorse001/LearningApacheSpark/blob/master/pyspark/ml/pipeline.py#L214-L226"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyspark.ml.pipeline.PipelineModelWriter" title="Permalink to this definition">¶</a></dt>
<dd><p>(Private) Specialization of <code class="xref py py-class docutils literal notranslate"><span class="pre">MLWriter</span></code> for <a class="reference internal" href="#pyspark.ml.pipeline.PipelineModel" title="pyspark.ml.pipeline.PipelineModel"><code class="xref py py-class docutils literal notranslate"><span class="pre">PipelineModel</span></code></a> types</p>
<dl class="py method">
<dt id="pyspark.ml.pipeline.PipelineModelWriter.saveImpl">
<code class="sig-name descname">saveImpl</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">path</span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/runawayhorse001/LearningApacheSpark/blob/master/pyspark/ml/pipeline.py#L223-L226"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyspark.ml.pipeline.PipelineModelWriter.saveImpl" title="Permalink to this definition">¶</a></dt>
<dd><p>save() handles overwriting and then calls this method.  Subclasses should override this
method to implement the actual saving of the instance.</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt id="pyspark.ml.pipeline.PipelineReader">
<em class="property">class </em><code class="sig-prename descclassname">pyspark.ml.pipeline.</code><code class="sig-name descname">PipelineReader</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">cls</span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/runawayhorse001/LearningApacheSpark/blob/master/pyspark/ml/pipeline.py#L195-L210"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyspark.ml.pipeline.PipelineReader" title="Permalink to this definition">¶</a></dt>
<dd><p>(Private) Specialization of <code class="xref py py-class docutils literal notranslate"><span class="pre">MLReader</span></code> for <a class="reference internal" href="#pyspark.ml.pipeline.Pipeline" title="pyspark.ml.pipeline.Pipeline"><code class="xref py py-class docutils literal notranslate"><span class="pre">Pipeline</span></code></a> types</p>
<dl class="py method">
<dt id="pyspark.ml.pipeline.PipelineReader.load">
<code class="sig-name descname">load</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">path</span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/runawayhorse001/LearningApacheSpark/blob/master/pyspark/ml/pipeline.py#L204-L210"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyspark.ml.pipeline.PipelineReader.load" title="Permalink to this definition">¶</a></dt>
<dd><p>Load the ML instance from the input path.</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt id="pyspark.ml.pipeline.PipelineSharedReadWrite">
<em class="property">class </em><code class="sig-prename descclassname">pyspark.ml.pipeline.</code><code class="sig-name descname">PipelineSharedReadWrite</code><a class="reference external" href="https://github.com/runawayhorse001/LearningApacheSpark/blob/master/pyspark/ml/pipeline.py#L325-L390"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyspark.ml.pipeline.PipelineSharedReadWrite" title="Permalink to this definition">¶</a></dt>
<dd><div class="admonition note">
<p class="admonition-title">Note</p>
<p>DeveloperApi</p>
</div>
<p>Functions for <code class="xref py py-class docutils literal notranslate"><span class="pre">MLReader</span></code> and <code class="xref py py-class docutils literal notranslate"><span class="pre">MLWriter</span></code> shared between
<a class="reference internal" href="#pyspark.ml.pipeline.Pipeline" title="pyspark.ml.pipeline.Pipeline"><code class="xref py py-class docutils literal notranslate"><span class="pre">Pipeline</span></code></a> and <a class="reference internal" href="#pyspark.ml.pipeline.PipelineModel" title="pyspark.ml.pipeline.PipelineModel"><code class="xref py py-class docutils literal notranslate"><span class="pre">PipelineModel</span></code></a></p>
<div class="versionadded">
<p><span class="versionmodified added">New in version 2.3.0.</span></p>
</div>
<dl class="py method">
<dt id="pyspark.ml.pipeline.PipelineSharedReadWrite.getStagePath">
<em class="property">static </em><code class="sig-name descname">getStagePath</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">stageUid</span></em>, <em class="sig-param"><span class="n">stageIdx</span></em>, <em class="sig-param"><span class="n">numStages</span></em>, <em class="sig-param"><span class="n">stagesDir</span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/runawayhorse001/LearningApacheSpark/blob/master/pyspark/ml/pipeline.py#L382-L390"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyspark.ml.pipeline.PipelineSharedReadWrite.getStagePath" title="Permalink to this definition">¶</a></dt>
<dd><p>Get path for saving the given stage.</p>
</dd></dl>

<dl class="py method">
<dt id="pyspark.ml.pipeline.PipelineSharedReadWrite.load">
<em class="property">static </em><code class="sig-name descname">load</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">metadata</span></em>, <em class="sig-param"><span class="n">sc</span></em>, <em class="sig-param"><span class="n">path</span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/runawayhorse001/LearningApacheSpark/blob/master/pyspark/ml/pipeline.py#L365-L380"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyspark.ml.pipeline.PipelineSharedReadWrite.load" title="Permalink to this definition">¶</a></dt>
<dd><p>Load metadata and stages for a <a class="reference internal" href="#pyspark.ml.pipeline.Pipeline" title="pyspark.ml.pipeline.Pipeline"><code class="xref py py-class docutils literal notranslate"><span class="pre">Pipeline</span></code></a> or <a class="reference internal" href="#pyspark.ml.pipeline.PipelineModel" title="pyspark.ml.pipeline.PipelineModel"><code class="xref py py-class docutils literal notranslate"><span class="pre">PipelineModel</span></code></a></p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>(UID, list of stages)</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="pyspark.ml.pipeline.PipelineSharedReadWrite.saveImpl">
<em class="property">static </em><code class="sig-name descname">saveImpl</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">instance</span></em>, <em class="sig-param"><span class="n">stages</span></em>, <em class="sig-param"><span class="n">sc</span></em>, <em class="sig-param"><span class="n">path</span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/runawayhorse001/LearningApacheSpark/blob/master/pyspark/ml/pipeline.py#L350-L363"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyspark.ml.pipeline.PipelineSharedReadWrite.saveImpl" title="Permalink to this definition">¶</a></dt>
<dd><p>Save metadata and stages for a <a class="reference internal" href="#pyspark.ml.pipeline.Pipeline" title="pyspark.ml.pipeline.Pipeline"><code class="xref py py-class docutils literal notranslate"><span class="pre">Pipeline</span></code></a> or <a class="reference internal" href="#pyspark.ml.pipeline.PipelineModel" title="pyspark.ml.pipeline.PipelineModel"><code class="xref py py-class docutils literal notranslate"><span class="pre">PipelineModel</span></code></a>
- save metadata to path/metadata
- save stages to stages/IDX_UID</p>
</dd></dl>

<dl class="py method">
<dt id="pyspark.ml.pipeline.PipelineSharedReadWrite.validateStages">
<em class="property">static </em><code class="sig-name descname">validateStages</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">stages</span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/runawayhorse001/LearningApacheSpark/blob/master/pyspark/ml/pipeline.py#L339-L348"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyspark.ml.pipeline.PipelineSharedReadWrite.validateStages" title="Permalink to this definition">¶</a></dt>
<dd><p>Check that all stages are Writable</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt id="pyspark.ml.pipeline.PipelineWriter">
<em class="property">class </em><code class="sig-prename descclassname">pyspark.ml.pipeline.</code><code class="sig-name descname">PipelineWriter</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">instance</span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/runawayhorse001/LearningApacheSpark/blob/master/pyspark/ml/pipeline.py#L179-L191"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyspark.ml.pipeline.PipelineWriter" title="Permalink to this definition">¶</a></dt>
<dd><p>(Private) Specialization of <code class="xref py py-class docutils literal notranslate"><span class="pre">MLWriter</span></code> for <a class="reference internal" href="#pyspark.ml.pipeline.Pipeline" title="pyspark.ml.pipeline.Pipeline"><code class="xref py py-class docutils literal notranslate"><span class="pre">Pipeline</span></code></a> types</p>
<dl class="py method">
<dt id="pyspark.ml.pipeline.PipelineWriter.saveImpl">
<code class="sig-name descname">saveImpl</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">path</span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/runawayhorse001/LearningApacheSpark/blob/master/pyspark/ml/pipeline.py#L188-L191"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyspark.ml.pipeline.PipelineWriter.saveImpl" title="Permalink to this definition">¶</a></dt>
<dd><p>save() handles overwriting and then calls this method.  Subclasses should override this
method to implement the actual saving of the instance.</p>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="module-pyspark.ml.tuning">
<span id="tuning-api"></span><h2><span class="section-number">27.7. </span>Tuning API<a class="headerlink" href="#module-pyspark.ml.tuning" title="Permalink to this headline">¶</a></h2>
<dl class="py class">
<dt id="pyspark.ml.tuning.CrossValidator">
<em class="property">class </em><code class="sig-prename descclassname">pyspark.ml.tuning.</code><code class="sig-name descname">CrossValidator</code><span class="sig-paren">(</span><em class="sig-param"><span class="o">*</span><span class="n">args</span></em>, <em class="sig-param"><span class="o">**</span><span class="n">kwargs</span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/runawayhorse001/LearningApacheSpark/blob/master/pyspark/ml/tuning.py#L202-L387"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyspark.ml.tuning.CrossValidator" title="Permalink to this definition">¶</a></dt>
<dd><p>K-fold cross validation performs model selection by splitting the dataset into a set of
non-overlapping randomly partitioned folds which are used as separate training and test datasets
e.g., with k=3 folds, K-fold cross validation will generate 3 (training, test) dataset pairs,
each of which uses 2/3 of the data for training and 1/3 for testing. Each fold is used as the
test set exactly once.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">pyspark.ml.classification</span> <span class="kn">import</span> <span class="n">LogisticRegression</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">pyspark.ml.evaluation</span> <span class="kn">import</span> <span class="n">BinaryClassificationEvaluator</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">pyspark.ml.linalg</span> <span class="kn">import</span> <span class="n">Vectors</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">dataset</span> <span class="o">=</span> <span class="n">spark</span><span class="o">.</span><span class="n">createDataFrame</span><span class="p">(</span>
<span class="gp">... </span>    <span class="p">[(</span><span class="n">Vectors</span><span class="o">.</span><span class="n">dense</span><span class="p">([</span><span class="mf">0.0</span><span class="p">]),</span> <span class="mf">0.0</span><span class="p">),</span>
<span class="gp">... </span>     <span class="p">(</span><span class="n">Vectors</span><span class="o">.</span><span class="n">dense</span><span class="p">([</span><span class="mf">0.4</span><span class="p">]),</span> <span class="mf">1.0</span><span class="p">),</span>
<span class="gp">... </span>     <span class="p">(</span><span class="n">Vectors</span><span class="o">.</span><span class="n">dense</span><span class="p">([</span><span class="mf">0.5</span><span class="p">]),</span> <span class="mf">0.0</span><span class="p">),</span>
<span class="gp">... </span>     <span class="p">(</span><span class="n">Vectors</span><span class="o">.</span><span class="n">dense</span><span class="p">([</span><span class="mf">0.6</span><span class="p">]),</span> <span class="mf">1.0</span><span class="p">),</span>
<span class="gp">... </span>     <span class="p">(</span><span class="n">Vectors</span><span class="o">.</span><span class="n">dense</span><span class="p">([</span><span class="mf">1.0</span><span class="p">]),</span> <span class="mf">1.0</span><span class="p">)]</span> <span class="o">*</span> <span class="mi">10</span><span class="p">,</span>
<span class="gp">... </span>    <span class="p">[</span><span class="s2">&quot;features&quot;</span><span class="p">,</span> <span class="s2">&quot;label&quot;</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">lr</span> <span class="o">=</span> <span class="n">LogisticRegression</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">grid</span> <span class="o">=</span> <span class="n">ParamGridBuilder</span><span class="p">()</span><span class="o">.</span><span class="n">addGrid</span><span class="p">(</span><span class="n">lr</span><span class="o">.</span><span class="n">maxIter</span><span class="p">,</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">])</span><span class="o">.</span><span class="n">build</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">evaluator</span> <span class="o">=</span> <span class="n">BinaryClassificationEvaluator</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">cv</span> <span class="o">=</span> <span class="n">CrossValidator</span><span class="p">(</span><span class="n">estimator</span><span class="o">=</span><span class="n">lr</span><span class="p">,</span> <span class="n">estimatorParamMaps</span><span class="o">=</span><span class="n">grid</span><span class="p">,</span> <span class="n">evaluator</span><span class="o">=</span><span class="n">evaluator</span><span class="p">,</span>
<span class="gp">... </span>    <span class="n">parallelism</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">cvModel</span> <span class="o">=</span> <span class="n">cv</span><span class="o">.</span><span class="n">fit</span><span class="p">(</span><span class="n">dataset</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">cvModel</span><span class="o">.</span><span class="n">avgMetrics</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
<span class="go">0.5</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">evaluator</span><span class="o">.</span><span class="n">evaluate</span><span class="p">(</span><span class="n">cvModel</span><span class="o">.</span><span class="n">transform</span><span class="p">(</span><span class="n">dataset</span><span class="p">))</span>
<span class="go">0.8333...</span>
</pre></div>
</div>
<div class="versionadded">
<p><span class="versionmodified added">New in version 1.4.0.</span></p>
</div>
<dl class="py method">
<dt id="pyspark.ml.tuning.CrossValidator.copy">
<code class="sig-name descname">copy</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">extra</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/runawayhorse001/LearningApacheSpark/blob/master/pyspark/ml/tuning.py#L319-L337"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyspark.ml.tuning.CrossValidator.copy" title="Permalink to this definition">¶</a></dt>
<dd><p>Creates a copy of this instance with a randomly generated uid
and some extra params. This copies creates a deep copy of
the embedded paramMap, and copies the embedded and extra parameters over.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>extra</strong> – Extra parameters to copy to the new instance</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Copy of this instance</p>
</dd>
</dl>
<div class="versionadded">
<p><span class="versionmodified added">New in version 1.4.0.</span></p>
</div>
</dd></dl>

<dl class="py method">
<dt id="pyspark.ml.tuning.CrossValidator.getNumFolds">
<code class="sig-name descname">getNumFolds</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference external" href="https://github.com/runawayhorse001/LearningApacheSpark/blob/master/pyspark/ml/tuning.py#L271-L276"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyspark.ml.tuning.CrossValidator.getNumFolds" title="Permalink to this definition">¶</a></dt>
<dd><p>Gets the value of numFolds or its default value.</p>
<div class="versionadded">
<p><span class="versionmodified added">New in version 1.4.0.</span></p>
</div>
</dd></dl>

<dl class="py method">
<dt id="pyspark.ml.tuning.CrossValidator.read">
<em class="property">classmethod </em><code class="sig-name descname">read</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference external" href="https://github.com/runawayhorse001/LearningApacheSpark/blob/master/pyspark/ml/tuning.py#L344-L348"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyspark.ml.tuning.CrossValidator.read" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns an MLReader instance for this class.</p>
<div class="versionadded">
<p><span class="versionmodified added">New in version 2.3.0.</span></p>
</div>
</dd></dl>

<dl class="py method">
<dt id="pyspark.ml.tuning.CrossValidator.setNumFolds">
<code class="sig-name descname">setNumFolds</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">value</span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/runawayhorse001/LearningApacheSpark/blob/master/pyspark/ml/tuning.py#L264-L269"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyspark.ml.tuning.CrossValidator.setNumFolds" title="Permalink to this definition">¶</a></dt>
<dd><p>Sets the value of <code class="xref py py-attr docutils literal notranslate"><span class="pre">numFolds</span></code>.</p>
<div class="versionadded">
<p><span class="versionmodified added">New in version 1.4.0.</span></p>
</div>
</dd></dl>

<dl class="py method">
<dt id="pyspark.ml.tuning.CrossValidator.setParams">
<code class="sig-name descname">setParams</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">estimator</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">estimatorParamMaps</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">evaluator</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">numFolds</span><span class="o">=</span><span class="default_value">3</span></em>, <em class="sig-param"><span class="n">seed</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">parallelism</span><span class="o">=</span><span class="default_value">1</span></em>, <em class="sig-param"><span class="n">collectSubModels</span><span class="o">=</span><span class="default_value">False</span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/runawayhorse001/LearningApacheSpark/blob/master/pyspark/__init__.py#L252-L262"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyspark.ml.tuning.CrossValidator.setParams" title="Permalink to this definition">¶</a></dt>
<dd><p>setParams(self, estimator=None, estimatorParamMaps=None, evaluator=None, numFolds=3,                  seed=None, parallelism=1, collectSubModels=False):
Sets params for cross validator.</p>
<div class="versionadded">
<p><span class="versionmodified added">New in version 1.4.0.</span></p>
</div>
</dd></dl>

<dl class="py method">
<dt id="pyspark.ml.tuning.CrossValidator.write">
<code class="sig-name descname">write</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference external" href="https://github.com/runawayhorse001/LearningApacheSpark/blob/master/pyspark/ml/tuning.py#L339-L342"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyspark.ml.tuning.CrossValidator.write" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns an MLWriter instance for this ML instance.</p>
<div class="versionadded">
<p><span class="versionmodified added">New in version 2.3.0.</span></p>
</div>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt id="pyspark.ml.tuning.CrossValidatorModel">
<em class="property">class </em><code class="sig-prename descclassname">pyspark.ml.tuning.</code><code class="sig-name descname">CrossValidatorModel</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">bestModel</span></em>, <em class="sig-param"><span class="n">avgMetrics</span><span class="o">=</span><span class="default_value">[]</span></em>, <em class="sig-param"><span class="n">subModels</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/runawayhorse001/LearningApacheSpark/blob/master/pyspark/ml/tuning.py#L390-L486"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyspark.ml.tuning.CrossValidatorModel" title="Permalink to this definition">¶</a></dt>
<dd><p>CrossValidatorModel contains the model with the highest average cross-validation
metric across folds and uses this model to transform input data. CrossValidatorModel
also tracks the metrics for each param map evaluated.</p>
<div class="versionadded">
<p><span class="versionmodified added">New in version 1.4.0.</span></p>
</div>
<dl class="py attribute">
<dt id="pyspark.ml.tuning.CrossValidatorModel.avgMetrics">
<code class="sig-name descname">avgMetrics</code><a class="reference external" href="https://github.com/runawayhorse001/LearningApacheSpark/blob/master/pyspark/ml/tuning.py"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyspark.ml.tuning.CrossValidatorModel.avgMetrics" title="Permalink to this definition">¶</a></dt>
<dd><p>Average cross-validation metrics for each paramMap in
CrossValidator.estimatorParamMaps, in the corresponding order.</p>
</dd></dl>

<dl class="py attribute">
<dt id="pyspark.ml.tuning.CrossValidatorModel.bestModel">
<code class="sig-name descname">bestModel</code><a class="reference external" href="https://github.com/runawayhorse001/LearningApacheSpark/blob/master/pyspark/ml/tuning.py"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyspark.ml.tuning.CrossValidatorModel.bestModel" title="Permalink to this definition">¶</a></dt>
<dd><p>best model from cross validation</p>
</dd></dl>

<dl class="py method">
<dt id="pyspark.ml.tuning.CrossValidatorModel.copy">
<code class="sig-name descname">copy</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">extra</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/runawayhorse001/LearningApacheSpark/blob/master/pyspark/ml/tuning.py#L413-L430"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyspark.ml.tuning.CrossValidatorModel.copy" title="Permalink to this definition">¶</a></dt>
<dd><p>Creates a copy of this instance with a randomly generated uid
and some extra params. This copies the underlying bestModel,
creates a deep copy of the embedded paramMap, and
copies the embedded and extra parameters over.
It does not copy the extra Params into the subModels.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>extra</strong> – Extra parameters to copy to the new instance</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Copy of this instance</p>
</dd>
</dl>
<div class="versionadded">
<p><span class="versionmodified added">New in version 1.4.0.</span></p>
</div>
</dd></dl>

<dl class="py method">
<dt id="pyspark.ml.tuning.CrossValidatorModel.read">
<em class="property">classmethod </em><code class="sig-name descname">read</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference external" href="https://github.com/runawayhorse001/LearningApacheSpark/blob/master/pyspark/ml/tuning.py#L437-L441"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyspark.ml.tuning.CrossValidatorModel.read" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns an MLReader instance for this class.</p>
<div class="versionadded">
<p><span class="versionmodified added">New in version 2.3.0.</span></p>
</div>
</dd></dl>

<dl class="py attribute">
<dt id="pyspark.ml.tuning.CrossValidatorModel.subModels">
<code class="sig-name descname">subModels</code><a class="reference external" href="https://github.com/runawayhorse001/LearningApacheSpark/blob/master/pyspark/ml/tuning.py"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyspark.ml.tuning.CrossValidatorModel.subModels" title="Permalink to this definition">¶</a></dt>
<dd><p>sub model list from cross validation</p>
</dd></dl>

<dl class="py method">
<dt id="pyspark.ml.tuning.CrossValidatorModel.write">
<code class="sig-name descname">write</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference external" href="https://github.com/runawayhorse001/LearningApacheSpark/blob/master/pyspark/ml/tuning.py#L432-L435"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyspark.ml.tuning.CrossValidatorModel.write" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns an MLWriter instance for this ML instance.</p>
<div class="versionadded">
<p><span class="versionmodified added">New in version 2.3.0.</span></p>
</div>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt id="pyspark.ml.tuning.ParamGridBuilder">
<em class="property">class </em><code class="sig-prename descclassname">pyspark.ml.tuning.</code><code class="sig-name descname">ParamGridBuilder</code><a class="reference external" href="https://github.com/runawayhorse001/LearningApacheSpark/blob/master/pyspark/ml/tuning.py#L59-L122"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyspark.ml.tuning.ParamGridBuilder" title="Permalink to this definition">¶</a></dt>
<dd><p>Builder for a param grid used in grid search-based model selection.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">pyspark.ml.classification</span> <span class="kn">import</span> <span class="n">LogisticRegression</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">lr</span> <span class="o">=</span> <span class="n">LogisticRegression</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">output</span> <span class="o">=</span> <span class="n">ParamGridBuilder</span><span class="p">()</span> \
<span class="gp">... </span>    <span class="o">.</span><span class="n">baseOn</span><span class="p">({</span><span class="n">lr</span><span class="o">.</span><span class="n">labelCol</span><span class="p">:</span> <span class="s1">&#39;l&#39;</span><span class="p">})</span> \
<span class="gp">... </span>    <span class="o">.</span><span class="n">baseOn</span><span class="p">([</span><span class="n">lr</span><span class="o">.</span><span class="n">predictionCol</span><span class="p">,</span> <span class="s1">&#39;p&#39;</span><span class="p">])</span> \
<span class="gp">... </span>    <span class="o">.</span><span class="n">addGrid</span><span class="p">(</span><span class="n">lr</span><span class="o">.</span><span class="n">regParam</span><span class="p">,</span> <span class="p">[</span><span class="mf">1.0</span><span class="p">,</span> <span class="mf">2.0</span><span class="p">])</span> \
<span class="gp">... </span>    <span class="o">.</span><span class="n">addGrid</span><span class="p">(</span><span class="n">lr</span><span class="o">.</span><span class="n">maxIter</span><span class="p">,</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">5</span><span class="p">])</span> \
<span class="gp">... </span>    <span class="o">.</span><span class="n">build</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">expected</span> <span class="o">=</span> <span class="p">[</span>
<span class="gp">... </span>    <span class="p">{</span><span class="n">lr</span><span class="o">.</span><span class="n">regParam</span><span class="p">:</span> <span class="mf">1.0</span><span class="p">,</span> <span class="n">lr</span><span class="o">.</span><span class="n">maxIter</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="n">lr</span><span class="o">.</span><span class="n">labelCol</span><span class="p">:</span> <span class="s1">&#39;l&#39;</span><span class="p">,</span> <span class="n">lr</span><span class="o">.</span><span class="n">predictionCol</span><span class="p">:</span> <span class="s1">&#39;p&#39;</span><span class="p">},</span>
<span class="gp">... </span>    <span class="p">{</span><span class="n">lr</span><span class="o">.</span><span class="n">regParam</span><span class="p">:</span> <span class="mf">2.0</span><span class="p">,</span> <span class="n">lr</span><span class="o">.</span><span class="n">maxIter</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="n">lr</span><span class="o">.</span><span class="n">labelCol</span><span class="p">:</span> <span class="s1">&#39;l&#39;</span><span class="p">,</span> <span class="n">lr</span><span class="o">.</span><span class="n">predictionCol</span><span class="p">:</span> <span class="s1">&#39;p&#39;</span><span class="p">},</span>
<span class="gp">... </span>    <span class="p">{</span><span class="n">lr</span><span class="o">.</span><span class="n">regParam</span><span class="p">:</span> <span class="mf">1.0</span><span class="p">,</span> <span class="n">lr</span><span class="o">.</span><span class="n">maxIter</span><span class="p">:</span> <span class="mi">5</span><span class="p">,</span> <span class="n">lr</span><span class="o">.</span><span class="n">labelCol</span><span class="p">:</span> <span class="s1">&#39;l&#39;</span><span class="p">,</span> <span class="n">lr</span><span class="o">.</span><span class="n">predictionCol</span><span class="p">:</span> <span class="s1">&#39;p&#39;</span><span class="p">},</span>
<span class="gp">... </span>    <span class="p">{</span><span class="n">lr</span><span class="o">.</span><span class="n">regParam</span><span class="p">:</span> <span class="mf">2.0</span><span class="p">,</span> <span class="n">lr</span><span class="o">.</span><span class="n">maxIter</span><span class="p">:</span> <span class="mi">5</span><span class="p">,</span> <span class="n">lr</span><span class="o">.</span><span class="n">labelCol</span><span class="p">:</span> <span class="s1">&#39;l&#39;</span><span class="p">,</span> <span class="n">lr</span><span class="o">.</span><span class="n">predictionCol</span><span class="p">:</span> <span class="s1">&#39;p&#39;</span><span class="p">}]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">len</span><span class="p">(</span><span class="n">output</span><span class="p">)</span> <span class="o">==</span> <span class="nb">len</span><span class="p">(</span><span class="n">expected</span><span class="p">)</span>
<span class="go">True</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">all</span><span class="p">([</span><span class="n">m</span> <span class="ow">in</span> <span class="n">expected</span> <span class="k">for</span> <span class="n">m</span> <span class="ow">in</span> <span class="n">output</span><span class="p">])</span>
<span class="go">True</span>
</pre></div>
</div>
<div class="versionadded">
<p><span class="versionmodified added">New in version 1.4.0.</span></p>
</div>
<dl class="py method">
<dt id="pyspark.ml.tuning.ParamGridBuilder.addGrid">
<code class="sig-name descname">addGrid</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">param</span></em>, <em class="sig-param"><span class="n">values</span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/runawayhorse001/LearningApacheSpark/blob/master/pyspark/ml/tuning.py#L87-L94"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyspark.ml.tuning.ParamGridBuilder.addGrid" title="Permalink to this definition">¶</a></dt>
<dd><p>Sets the given parameters in this grid to fixed values.</p>
<div class="versionadded">
<p><span class="versionmodified added">New in version 1.4.0.</span></p>
</div>
</dd></dl>

<dl class="py method">
<dt id="pyspark.ml.tuning.ParamGridBuilder.baseOn">
<code class="sig-name descname">baseOn</code><span class="sig-paren">(</span><em class="sig-param"><span class="o">*</span><span class="n">args</span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/runawayhorse001/LearningApacheSpark/blob/master/pyspark/ml/tuning.py#L96-L108"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyspark.ml.tuning.ParamGridBuilder.baseOn" title="Permalink to this definition">¶</a></dt>
<dd><p>Sets the given parameters in this grid to fixed values.
Accepts either a parameter dictionary or a list of (parameter, value) pairs.</p>
<div class="versionadded">
<p><span class="versionmodified added">New in version 1.4.0.</span></p>
</div>
</dd></dl>

<dl class="py method">
<dt id="pyspark.ml.tuning.ParamGridBuilder.build">
<code class="sig-name descname">build</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference external" href="https://github.com/runawayhorse001/LearningApacheSpark/blob/master/pyspark/ml/tuning.py#L110-L122"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyspark.ml.tuning.ParamGridBuilder.build" title="Permalink to this definition">¶</a></dt>
<dd><p>Builds and returns all combinations of parameters specified
by the param grid.</p>
<div class="versionadded">
<p><span class="versionmodified added">New in version 1.4.0.</span></p>
</div>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt id="pyspark.ml.tuning.TrainValidationSplit">
<em class="property">class </em><code class="sig-prename descclassname">pyspark.ml.tuning.</code><code class="sig-name descname">TrainValidationSplit</code><span class="sig-paren">(</span><em class="sig-param"><span class="o">*</span><span class="n">args</span></em>, <em class="sig-param"><span class="o">**</span><span class="n">kwargs</span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/runawayhorse001/LearningApacheSpark/blob/master/pyspark/ml/tuning.py#L489-L664"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyspark.ml.tuning.TrainValidationSplit" title="Permalink to this definition">¶</a></dt>
<dd><div class="admonition note">
<p class="admonition-title">Note</p>
<p>Experimental</p>
</div>
<p>Validation for hyper-parameter tuning. Randomly splits the input dataset into train and
validation sets, and uses evaluation metric on the validation set to select the best model.
Similar to <a class="reference internal" href="#pyspark.ml.tuning.CrossValidator" title="pyspark.ml.tuning.CrossValidator"><code class="xref py py-class docutils literal notranslate"><span class="pre">CrossValidator</span></code></a>, but only splits the set once.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">pyspark.ml.classification</span> <span class="kn">import</span> <span class="n">LogisticRegression</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">pyspark.ml.evaluation</span> <span class="kn">import</span> <span class="n">BinaryClassificationEvaluator</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">pyspark.ml.linalg</span> <span class="kn">import</span> <span class="n">Vectors</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">dataset</span> <span class="o">=</span> <span class="n">spark</span><span class="o">.</span><span class="n">createDataFrame</span><span class="p">(</span>
<span class="gp">... </span>    <span class="p">[(</span><span class="n">Vectors</span><span class="o">.</span><span class="n">dense</span><span class="p">([</span><span class="mf">0.0</span><span class="p">]),</span> <span class="mf">0.0</span><span class="p">),</span>
<span class="gp">... </span>     <span class="p">(</span><span class="n">Vectors</span><span class="o">.</span><span class="n">dense</span><span class="p">([</span><span class="mf">0.4</span><span class="p">]),</span> <span class="mf">1.0</span><span class="p">),</span>
<span class="gp">... </span>     <span class="p">(</span><span class="n">Vectors</span><span class="o">.</span><span class="n">dense</span><span class="p">([</span><span class="mf">0.5</span><span class="p">]),</span> <span class="mf">0.0</span><span class="p">),</span>
<span class="gp">... </span>     <span class="p">(</span><span class="n">Vectors</span><span class="o">.</span><span class="n">dense</span><span class="p">([</span><span class="mf">0.6</span><span class="p">]),</span> <span class="mf">1.0</span><span class="p">),</span>
<span class="gp">... </span>     <span class="p">(</span><span class="n">Vectors</span><span class="o">.</span><span class="n">dense</span><span class="p">([</span><span class="mf">1.0</span><span class="p">]),</span> <span class="mf">1.0</span><span class="p">)]</span> <span class="o">*</span> <span class="mi">10</span><span class="p">,</span>
<span class="gp">... </span>    <span class="p">[</span><span class="s2">&quot;features&quot;</span><span class="p">,</span> <span class="s2">&quot;label&quot;</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">lr</span> <span class="o">=</span> <span class="n">LogisticRegression</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">grid</span> <span class="o">=</span> <span class="n">ParamGridBuilder</span><span class="p">()</span><span class="o">.</span><span class="n">addGrid</span><span class="p">(</span><span class="n">lr</span><span class="o">.</span><span class="n">maxIter</span><span class="p">,</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">])</span><span class="o">.</span><span class="n">build</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">evaluator</span> <span class="o">=</span> <span class="n">BinaryClassificationEvaluator</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">tvs</span> <span class="o">=</span> <span class="n">TrainValidationSplit</span><span class="p">(</span><span class="n">estimator</span><span class="o">=</span><span class="n">lr</span><span class="p">,</span> <span class="n">estimatorParamMaps</span><span class="o">=</span><span class="n">grid</span><span class="p">,</span> <span class="n">evaluator</span><span class="o">=</span><span class="n">evaluator</span><span class="p">,</span>
<span class="gp">... </span>    <span class="n">parallelism</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">tvsModel</span> <span class="o">=</span> <span class="n">tvs</span><span class="o">.</span><span class="n">fit</span><span class="p">(</span><span class="n">dataset</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">evaluator</span><span class="o">.</span><span class="n">evaluate</span><span class="p">(</span><span class="n">tvsModel</span><span class="o">.</span><span class="n">transform</span><span class="p">(</span><span class="n">dataset</span><span class="p">))</span>
<span class="go">0.8333...</span>
</pre></div>
</div>
<div class="versionadded">
<p><span class="versionmodified added">New in version 2.0.0.</span></p>
</div>
<dl class="py method">
<dt id="pyspark.ml.tuning.TrainValidationSplit.copy">
<code class="sig-name descname">copy</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">extra</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/runawayhorse001/LearningApacheSpark/blob/master/pyspark/ml/tuning.py#L597-L615"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyspark.ml.tuning.TrainValidationSplit.copy" title="Permalink to this definition">¶</a></dt>
<dd><p>Creates a copy of this instance with a randomly generated uid
and some extra params. This copies creates a deep copy of
the embedded paramMap, and copies the embedded and extra parameters over.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>extra</strong> – Extra parameters to copy to the new instance</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Copy of this instance</p>
</dd>
</dl>
<div class="versionadded">
<p><span class="versionmodified added">New in version 2.0.0.</span></p>
</div>
</dd></dl>

<dl class="py method">
<dt id="pyspark.ml.tuning.TrainValidationSplit.getTrainRatio">
<code class="sig-name descname">getTrainRatio</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference external" href="https://github.com/runawayhorse001/LearningApacheSpark/blob/master/pyspark/ml/tuning.py#L554-L559"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyspark.ml.tuning.TrainValidationSplit.getTrainRatio" title="Permalink to this definition">¶</a></dt>
<dd><p>Gets the value of trainRatio or its default value.</p>
<div class="versionadded">
<p><span class="versionmodified added">New in version 2.0.0.</span></p>
</div>
</dd></dl>

<dl class="py method">
<dt id="pyspark.ml.tuning.TrainValidationSplit.read">
<em class="property">classmethod </em><code class="sig-name descname">read</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference external" href="https://github.com/runawayhorse001/LearningApacheSpark/blob/master/pyspark/ml/tuning.py#L622-L626"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyspark.ml.tuning.TrainValidationSplit.read" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns an MLReader instance for this class.</p>
<div class="versionadded">
<p><span class="versionmodified added">New in version 2.3.0.</span></p>
</div>
</dd></dl>

<dl class="py method">
<dt id="pyspark.ml.tuning.TrainValidationSplit.setParams">
<code class="sig-name descname">setParams</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">estimator</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">estimatorParamMaps</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">evaluator</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">trainRatio</span><span class="o">=</span><span class="default_value">0.75</span></em>, <em class="sig-param"><span class="n">parallelism</span><span class="o">=</span><span class="default_value">1</span></em>, <em class="sig-param"><span class="n">collectSubModels</span><span class="o">=</span><span class="default_value">False</span></em>, <em class="sig-param"><span class="n">seed</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/runawayhorse001/LearningApacheSpark/blob/master/pyspark/__init__.py#L535-L545"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyspark.ml.tuning.TrainValidationSplit.setParams" title="Permalink to this definition">¶</a></dt>
<dd><p>setParams(self, estimator=None, estimatorParamMaps=None, evaluator=None, trainRatio=0.75,                  parallelism=1, collectSubModels=False, seed=None):
Sets params for the train validation split.</p>
<div class="versionadded">
<p><span class="versionmodified added">New in version 2.0.0.</span></p>
</div>
</dd></dl>

<dl class="py method">
<dt id="pyspark.ml.tuning.TrainValidationSplit.setTrainRatio">
<code class="sig-name descname">setTrainRatio</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">value</span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/runawayhorse001/LearningApacheSpark/blob/master/pyspark/ml/tuning.py#L547-L552"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyspark.ml.tuning.TrainValidationSplit.setTrainRatio" title="Permalink to this definition">¶</a></dt>
<dd><p>Sets the value of <code class="xref py py-attr docutils literal notranslate"><span class="pre">trainRatio</span></code>.</p>
<div class="versionadded">
<p><span class="versionmodified added">New in version 2.0.0.</span></p>
</div>
</dd></dl>

<dl class="py method">
<dt id="pyspark.ml.tuning.TrainValidationSplit.write">
<code class="sig-name descname">write</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference external" href="https://github.com/runawayhorse001/LearningApacheSpark/blob/master/pyspark/ml/tuning.py#L617-L620"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyspark.ml.tuning.TrainValidationSplit.write" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns an MLWriter instance for this ML instance.</p>
<div class="versionadded">
<p><span class="versionmodified added">New in version 2.3.0.</span></p>
</div>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt id="pyspark.ml.tuning.TrainValidationSplitModel">
<em class="property">class </em><code class="sig-prename descclassname">pyspark.ml.tuning.</code><code class="sig-name descname">TrainValidationSplitModel</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">bestModel</span></em>, <em class="sig-param"><span class="n">validationMetrics</span><span class="o">=</span><span class="default_value">[]</span></em>, <em class="sig-param"><span class="n">subModels</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/runawayhorse001/LearningApacheSpark/blob/master/pyspark/ml/tuning.py#L667-L764"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyspark.ml.tuning.TrainValidationSplitModel" title="Permalink to this definition">¶</a></dt>
<dd><div class="admonition note">
<p class="admonition-title">Note</p>
<p>Experimental</p>
</div>
<p>Model from train validation split.</p>
<div class="versionadded">
<p><span class="versionmodified added">New in version 2.0.0.</span></p>
</div>
<dl class="py attribute">
<dt id="pyspark.ml.tuning.TrainValidationSplitModel.bestModel">
<code class="sig-name descname">bestModel</code><a class="reference external" href="https://github.com/runawayhorse001/LearningApacheSpark/blob/master/pyspark/ml/tuning.py"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyspark.ml.tuning.TrainValidationSplitModel.bestModel" title="Permalink to this definition">¶</a></dt>
<dd><p>best model from train validation split</p>
</dd></dl>

<dl class="py method">
<dt id="pyspark.ml.tuning.TrainValidationSplitModel.copy">
<code class="sig-name descname">copy</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">extra</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/runawayhorse001/LearningApacheSpark/blob/master/pyspark/ml/tuning.py#L688-L706"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyspark.ml.tuning.TrainValidationSplitModel.copy" title="Permalink to this definition">¶</a></dt>
<dd><p>Creates a copy of this instance with a randomly generated uid
and some extra params. This copies the underlying bestModel,
creates a deep copy of the embedded paramMap, and
copies the embedded and extra parameters over.
And, this creates a shallow copy of the validationMetrics.
It does not copy the extra Params into the subModels.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>extra</strong> – Extra parameters to copy to the new instance</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Copy of this instance</p>
</dd>
</dl>
<div class="versionadded">
<p><span class="versionmodified added">New in version 2.0.0.</span></p>
</div>
</dd></dl>

<dl class="py method">
<dt id="pyspark.ml.tuning.TrainValidationSplitModel.read">
<em class="property">classmethod </em><code class="sig-name descname">read</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference external" href="https://github.com/runawayhorse001/LearningApacheSpark/blob/master/pyspark/ml/tuning.py#L713-L717"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyspark.ml.tuning.TrainValidationSplitModel.read" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns an MLReader instance for this class.</p>
<div class="versionadded">
<p><span class="versionmodified added">New in version 2.3.0.</span></p>
</div>
</dd></dl>

<dl class="py attribute">
<dt id="pyspark.ml.tuning.TrainValidationSplitModel.subModels">
<code class="sig-name descname">subModels</code><a class="reference external" href="https://github.com/runawayhorse001/LearningApacheSpark/blob/master/pyspark/ml/tuning.py"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyspark.ml.tuning.TrainValidationSplitModel.subModels" title="Permalink to this definition">¶</a></dt>
<dd><p>sub models from train validation split</p>
</dd></dl>

<dl class="py attribute">
<dt id="pyspark.ml.tuning.TrainValidationSplitModel.validationMetrics">
<code class="sig-name descname">validationMetrics</code><a class="reference external" href="https://github.com/runawayhorse001/LearningApacheSpark/blob/master/pyspark/ml/tuning.py"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyspark.ml.tuning.TrainValidationSplitModel.validationMetrics" title="Permalink to this definition">¶</a></dt>
<dd><p>evaluated validation metrics</p>
</dd></dl>

<dl class="py method">
<dt id="pyspark.ml.tuning.TrainValidationSplitModel.write">
<code class="sig-name descname">write</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference external" href="https://github.com/runawayhorse001/LearningApacheSpark/blob/master/pyspark/ml/tuning.py#L708-L711"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyspark.ml.tuning.TrainValidationSplitModel.write" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns an MLWriter instance for this ML instance.</p>
<div class="versionadded">
<p><span class="versionmodified added">New in version 2.3.0.</span></p>
</div>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="module-pyspark.ml.evaluation">
<span id="evaluation-api"></span><h2><span class="section-number">27.8. </span>Evaluation API<a class="headerlink" href="#module-pyspark.ml.evaluation" title="Permalink to this headline">¶</a></h2>
<dl class="py class">
<dt id="pyspark.ml.evaluation.BinaryClassificationEvaluator">
<em class="property">class </em><code class="sig-prename descclassname">pyspark.ml.evaluation.</code><code class="sig-name descname">BinaryClassificationEvaluator</code><span class="sig-paren">(</span><em class="sig-param"><span class="o">*</span><span class="n">args</span></em>, <em class="sig-param"><span class="o">**</span><span class="n">kwargs</span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/runawayhorse001/LearningApacheSpark/blob/master/pyspark/ml/evaluation.py#L109-L179"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyspark.ml.evaluation.BinaryClassificationEvaluator" title="Permalink to this definition">¶</a></dt>
<dd><div class="admonition note">
<p class="admonition-title">Note</p>
<p>Experimental</p>
</div>
<p>Evaluator for binary classification, which expects two input columns: rawPrediction and label.
The rawPrediction column can be of type double (binary 0/1 prediction, or probability of label
1) or of type vector (length-2 vector of raw predictions, scores, or label probabilities).</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">pyspark.ml.linalg</span> <span class="kn">import</span> <span class="n">Vectors</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">scoreAndLabels</span> <span class="o">=</span> <span class="nb">map</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="p">(</span><span class="n">Vectors</span><span class="o">.</span><span class="n">dense</span><span class="p">([</span><span class="mf">1.0</span> <span class="o">-</span> <span class="n">x</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">x</span><span class="p">[</span><span class="mi">0</span><span class="p">]]),</span> <span class="n">x</span><span class="p">[</span><span class="mi">1</span><span class="p">]),</span>
<span class="gp">... </span>   <span class="p">[(</span><span class="mf">0.1</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">),</span> <span class="p">(</span><span class="mf">0.1</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">),</span> <span class="p">(</span><span class="mf">0.4</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">),</span> <span class="p">(</span><span class="mf">0.6</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">),</span> <span class="p">(</span><span class="mf">0.6</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">),</span> <span class="p">(</span><span class="mf">0.6</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">),</span> <span class="p">(</span><span class="mf">0.8</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">)])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">dataset</span> <span class="o">=</span> <span class="n">spark</span><span class="o">.</span><span class="n">createDataFrame</span><span class="p">(</span><span class="n">scoreAndLabels</span><span class="p">,</span> <span class="p">[</span><span class="s2">&quot;raw&quot;</span><span class="p">,</span> <span class="s2">&quot;label&quot;</span><span class="p">])</span>
<span class="gp">...</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">evaluator</span> <span class="o">=</span> <span class="n">BinaryClassificationEvaluator</span><span class="p">(</span><span class="n">rawPredictionCol</span><span class="o">=</span><span class="s2">&quot;raw&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">evaluator</span><span class="o">.</span><span class="n">evaluate</span><span class="p">(</span><span class="n">dataset</span><span class="p">)</span>
<span class="go">0.70...</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">evaluator</span><span class="o">.</span><span class="n">evaluate</span><span class="p">(</span><span class="n">dataset</span><span class="p">,</span> <span class="p">{</span><span class="n">evaluator</span><span class="o">.</span><span class="n">metricName</span><span class="p">:</span> <span class="s2">&quot;areaUnderPR&quot;</span><span class="p">})</span>
<span class="go">0.83...</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">bce_path</span> <span class="o">=</span> <span class="n">temp_path</span> <span class="o">+</span> <span class="s2">&quot;/bce&quot;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">evaluator</span><span class="o">.</span><span class="n">save</span><span class="p">(</span><span class="n">bce_path</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">evaluator2</span> <span class="o">=</span> <span class="n">BinaryClassificationEvaluator</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="n">bce_path</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">str</span><span class="p">(</span><span class="n">evaluator2</span><span class="o">.</span><span class="n">getRawPredictionCol</span><span class="p">())</span>
<span class="go">&#39;raw&#39;</span>
</pre></div>
</div>
<div class="versionadded">
<p><span class="versionmodified added">New in version 1.4.0.</span></p>
</div>
<dl class="py method">
<dt id="pyspark.ml.evaluation.BinaryClassificationEvaluator.getMetricName">
<code class="sig-name descname">getMetricName</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference external" href="https://github.com/runawayhorse001/LearningApacheSpark/blob/master/pyspark/ml/evaluation.py#L162-L167"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyspark.ml.evaluation.BinaryClassificationEvaluator.getMetricName" title="Permalink to this definition">¶</a></dt>
<dd><p>Gets the value of metricName or its default value.</p>
<div class="versionadded">
<p><span class="versionmodified added">New in version 1.4.0.</span></p>
</div>
</dd></dl>

<dl class="py method">
<dt id="pyspark.ml.evaluation.BinaryClassificationEvaluator.setMetricName">
<code class="sig-name descname">setMetricName</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">value</span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/runawayhorse001/LearningApacheSpark/blob/master/pyspark/ml/evaluation.py#L155-L160"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyspark.ml.evaluation.BinaryClassificationEvaluator.setMetricName" title="Permalink to this definition">¶</a></dt>
<dd><p>Sets the value of <code class="xref py py-attr docutils literal notranslate"><span class="pre">metricName</span></code>.</p>
<div class="versionadded">
<p><span class="versionmodified added">New in version 1.4.0.</span></p>
</div>
</dd></dl>

<dl class="py method">
<dt id="pyspark.ml.evaluation.BinaryClassificationEvaluator.setParams">
<code class="sig-name descname">setParams</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">self</span></em>, <em class="sig-param"><span class="n">rawPredictionCol</span><span class="o">=</span><span class="default_value">'rawPrediction'</span></em>, <em class="sig-param"><span class="n">labelCol</span><span class="o">=</span><span class="default_value">'label'</span></em>, <em class="sig-param"><span class="n">metricName</span><span class="o">=</span><span class="default_value">'areaUnderROC'</span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/runawayhorse001/LearningApacheSpark/blob/master/pyspark/__init__.py#L169-L179"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyspark.ml.evaluation.BinaryClassificationEvaluator.setParams" title="Permalink to this definition">¶</a></dt>
<dd><p>Sets params for binary classification evaluator.</p>
<div class="versionadded">
<p><span class="versionmodified added">New in version 1.4.0.</span></p>
</div>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt id="pyspark.ml.evaluation.ClusteringEvaluator">
<em class="property">class </em><code class="sig-prename descclassname">pyspark.ml.evaluation.</code><code class="sig-name descname">ClusteringEvaluator</code><span class="sig-paren">(</span><em class="sig-param"><span class="o">*</span><span class="n">args</span></em>, <em class="sig-param"><span class="o">**</span><span class="n">kwargs</span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/runawayhorse001/LearningApacheSpark/blob/master/pyspark/ml/evaluation.py#L332-L422"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyspark.ml.evaluation.ClusteringEvaluator" title="Permalink to this definition">¶</a></dt>
<dd><div class="admonition note">
<p class="admonition-title">Note</p>
<p>Experimental</p>
</div>
<p>Evaluator for Clustering results, which expects two input
columns: prediction and features. The metric computes the Silhouette
measure using the squared Euclidean distance.</p>
<p>The Silhouette is a measure for the validation of the consistency
within clusters. It ranges between 1 and -1, where a value close to
1 means that the points in a cluster are close to the other points
in the same cluster and far from the points of the other clusters.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">pyspark.ml.linalg</span> <span class="kn">import</span> <span class="n">Vectors</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">featureAndPredictions</span> <span class="o">=</span> <span class="nb">map</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="p">(</span><span class="n">Vectors</span><span class="o">.</span><span class="n">dense</span><span class="p">(</span><span class="n">x</span><span class="p">[</span><span class="mi">0</span><span class="p">]),</span> <span class="n">x</span><span class="p">[</span><span class="mi">1</span><span class="p">]),</span>
<span class="gp">... </span>    <span class="p">[([</span><span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.5</span><span class="p">],</span> <span class="mf">0.0</span><span class="p">),</span> <span class="p">([</span><span class="mf">0.5</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">],</span> <span class="mf">0.0</span><span class="p">),</span> <span class="p">([</span><span class="mf">10.0</span><span class="p">,</span> <span class="mf">11.0</span><span class="p">],</span> <span class="mf">1.0</span><span class="p">),</span>
<span class="gp">... </span>    <span class="p">([</span><span class="mf">10.5</span><span class="p">,</span> <span class="mf">11.5</span><span class="p">],</span> <span class="mf">1.0</span><span class="p">),</span> <span class="p">([</span><span class="mf">1.0</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">],</span> <span class="mf">0.0</span><span class="p">),</span> <span class="p">([</span><span class="mf">8.0</span><span class="p">,</span> <span class="mf">6.0</span><span class="p">],</span> <span class="mf">1.0</span><span class="p">)])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">dataset</span> <span class="o">=</span> <span class="n">spark</span><span class="o">.</span><span class="n">createDataFrame</span><span class="p">(</span><span class="n">featureAndPredictions</span><span class="p">,</span> <span class="p">[</span><span class="s2">&quot;features&quot;</span><span class="p">,</span> <span class="s2">&quot;prediction&quot;</span><span class="p">])</span>
<span class="gp">...</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">evaluator</span> <span class="o">=</span> <span class="n">ClusteringEvaluator</span><span class="p">(</span><span class="n">predictionCol</span><span class="o">=</span><span class="s2">&quot;prediction&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">evaluator</span><span class="o">.</span><span class="n">evaluate</span><span class="p">(</span><span class="n">dataset</span><span class="p">)</span>
<span class="go">0.9079...</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ce_path</span> <span class="o">=</span> <span class="n">temp_path</span> <span class="o">+</span> <span class="s2">&quot;/ce&quot;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">evaluator</span><span class="o">.</span><span class="n">save</span><span class="p">(</span><span class="n">ce_path</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">evaluator2</span> <span class="o">=</span> <span class="n">ClusteringEvaluator</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="n">ce_path</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">str</span><span class="p">(</span><span class="n">evaluator2</span><span class="o">.</span><span class="n">getPredictionCol</span><span class="p">())</span>
<span class="go">&#39;prediction&#39;</span>
</pre></div>
</div>
<div class="versionadded">
<p><span class="versionmodified added">New in version 2.3.0.</span></p>
</div>
<dl class="py method">
<dt id="pyspark.ml.evaluation.ClusteringEvaluator.getDistanceMeasure">
<code class="sig-name descname">getDistanceMeasure</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference external" href="https://github.com/runawayhorse001/LearningApacheSpark/blob/master/pyspark/ml/evaluation.py#L417-L422"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyspark.ml.evaluation.ClusteringEvaluator.getDistanceMeasure" title="Permalink to this definition">¶</a></dt>
<dd><p>Gets the value of <img class="math" src="_images/math/30f643b3990e62346b8dd12cda8088cea4f1b498.png" alt="distanceMeasure"/></p>
<div class="versionadded">
<p><span class="versionmodified added">New in version 2.4.0.</span></p>
</div>
</dd></dl>

<dl class="py method">
<dt id="pyspark.ml.evaluation.ClusteringEvaluator.getMetricName">
<code class="sig-name descname">getMetricName</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference external" href="https://github.com/runawayhorse001/LearningApacheSpark/blob/master/pyspark/ml/evaluation.py#L391-L396"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyspark.ml.evaluation.ClusteringEvaluator.getMetricName" title="Permalink to this definition">¶</a></dt>
<dd><p>Gets the value of metricName or its default value.</p>
<div class="versionadded">
<p><span class="versionmodified added">New in version 2.3.0.</span></p>
</div>
</dd></dl>

<dl class="py method">
<dt id="pyspark.ml.evaluation.ClusteringEvaluator.setDistanceMeasure">
<code class="sig-name descname">setDistanceMeasure</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">value</span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/runawayhorse001/LearningApacheSpark/blob/master/pyspark/ml/evaluation.py#L410-L415"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyspark.ml.evaluation.ClusteringEvaluator.setDistanceMeasure" title="Permalink to this definition">¶</a></dt>
<dd><p>Sets the value of <code class="xref py py-attr docutils literal notranslate"><span class="pre">distanceMeasure</span></code>.</p>
<div class="versionadded">
<p><span class="versionmodified added">New in version 2.4.0.</span></p>
</div>
</dd></dl>

<dl class="py method">
<dt id="pyspark.ml.evaluation.ClusteringEvaluator.setMetricName">
<code class="sig-name descname">setMetricName</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">value</span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/runawayhorse001/LearningApacheSpark/blob/master/pyspark/ml/evaluation.py#L384-L389"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyspark.ml.evaluation.ClusteringEvaluator.setMetricName" title="Permalink to this definition">¶</a></dt>
<dd><p>Sets the value of <code class="xref py py-attr docutils literal notranslate"><span class="pre">metricName</span></code>.</p>
<div class="versionadded">
<p><span class="versionmodified added">New in version 2.3.0.</span></p>
</div>
</dd></dl>

<dl class="py method">
<dt id="pyspark.ml.evaluation.ClusteringEvaluator.setParams">
<code class="sig-name descname">setParams</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">self</span></em>, <em class="sig-param"><span class="n">predictionCol</span><span class="o">=</span><span class="default_value">'prediction'</span></em>, <em class="sig-param"><span class="n">featuresCol</span><span class="o">=</span><span class="default_value">'features'</span></em>, <em class="sig-param"><span class="n">metricName</span><span class="o">=</span><span class="default_value">'silhouette'</span></em>, <em class="sig-param"><span class="n">distanceMeasure</span><span class="o">=</span><span class="default_value">'squaredEuclidean'</span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/runawayhorse001/LearningApacheSpark/blob/master/pyspark/__init__.py#L398-L408"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyspark.ml.evaluation.ClusteringEvaluator.setParams" title="Permalink to this definition">¶</a></dt>
<dd><p>Sets params for clustering evaluator.</p>
<div class="versionadded">
<p><span class="versionmodified added">New in version 2.3.0.</span></p>
</div>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt id="pyspark.ml.evaluation.Evaluator">
<em class="property">class </em><code class="sig-prename descclassname">pyspark.ml.evaluation.</code><code class="sig-name descname">Evaluator</code><a class="reference external" href="https://github.com/runawayhorse001/LearningApacheSpark/blob/master/pyspark/ml/evaluation.py#L34-L82"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyspark.ml.evaluation.Evaluator" title="Permalink to this definition">¶</a></dt>
<dd><p>Base class for evaluators that compute metrics from predictions.</p>
<div class="versionadded">
<p><span class="versionmodified added">New in version 1.4.0.</span></p>
</div>
<dl class="py method">
<dt id="pyspark.ml.evaluation.Evaluator.evaluate">
<code class="sig-name descname">evaluate</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">dataset</span></em>, <em class="sig-param"><span class="n">params</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/runawayhorse001/LearningApacheSpark/blob/master/pyspark/ml/evaluation.py#L54-L73"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyspark.ml.evaluation.Evaluator.evaluate" title="Permalink to this definition">¶</a></dt>
<dd><p>Evaluates the output with optional parameters.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>dataset</strong> – a dataset that contains labels/observations and
predictions</p></li>
<li><p><strong>params</strong> – an optional param map that overrides embedded
params</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>metric</p>
</dd>
</dl>
<div class="versionadded">
<p><span class="versionmodified added">New in version 1.4.0.</span></p>
</div>
</dd></dl>

<dl class="py method">
<dt id="pyspark.ml.evaluation.Evaluator.isLargerBetter">
<code class="sig-name descname">isLargerBetter</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference external" href="https://github.com/runawayhorse001/LearningApacheSpark/blob/master/pyspark/ml/evaluation.py#L75-L82"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyspark.ml.evaluation.Evaluator.isLargerBetter" title="Permalink to this definition">¶</a></dt>
<dd><p>Indicates whether the metric returned by <a class="reference internal" href="#pyspark.ml.evaluation.Evaluator.evaluate" title="pyspark.ml.evaluation.Evaluator.evaluate"><code class="xref py py-meth docutils literal notranslate"><span class="pre">evaluate()</span></code></a> should be maximized
(True, default) or minimized (False).
A given evaluator may support multiple metrics which may be maximized or minimized.</p>
<div class="versionadded">
<p><span class="versionmodified added">New in version 1.5.0.</span></p>
</div>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt id="pyspark.ml.evaluation.MulticlassClassificationEvaluator">
<em class="property">class </em><code class="sig-prename descclassname">pyspark.ml.evaluation.</code><code class="sig-name descname">MulticlassClassificationEvaluator</code><span class="sig-paren">(</span><em class="sig-param"><span class="o">*</span><span class="n">args</span></em>, <em class="sig-param"><span class="o">**</span><span class="n">kwargs</span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/runawayhorse001/LearningApacheSpark/blob/master/pyspark/ml/evaluation.py#L260-L328"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyspark.ml.evaluation.MulticlassClassificationEvaluator" title="Permalink to this definition">¶</a></dt>
<dd><div class="admonition note">
<p class="admonition-title">Note</p>
<p>Experimental</p>
</div>
<p>Evaluator for Multiclass Classification, which expects two input
columns: prediction and label.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">scoreAndLabels</span> <span class="o">=</span> <span class="p">[(</span><span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">),</span> <span class="p">(</span><span class="mf">0.0</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">),</span> <span class="p">(</span><span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">),</span>
<span class="gp">... </span>    <span class="p">(</span><span class="mf">1.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">),</span> <span class="p">(</span><span class="mf">1.0</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">),</span> <span class="p">(</span><span class="mf">1.0</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">),</span> <span class="p">(</span><span class="mf">1.0</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">),</span> <span class="p">(</span><span class="mf">2.0</span><span class="p">,</span> <span class="mf">2.0</span><span class="p">),</span> <span class="p">(</span><span class="mf">2.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">)]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">dataset</span> <span class="o">=</span> <span class="n">spark</span><span class="o">.</span><span class="n">createDataFrame</span><span class="p">(</span><span class="n">scoreAndLabels</span><span class="p">,</span> <span class="p">[</span><span class="s2">&quot;prediction&quot;</span><span class="p">,</span> <span class="s2">&quot;label&quot;</span><span class="p">])</span>
<span class="gp">...</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">evaluator</span> <span class="o">=</span> <span class="n">MulticlassClassificationEvaluator</span><span class="p">(</span><span class="n">predictionCol</span><span class="o">=</span><span class="s2">&quot;prediction&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">evaluator</span><span class="o">.</span><span class="n">evaluate</span><span class="p">(</span><span class="n">dataset</span><span class="p">)</span>
<span class="go">0.66...</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">evaluator</span><span class="o">.</span><span class="n">evaluate</span><span class="p">(</span><span class="n">dataset</span><span class="p">,</span> <span class="p">{</span><span class="n">evaluator</span><span class="o">.</span><span class="n">metricName</span><span class="p">:</span> <span class="s2">&quot;accuracy&quot;</span><span class="p">})</span>
<span class="go">0.66...</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">mce_path</span> <span class="o">=</span> <span class="n">temp_path</span> <span class="o">+</span> <span class="s2">&quot;/mce&quot;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">evaluator</span><span class="o">.</span><span class="n">save</span><span class="p">(</span><span class="n">mce_path</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">evaluator2</span> <span class="o">=</span> <span class="n">MulticlassClassificationEvaluator</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="n">mce_path</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">str</span><span class="p">(</span><span class="n">evaluator2</span><span class="o">.</span><span class="n">getPredictionCol</span><span class="p">())</span>
<span class="go">&#39;prediction&#39;</span>
</pre></div>
</div>
<div class="versionadded">
<p><span class="versionmodified added">New in version 1.5.0.</span></p>
</div>
<dl class="py method">
<dt id="pyspark.ml.evaluation.MulticlassClassificationEvaluator.getMetricName">
<code class="sig-name descname">getMetricName</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference external" href="https://github.com/runawayhorse001/LearningApacheSpark/blob/master/pyspark/ml/evaluation.py#L311-L316"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyspark.ml.evaluation.MulticlassClassificationEvaluator.getMetricName" title="Permalink to this definition">¶</a></dt>
<dd><p>Gets the value of metricName or its default value.</p>
<div class="versionadded">
<p><span class="versionmodified added">New in version 1.5.0.</span></p>
</div>
</dd></dl>

<dl class="py method">
<dt id="pyspark.ml.evaluation.MulticlassClassificationEvaluator.setMetricName">
<code class="sig-name descname">setMetricName</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">value</span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/runawayhorse001/LearningApacheSpark/blob/master/pyspark/ml/evaluation.py#L304-L309"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyspark.ml.evaluation.MulticlassClassificationEvaluator.setMetricName" title="Permalink to this definition">¶</a></dt>
<dd><p>Sets the value of <code class="xref py py-attr docutils literal notranslate"><span class="pre">metricName</span></code>.</p>
<div class="versionadded">
<p><span class="versionmodified added">New in version 1.5.0.</span></p>
</div>
</dd></dl>

<dl class="py method">
<dt id="pyspark.ml.evaluation.MulticlassClassificationEvaluator.setParams">
<code class="sig-name descname">setParams</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">self</span></em>, <em class="sig-param"><span class="n">predictionCol</span><span class="o">=</span><span class="default_value">'prediction'</span></em>, <em class="sig-param"><span class="n">labelCol</span><span class="o">=</span><span class="default_value">'label'</span></em>, <em class="sig-param"><span class="n">metricName</span><span class="o">=</span><span class="default_value">'f1'</span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/runawayhorse001/LearningApacheSpark/blob/master/pyspark/__init__.py#L318-L328"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyspark.ml.evaluation.MulticlassClassificationEvaluator.setParams" title="Permalink to this definition">¶</a></dt>
<dd><p>Sets params for multiclass classification evaluator.</p>
<div class="versionadded">
<p><span class="versionmodified added">New in version 1.5.0.</span></p>
</div>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt id="pyspark.ml.evaluation.RegressionEvaluator">
<em class="property">class </em><code class="sig-prename descclassname">pyspark.ml.evaluation.</code><code class="sig-name descname">RegressionEvaluator</code><span class="sig-paren">(</span><em class="sig-param"><span class="o">*</span><span class="n">args</span></em>, <em class="sig-param"><span class="o">**</span><span class="n">kwargs</span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/runawayhorse001/LearningApacheSpark/blob/master/pyspark/ml/evaluation.py#L183-L256"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyspark.ml.evaluation.RegressionEvaluator" title="Permalink to this definition">¶</a></dt>
<dd><div class="admonition note">
<p class="admonition-title">Note</p>
<p>Experimental</p>
</div>
<p>Evaluator for Regression, which expects two input
columns: prediction and label.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">scoreAndLabels</span> <span class="o">=</span> <span class="p">[(</span><span class="o">-</span><span class="mf">28.98343821</span><span class="p">,</span> <span class="o">-</span><span class="mf">27.0</span><span class="p">),</span> <span class="p">(</span><span class="mf">20.21491975</span><span class="p">,</span> <span class="mf">21.5</span><span class="p">),</span>
<span class="gp">... </span>  <span class="p">(</span><span class="o">-</span><span class="mf">25.98418959</span><span class="p">,</span> <span class="o">-</span><span class="mf">22.0</span><span class="p">),</span> <span class="p">(</span><span class="mf">30.69731842</span><span class="p">,</span> <span class="mf">33.0</span><span class="p">),</span> <span class="p">(</span><span class="mf">74.69283752</span><span class="p">,</span> <span class="mf">71.0</span><span class="p">)]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">dataset</span> <span class="o">=</span> <span class="n">spark</span><span class="o">.</span><span class="n">createDataFrame</span><span class="p">(</span><span class="n">scoreAndLabels</span><span class="p">,</span> <span class="p">[</span><span class="s2">&quot;raw&quot;</span><span class="p">,</span> <span class="s2">&quot;label&quot;</span><span class="p">])</span>
<span class="gp">...</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">evaluator</span> <span class="o">=</span> <span class="n">RegressionEvaluator</span><span class="p">(</span><span class="n">predictionCol</span><span class="o">=</span><span class="s2">&quot;raw&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">evaluator</span><span class="o">.</span><span class="n">evaluate</span><span class="p">(</span><span class="n">dataset</span><span class="p">)</span>
<span class="go">2.842...</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">evaluator</span><span class="o">.</span><span class="n">evaluate</span><span class="p">(</span><span class="n">dataset</span><span class="p">,</span> <span class="p">{</span><span class="n">evaluator</span><span class="o">.</span><span class="n">metricName</span><span class="p">:</span> <span class="s2">&quot;r2&quot;</span><span class="p">})</span>
<span class="go">0.993...</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">evaluator</span><span class="o">.</span><span class="n">evaluate</span><span class="p">(</span><span class="n">dataset</span><span class="p">,</span> <span class="p">{</span><span class="n">evaluator</span><span class="o">.</span><span class="n">metricName</span><span class="p">:</span> <span class="s2">&quot;mae&quot;</span><span class="p">})</span>
<span class="go">2.649...</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">re_path</span> <span class="o">=</span> <span class="n">temp_path</span> <span class="o">+</span> <span class="s2">&quot;/re&quot;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">evaluator</span><span class="o">.</span><span class="n">save</span><span class="p">(</span><span class="n">re_path</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">evaluator2</span> <span class="o">=</span> <span class="n">RegressionEvaluator</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="n">re_path</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">str</span><span class="p">(</span><span class="n">evaluator2</span><span class="o">.</span><span class="n">getPredictionCol</span><span class="p">())</span>
<span class="go">&#39;raw&#39;</span>
</pre></div>
</div>
<div class="versionadded">
<p><span class="versionmodified added">New in version 1.4.0.</span></p>
</div>
<dl class="py method">
<dt id="pyspark.ml.evaluation.RegressionEvaluator.getMetricName">
<code class="sig-name descname">getMetricName</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference external" href="https://github.com/runawayhorse001/LearningApacheSpark/blob/master/pyspark/ml/evaluation.py#L239-L244"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyspark.ml.evaluation.RegressionEvaluator.getMetricName" title="Permalink to this definition">¶</a></dt>
<dd><p>Gets the value of metricName or its default value.</p>
<div class="versionadded">
<p><span class="versionmodified added">New in version 1.4.0.</span></p>
</div>
</dd></dl>

<dl class="py method">
<dt id="pyspark.ml.evaluation.RegressionEvaluator.setMetricName">
<code class="sig-name descname">setMetricName</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">value</span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/runawayhorse001/LearningApacheSpark/blob/master/pyspark/ml/evaluation.py#L232-L237"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyspark.ml.evaluation.RegressionEvaluator.setMetricName" title="Permalink to this definition">¶</a></dt>
<dd><p>Sets the value of <code class="xref py py-attr docutils literal notranslate"><span class="pre">metricName</span></code>.</p>
<div class="versionadded">
<p><span class="versionmodified added">New in version 1.4.0.</span></p>
</div>
</dd></dl>

<dl class="py method">
<dt id="pyspark.ml.evaluation.RegressionEvaluator.setParams">
<code class="sig-name descname">setParams</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">self</span></em>, <em class="sig-param"><span class="n">predictionCol</span><span class="o">=</span><span class="default_value">'prediction'</span></em>, <em class="sig-param"><span class="n">labelCol</span><span class="o">=</span><span class="default_value">'label'</span></em>, <em class="sig-param"><span class="n">metricName</span><span class="o">=</span><span class="default_value">'rmse'</span></em><span class="sig-paren">)</span><a class="reference external" href="https://github.com/runawayhorse001/LearningApacheSpark/blob/master/pyspark/__init__.py#L246-L256"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyspark.ml.evaluation.RegressionEvaluator.setParams" title="Permalink to this definition">¶</a></dt>
<dd><p>Sets params for regression evaluator.</p>
<div class="versionadded">
<p><span class="versionmodified added">New in version 1.4.0.</span></p>
</div>
</dd></dl>

</dd></dl>

</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="reference.html" class="btn btn-neutral float-right" title="28. Main Reference" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="bricks.html" class="btn btn-neutral float-left" title="26. Databricks Tips" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2017, Wenqiang Feng
      <span class="lastupdated">
        Last updated on Dec 27, 2021.
      </span>

    </p>
  </div> 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>